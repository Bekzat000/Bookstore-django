//# sourceMappingURL=application_deferred.js.map
/*
 CLEditor Image Upload Plugin v1.0.0
 http://premiumsoftware.net/cleditor
 requires CLEditor v1.3.0 or later

 Copyright 2011, Dmitry Dedukhin
 Plugin let you either to upload image or to specify image url.
*/
window.rm_sso_h={doRequest:function(b){$.cookie("sso_timeout")||($.cookie("sso_timeout","1",{expires:new Date((new Date).getTime()+12E4),path:"/"}),window.current_user_id?document.write("<iframe src='"+b+"/external/dummy' frameborder='no' class='cpFrame' height='1px' width='10px' scrolling='no' frameborder='0' border='0' cellspacing='0'></iframe>"):$.ajax(b+"/external/hash?callback=?",{crossDomain:!0,dataType:"jsonp",success:function(b){rm_sso_h.newUpdate(b.token)}}))},log:function(b,c){try{window.log&&
log(b,c)}catch(a){}},newUpdate:function(b){if(b){rm_sso_h.log("log params is ",b);try{forumSsoCallback(b)}catch(c){rm_sso_h.log(c)}}rm_sso_h.processCallbacks(b)},processCallbacks:function(b){window.newSSOForumCookieDoneLog&&newSSOForumCookieDoneLog(b);if(window.newSSOForumCookieDone)return newSSOForumCookieDone(b)}};
+function(b){function c(a){var e;a=a.attr("data-target")||(e=a.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return b(a)}function a(a){return this.each(function(){var e=b(this),c=e.data("bs.collapse"),h=b.extend({},d.DEFAULTS,e.data(),"object"==typeof a&&a);!c&&h.toggle&&/show|hide/.test(a)&&(h.toggle=!1);c||e.data("bs.collapse",c=new d(this,h));if("string"==typeof a)c[a]()})}var d=function(a,e){this.$element=b(a);this.options=b.extend({},d.DEFAULTS,e);this.$trigger=b('[data-toggle="collapse"][href="#'+
a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};d.VERSION="3.3.7";d.TRANSITION_DURATION=350;d.DEFAULTS={toggle:!0};d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,c=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(c&&c.length&&(e=c.data("bs.collapse"))&&e.transitioning)return;var g=b.Event("show.bs.collapse");this.$element.trigger(g);if(!g.isDefaultPrevented()){c&&c.length&&(a.call(c,"hide"),e||c.data("bs.collapse",null));var h=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[h](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;e=function(){this.$element.removeClass("collapsing").addClass("collapse in")[h]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!b.support.transition)return e.call(this);c=b.camelCase(["scroll",h].join("-"));this.$element.one("bsTransitionEnd",b.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[h](this.$element[0][c])}}};d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=b.Event("hide.bs.collapse");this.$element.trigger(a);if(!a.isDefaultPrevented()){a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var e=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!b.support.transition)return e.call(this);this.$element[a](0).one("bsTransitionEnd",b.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION)}}};d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};d.prototype.getParent=function(){return b(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(b.proxy(function(a,e){a=b(e);this.addAriaAndCollapsedClass(c(a),a)},this)).end()};d.prototype.addAriaAndCollapsedClass=function(b,a){var e=b.hasClass("in");b.attr("aria-expanded",e);a.toggleClass("collapsed",!e).attr("aria-expanded",e)};var e=b.fn.collapse;b.fn.collapse=a;b.fn.collapse.Constructor=d;b.fn.collapse.noConflict=function(){b.fn.collapse=e;return this};b(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var d=b(this);d.attr("data-target")||
e.preventDefault();e=c(d);d=e.data("bs.collapse")?"toggle":d.data();a.call(e,d)})}(jQuery);
+function(b){var c=function(b,a){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",b,a)};c.VERSION="3.3.7";c.TRANSITION_DURATION=150;c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};c.prototype.init=function(a,e,
c){this.enabled=!0;this.type=a;this.$element=b(e);this.options=this.getOptions(c);this.$viewport=this.options.viewport&&b(b.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");a=this.options.trigger.split(" ");
for(e=a.length;e--;)if(c=a[e],"click"==c)this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this));else if("manual"!=c){var l="hover"==c?"mouseleave":"focusout";this.$element.on(("hover"==c?"mouseenter":"focusin")+"."+this.type,this.options.selector,b.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,b.proxy(this.leave,this))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=
function(){return c.DEFAULTS};c.prototype.getOptions=function(a){a=b.extend({},this.getDefaults(),this.$element.data(),a);a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay});return a};c.prototype.getDelegateOptions=function(){var a={},e=this.getDefaults();this._options&&b.each(this._options,function(b,c){e[b]!=c&&(a[b]=c)});return a};c.prototype.enter=function(a){var e=a instanceof this.constructor?a:b(a.currentTarget).data("bs."+this.type);e||(e=new this.constructor(a.currentTarget,
this.getDelegateOptions()),b(a.currentTarget).data("bs."+this.type,e));a instanceof b.Event&&(e.inState["focusin"==a.type?"focus":"hover"]=!0);if(e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{clearTimeout(e.timeout);e.hoverState="in";if(!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}};c.prototype.isInStateTrue=function(){for(var b in this.inState)if(this.inState[b])return!0;return!1};c.prototype.leave=
function(a){var e=a instanceof this.constructor?a:b(a.currentTarget).data("bs."+this.type);e||(e=new this.constructor(a.currentTarget,this.getDelegateOptions()),b(a.currentTarget).data("bs."+this.type,e));a instanceof b.Event&&(e.inState["focusout"==a.type?"focus":"hover"]=!1);if(!e.isInStateTrue()){clearTimeout(e.timeout);e.hoverState="out";if(!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}};c.prototype.show=
function(){var a=b.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var e=b.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!a.isDefaultPrevented()&&e){var f=this,a=this.tip(),e=this.getUID(this.type);this.setContent();a.attr("id",e);this.$element.attr("aria-describedby",e);this.options.animation&&a.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,
l=/\s?auto?\s?/i,g=l.test(e);g&&(e=e.replace(l,"")||"top");a.detach().css({top:0,left:0,display:"block"}).addClass(e).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),h=a[0].offsetWidth,p=a[0].offsetHeight;if(g){var g=e,n=this.getPosition(this.$viewport),e="bottom"==e&&l.bottom+p>n.bottom?"top":"top"==e&&l.top-p<n.top?"bottom":"right"==e&&l.right+h>n.width?"left":
"left"==e&&l.left-h<n.left?"right":e;a.removeClass(g).addClass(e)}l=this.getCalculatedOffset(e,l,h,p);this.applyPlacement(l,e);e=function(){var b=f.hoverState;f.$element.trigger("shown.bs."+f.type);f.hoverState=null;"out"==b&&f.leave(f)};b.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",e).emulateTransitionEnd(c.TRANSITION_DURATION):e()}}};c.prototype.applyPlacement=function(a,e){var c=this.tip(),l=c[0].offsetWidth,g=c[0].offsetHeight,h=parseInt(c.css("margin-top"),10),p=parseInt(c.css("margin-left"),
10);isNaN(h)&&(h=0);isNaN(p)&&(p=0);a.top+=h;a.left+=p;b.offset.setOffset(c[0],b.extend({using:function(b){c.css({top:Math.round(b.top),left:Math.round(b.left)})}},a),0);c.addClass("in");h=c[0].offsetWidth;p=c[0].offsetHeight;"top"==e&&p!=g&&(a.top=a.top+g-p);var n=this.getViewportAdjustedDelta(e,a,h,p);n.left?a.left+=n.left:a.top+=n.top;l=(e=/top|bottom/.test(e))?2*n.left-l+h:2*n.top-g+p;g=e?"offsetWidth":"offsetHeight";c.offset(a);this.replaceArrow(l,c[0][g],e)};c.prototype.replaceArrow=function(b,
a,c){this.arrow().css(c?"left":"top",50*(1-b/a)+"%").css(c?"top":"left","")};c.prototype.setContent=function(){var b=this.tip(),a=this.getTitle();b.find(".tooltip-inner")[this.options.html?"html":"text"](a);b.removeClass("fade in top bottom left right")};c.prototype.hide=function(a){function e(){"in"!=f.hoverState&&l.detach();f.$element&&f.$element.removeAttr("aria-describedby").trigger("hidden.bs."+f.type);a&&a()}var f=this,l=b(this.$tip),g=b.Event("hide.bs."+this.type);this.$element.trigger(g);
if(!g.isDefaultPrevented())return l.removeClass("in"),b.support.transition&&l.hasClass("fade")?l.one("bsTransitionEnd",e).emulateTransitionEnd(c.TRANSITION_DURATION):e(),this.hoverState=null,this};c.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(a){a=a||this.$element;var e=
a[0],c="BODY"==e.tagName,l=e.getBoundingClientRect();null==l.width&&(l=b.extend({},l,{width:l.right-l.left,height:l.bottom-l.top}));e=window.SVGElement&&e instanceof window.SVGElement;e=c?{top:0,left:0}:e?null:a.offset();a={scroll:c?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop()};c=c?{width:b(window).width(),height:b(window).height()}:null;return b.extend({},l,a,c,e)};c.prototype.getCalculatedOffset=function(b,a,c,l){return"bottom"==b?{top:a.top+a.height,left:a.left+a.width/
2-c/2}:"top"==b?{top:a.top-l,left:a.left+a.width/2-c/2}:"left"==b?{top:a.top+a.height/2-l/2,left:a.left-c}:{top:a.top+a.height/2-l/2,left:a.left+a.width}};c.prototype.getViewportAdjustedDelta=function(b,a,c,l){var g={top:0,left:0};if(!this.$viewport)return g;var h=this.options.viewport&&this.options.viewport.padding||0,p=this.getPosition(this.$viewport);/right|left/.test(b)?(c=a.top-h-p.scroll,a=a.top+h-p.scroll+l,c<p.top?g.top=p.top-c:a>p.top+p.height&&(g.top=p.top+p.height-a)):(l=a.left-h,a=a.left+
h+c,l<p.left?g.left=p.left-l:a>p.right&&(g.left=p.left+p.width-a));return g};c.prototype.getTitle=function(){var b=this.$element,a=this.options;return b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)};c.prototype.getUID=function(b){do b+=~~(1E6*Math.random());while(document.getElementById(b));return b};c.prototype.tip=function(){if(!this.$tip&&(this.$tip=b(this.options.template),1!=this.$tip.length))throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");
return this.$tip};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(a){var c=this;a&&(c=b(a.currentTarget).data("bs."+this.type),c||(c=new this.constructor(a.currentTarget,this.getDelegateOptions()),b(a.currentTarget).data("bs."+this.type,c)));a?(c.inState.click=!c.inState.click,
c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)};c.prototype.destroy=function(){var b=this;clearTimeout(this.timeout);this.hide(function(){b.$element.off("."+b.type).removeData("bs."+b.type);b.$tip&&b.$tip.detach();b.$tip=null;b.$arrow=null;b.$viewport=null;b.$element=null})};var a=b.fn.tooltip;b.fn.tooltip=function(a){return this.each(function(){var e=b(this),f=e.data("bs.tooltip"),l="object"==typeof a&&a;if(f||!/destroy|hide/.test(a))if(f||e.data("bs.tooltip",
f=new c(this,l)),"string"==typeof a)f[a]()})};b.fn.tooltip.Constructor=c;b.fn.tooltip.noConflict=function(){b.fn.tooltip=a;return this}}(jQuery);
+function(b){function c(a){var c=a.attr("data-target");c||(c=(c=a.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&b(c))&&c.length?c:a.parent()}function a(a){a&&3===a.which||(b(".dropdown-backdrop").remove(),b('[data-toggle="dropdown"]').each(function(){var e=b(this),d=c(e),h={relatedTarget:this};!d.hasClass("open")||a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&b.contains(d[0],a.target)||(d.trigger(a=b.Event("hide.bs.dropdown",h)),a.isDefaultPrevented()||
(e.attr("aria-expanded","false"),d.removeClass("open").trigger(b.Event("hidden.bs.dropdown",h))))}))}var d=function(a){b(a).on("click.bs.dropdown",this.toggle)};d.VERSION="3.3.7";d.prototype.toggle=function(e){var d=b(this);if(!d.is(".disabled, :disabled")){var g=c(d);e=g.hasClass("open");a();if(!e){if("ontouchstart"in document.documentElement&&!g.closest(".navbar-nav").length)b(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(b(this)).on("click",a);var h={relatedTarget:this};
g.trigger(e=b.Event("show.bs.dropdown",h));if(e.isDefaultPrevented())return;d.trigger("focus").attr("aria-expanded","true");g.toggleClass("open").trigger(b.Event("shown.bs.dropdown",h))}return!1}};d.prototype.keydown=function(a){if(/(38|40|27|32)/.test(a.which)&&!/input|textarea/i.test(a.target.tagName)){var e=b(this);a.preventDefault();a.stopPropagation();if(!e.is(".disabled, :disabled")){var d=c(e),h=d.hasClass("open");if(!h&&27!=a.which||h&&27==a.which)return 27==a.which&&d.find('[data-toggle="dropdown"]').trigger("focus"),
e.trigger("click");e=d.find(".dropdown-menu li:not(.disabled):visible a");e.length&&(d=e.index(a.target),38==a.which&&0<d&&d--,40==a.which&&d<e.length-1&&d++,~d||(d=0),e.eq(d).trigger("focus"))}}};var e=b.fn.dropdown;b.fn.dropdown=function(a){return this.each(function(){var c=b(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this));"string"==typeof a&&e[a].call(c)})};b.fn.dropdown.Constructor=d;b.fn.dropdown.noConflict=function(){b.fn.dropdown=e;return this};b(document).on("click.bs.dropdown.data-api",
a).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',d.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',d.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",d.prototype.keydown)}(jQuery);
+function(b){function c(c){return this.each(function(){var e=b(this),d=e.data("bs.tab");d||e.data("bs.tab",d=new a(this));if("string"==typeof c)d[c]()})}var a=function(a){this.element=b(a)};a.VERSION="3.3.7";a.TRANSITION_DURATION=150;a.prototype.show=function(){var a=this.element,c=a.closest("ul:not(.dropdown-menu)"),e=a.data("target");e||(e=(e=a.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));if(!a.parent("li").hasClass("active")){var d=c.find(".active:last a"),p=b.Event("hide.bs.tab",{relatedTarget:a[0]}),
n=b.Event("show.bs.tab",{relatedTarget:d[0]});d.trigger(p);a.trigger(n);n.isDefaultPrevented()||p.isDefaultPrevented()||(e=b(e),this.activate(a.closest("li"),c),this.activate(e,e.parent(),function(){d.trigger({type:"hidden.bs.tab",relatedTarget:a[0]});a.trigger({type:"shown.bs.tab",relatedTarget:d[0]})}))}};a.prototype.activate=function(c,e,d){function h(){p.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);c.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",
!0);n?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade");c.parent(".dropdown-menu").length&&c.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);d&&d()}var p=e.find("> .active"),n=d&&b.support.transition&&(p.length&&p.hasClass("fade")||!!e.find("> .fade").length);p.length&&n?p.one("bsTransitionEnd",h).emulateTransitionEnd(a.TRANSITION_DURATION):h();p.removeClass("in")};var d=b.fn.tab;b.fn.tab=c;b.fn.tab.Constructor=a;b.fn.tab.noConflict=function(){b.fn.tab=
d;return this};var e=function(a){a.preventDefault();c.call(b(this),"show")};b(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery);
+function(b){function c(c,d){return this.each(function(){var l=b(this),g=l.data("bs.modal"),h=b.extend({},a.DEFAULTS,l.data(),"object"==typeof c&&c);g||l.data("bs.modal",g=new a(this,h));if("string"==typeof c)g[c](d);else h.show&&g.show(d)})}var a=function(a,c){this.options=c;this.$body=b(document.body);this.$element=b(a);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,
b.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};a.VERSION="3.3.7";a.TRANSITION_DURATION=300;a.BACKDROP_TRANSITION_DURATION=150;a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};a.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};a.prototype.show=function(c){var d=this,l=b.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(l);this.isShown||l.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),
this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',b.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(a){b(a.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var g=b.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body);d.$element.show().scrollTop(0);d.adjustDialog();g&&d.$element[0].offsetWidth;
d.$element.addClass("in");d.enforceFocus();var h=b.Event("shown.bs.modal",{relatedTarget:c});g?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(h)}).emulateTransitionEnd(a.TRANSITION_DURATION):d.$element.trigger("focus").trigger(h)}))};a.prototype.hide=function(c){c&&c.preventDefault();c=b.Event("hide.bs.modal");this.$element.trigger(c);this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),b(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
this.$dialog.off("mousedown.dismiss.bs.modal"),b.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",b.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())};a.prototype.enforceFocus=function(){b(document).off("focusin.bs.modal").on("focusin.bs.modal",b.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};a.prototype.escape=function(){if(this.isShown&&
this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",b.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};a.prototype.resize=function(){if(this.isShown)b(window).on("resize.bs.modal",b.proxy(this.handleUpdate,this));else b(window).off("resize.bs.modal")};a.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};
a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};a.prototype.backdrop=function(c){var d=this,l=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var g=b.support.transition&&l;this.$backdrop=b(document.createElement("div")).addClass("modal-backdrop "+l).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",b.proxy(function(a){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:a.target===a.currentTarget&&("static"==
this.options.backdrop?this.$element[0].focus():this.hide())},this));g&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c&&(g?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):c())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),l=function(){d.removeBackdrop();c&&c()},b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",l).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):l()):c&&c()};
a.prototype.handleUpdate=function(){this.adjustDialog()};a.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};a.prototype.checkScrollbar=function(){var a=window.innerWidth;a||(a=document.documentElement.getBoundingClientRect(),
a=a.right-Math.abs(a.left));this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};a.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)};a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};a.prototype.measureScrollbar=function(){var a=document.createElement("div");
a.className="modal-scrollbar-measure";this.$body.append(a);var b=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return b};var d=b.fn.modal;b.fn.modal=c;b.fn.modal.Constructor=a;b.fn.modal.noConflict=function(){b.fn.modal=d;return this};b(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var d=b(this),l=d.attr("href"),g=b(d.attr("data-target")||l&&l.replace(/.*(?=#[^\s]+$)/,"")),l=g.data("bs.modal")?"toggle":b.extend({remote:!/#/.test(l)&&l},g.data(),d.data());d.is("a")&&
a.preventDefault();g.one("show.bs.modal",function(a){if(!a.isDefaultPrevented())g.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})});c.call(g,l,this)})}(jQuery);
+function(b){var c=function(a,b){this.init("popover",a,b)};if(!b.fn.tooltip)throw Error("Popover requires tooltip.js");c.VERSION="3.3.7";c.DEFAULTS=b.extend({},b.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=b.extend({},b.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};
c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var a=this.$element,
b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var a=b.fn.popover;b.fn.popover=function(a){return this.each(function(){var e=b(this),f=e.data("bs.popover"),l="object"==typeof a&&a;if(f||!/destroy|hide/.test(a))if(f||e.data("bs.popover",f=new c(this,l)),"string"==typeof a)f[a]()})};b.fn.popover.Constructor=c;b.fn.popover.noConflict=function(){b.fn.popover=
a;return this}}(jQuery);
(function(b){function c(a,b){b=jQuery("#"+b).position();jQuery("#iColorPicker").css({top:b.top+jQuery("#"+a).outerHeight()+"px",left:b.left+"px",position:"absolute"}).fadeIn("fast");jQuery("#iColorPickerBg").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).fadeIn("fast");b=jQuery("#"+a).val();jQuery("#color").val(b);b=jQuery("#iColorPicker");for(i=0;i<b.length;i++){var c=document.getElementById("hexSection"+i).childNodes;for(j=0;j<c.length;j++){var f=c[j].childNodes;for(k=0;k<f.length;k++)jQuery(c[j].childNodes[k]).unbind().mouseover(function(a){}).click(function(){var b=
"#"+jQuery(this).attr("hx");rm_h.user.setBGColor(b);jQuery("#"+a).val(b).css("background",b);jQuery("#iColorPickerBg").hide();jQuery("#iColorPicker").fadeOut();jQuery(this)})}}}jQuery.fn.iColorPicker=function(){this.each(function(a){0==a&&(jQuery(document.createElement("div")).attr("id","iColorPicker").css("display","none").html('<table class="pickerTable" id="pickerTable0"><thead id="hexSection0"><tr><td style="background:#f00;" hx="f00"></td><td style="background:#ff0" hx="ff0"></td><td style="background:#0f0" hx="0f0"></td><td style="background:#0ff" hx="0ff"></td><td style="background:#00f" hx="00f"></td><td style="background:#f0f" hx="f0f"></td><td style="background:#fff" hx="fff"></td><td style="background:#ebebeb" hx="ebebeb"></td><td style="background:#e1e1e1" hx="e1e1e1"></td><td style="background:#d7d7d7" hx="d7d7d7"></td><td style="background:#cccccc" hx="cccccc"></td><td style="background:#c2c2c2" hx="c2c2c2"></td><td style="background:#b7b7b7" hx="b7b7b7"></td><td style="background:#acacac" hx="acacac"></td><td style="background:#a0a0a0" hx="a0a0a0"></td><td style="background:#959595" hx="959595"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#898989" hx="898989"></td><td style="background:#7d7d7d" hx="7d7d7d"></td><td style="background:#707070" hx="707070"></td><td style="background:#626262" hx="626262"></td><td style="background:#555" hx="555"></td><td style="background:#464646" hx="464646"></td><td style="background:#363636" hx="363636"></td><td style="background:#262626" hx="262626"></td><td style="background:#111" hx="111"></td><td style="background:#000" hx="000"></td></tr><tr><td style="background:#f7977a" hx="f7977a"></td><td style="background:#fbad82" hx="fbad82"></td><td style="background:#fdc68c" hx="fdc68c"></td><td style="background:#fff799" hx="fff799"></td><td style="background:#c6df9c" hx="c6df9c"></td><td style="background:#a4d49d" hx="a4d49d"></td><td style="background:#81ca9d" hx="81ca9d"></td><td style="background:#7bcdc9" hx="7bcdc9"></td><td style="background:#6ccff7" hx="6ccff7"></td><td style="background:#7ca6d8" hx="7ca6d8"></td><td style="background:#8293ca" hx="8293ca"></td><td style="background:#8881be" hx="8881be"></td><td style="background:#a286bd" hx="a286bd"></td><td style="background:#bc8cbf" hx="bc8cbf"></td><td style="background:#f49bc1" hx="f49bc1"></td><td style="background:#f5999d" hx="f5999d"></td></tr><tr><td style="background:#f16c4d" hx="f16c4d"></td><td style="background:#f68e54" hx="f68e54"></td><td style="background:#fbaf5a" hx="fbaf5a"></td><td style="background:#fff467" hx="fff467"></td><td style="background:#acd372" hx="acd372"></td><td style="background:#7dc473" hx="7dc473"></td><td style="background:#39b778" hx="39b778"></td><td style="background:#16bcb4" hx="16bcb4"></td><td style="background:#00bff3" hx="00bff3"></td><td style="background:#438ccb" hx="438ccb"></td><td style="background:#5573b7" hx="5573b7"></td><td style="background:#5e5ca7" hx="5e5ca7"></td><td style="background:#855fa8" hx="855fa8"></td><td style="background:#a763a9" hx="a763a9"></td><td style="background:#ef6ea8" hx="ef6ea8"></td><td style="background:#f16d7e" hx="f16d7e"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#f16522" hx="f16522"></td><td style="background:#f7941d" hx="f7941d"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#8fc63d" hx="8fc63d"></td><td style="background:#37b44a" hx="37b44a"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00a99e" hx="00a99e"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#0072bc" hx="0072bc"></td><td style="background:#0054a5" hx="0054a5"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#652c91" hx="652c91"></td><td style="background:#91278f" hx="91278f"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#ee105a" hx="ee105a"></td></tr><tr><td style="background:#9d0a0f" hx="9d0a0f"></td><td style="background:#a1410d" hx="a1410d"></td><td style="background:#a36209" hx="a36209"></td><td style="background:#aba000" hx="aba000"></td><td style="background:#588528" hx="588528"></td><td style="background:#197b30" hx="197b30"></td><td style="background:#007236" hx="007236"></td><td style="background:#00736a" hx="00736a"></td><td style="background:#0076a4" hx="0076a4"></td><td style="background:#004a80" hx="004a80"></td><td style="background:#003370" hx="003370"></td><td style="background:#1d1363" hx="1d1363"></td><td style="background:#450e61" hx="450e61"></td><td style="background:#62055f" hx="62055f"></td><td style="background:#9e005c" hx="9e005c"></td><td style="background:#9d0039" hx="9d0039"></td></tr><tr><td style="background:#790000" hx="790000"></td><td style="background:#7b3000" hx="7b3000"></td><td style="background:#7c4900" hx="7c4900"></td><td style="background:#827a00" hx="827a00"></td><td style="background:#3e6617" hx="3e6617"></td><td style="background:#045f20" hx="045f20"></td><td style="background:#005824" hx="005824"></td><td style="background:#005951" hx="005951"></td><td style="background:#005b7e" hx="005b7e"></td><td style="background:#003562" hx="003562"></td><td style="background:#002056" hx="002056"></td><td style="background:#0c004b" hx="0c004b"></td><td style="background:#30004a" hx="30004a"></td><td style="background:#4b0048" hx="4b0048"></td><td style="background:#7a0045" hx="7a0045"></td><td style="background:#7a0026" hx="7a0026"></td></tr></thead><tbody></tbody></table><style>#iColorPicker input{margin:2px}</style>').appendTo("body"),
jQuery(document.createElement("div")).attr("id","iColorPickerBg").click(function(){jQuery("#iColorPickerBg").hide();jQuery("#iColorPicker").fadeOut()}).appendTo("body"),jQuery("table.pickerTable td").css({width:"12px",height:"14px",border:"1px solid #000",cursor:"pointer"}),jQuery("#iColorPicker table.pickerTable").css({"border-collapse":"collapse"}),jQuery("#iColorPicker").css({border:"1px solid #ccc",background:"#333",padding:"5px",color:"#fff","z-index":9999}));var b=this.id;a=jQuery('<button class="colorButton" id="icp_'+
b+'")">\x3c!----\x3e</button>');a.click(function(){c(b,"icp_"+b)});jQuery(this).css("backgroundColor",jQuery(this).val()).after(a)})}})(jQuery);
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(b,c){function a(a,b){this.container=a;this.options=b;this.init()}function d(a,c){this.widget=a;this.options=b.extend({},c);this.detectService();this.service&&this.init()}function e(a){function b(a,c){return c.toUpper()}var c={};a=a.data();for(var e in a){var d=a[e];"yes"===d?d=!0:"no"===d&&(d=!1);c[e.replace(/-(\w)/g,b)]=d}return c}function f(a,b){return l(a,b,encodeURIComponent)}function l(a,b,c){return a.replace(/\{([^}]+)\}/g,
function(a,e){return e in b?c?c(b[e]):b[e]:a})}function g(a,b){a=n+a;return a+" "+a+"_"+b}function h(a,c){function e(g){"keydown"===g.type&&27!==g.which||b(g.target).closest(a).length||(a.removeClass(r),d.off(f,e),b.isFunction(c)&&c())}var d=b(document),f="click touchstart keydown";d.on(f,e)}function p(a){if(document.documentElement.getBoundingClientRect){var b=parseInt(a.css("left"),10),c=parseInt(a.css("top"),10),e=a[0].getBoundingClientRect();10>e.left?a.css("left",10-e.left+b):e.right>window.innerWidth-
10&&a.css("left",window.innerWidth-e.right-10+b);10>e.top?a.css("top",10-e.top+c):e.bottom>window.innerHeight-10&&a.css("top",window.innerHeight-e.bottom-10+c)}a.addClass(r)}var n="social-likes__",r="social-likes_opened",v="https:"===location.protocol?"https:":"http:",x={facebook:{counterUrl:"https://graph.facebook.com/?id={url}",convertNumber:function(a){return a.share.share_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",popupWidth:600,popupHeight:359},twitter:{counters:!1,
popupUrl:"https://twitter.com/intent/tweet?url={url}&text={title}",popupWidth:600,popupHeight:250,click:function(){return/[.?:\-\u2013\u2014]\s*$/.test(this.options.title)||(this.options.title+=":"),!0}},mailru:{counterUrl:v+"//connect.mail.ru/share_count?url_list={url}&callback=1&func=?",convertNumber:function(a){for(var b in a)if(a.hasOwnProperty(b))return a[b].shares},popupUrl:"https://connect.mail.ru/share?share_url={url}&title={title}",popupWidth:492,popupHeight:500},vkontakte:{counterUrl:"https://vk.com/share.php?act=count&url={url}&index={index}",
counter:function(a,c){var e=x.vkontakte;e._||(e._=[],window.VK||(window.VK={}),window.VK.Share={count:function(a,b){e._[a].resolve(b)}});var d=e._.length;e._.push(c);b.getScript(f(a,{index:d})).fail(c.reject)},popupUrl:"https://vk.com/share.php?url={url}&title={title}",popupWidth:655,popupHeight:450},odnoklassniki:{counterUrl:v+"//connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",counter:function(a,c){var e=x.odnoklassniki;e._||(e._=[],window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(a,
b){e._[a].resolve(b)});var d=e._.length;e._.push(c);b.getScript(f(a,{index:d})).fail(c.reject)},popupUrl:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",popupWidth:580,popupHeight:336},plusone:{counterUrl:v+"//share.yandex.ru/gpp.xml?url={url}&callback=?",convertNumber:function(a){return parseInt(a.replace(/\D/g,""),10)},popupUrl:"https://plus.google.com/share?url={url}",popupWidth:500,popupHeight:550},pinterest:{counterUrl:v+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",
convertNumber:function(a){return a.count},popupUrl:"https://pinterest.com/pin/create/button/?url={url}&description={title}",popupWidth:740,popupHeight:550}},z={promises:{},fetch:function(a,c,e){z.promises[a]||(z.promises[a]={});var d=z.promises[a];if(!e.forceUpdate&&d[c])return d[c];var g=b.extend({},x[a],e),h=b.Deferred();a=g.counterUrl&&f(g.counterUrl,{url:c});return a&&b.isFunction(g.counter)?g.counter(a,h):g.counterUrl?b.getJSON(a).done(function(a){try{var c=a;b.isFunction(g.convertNumber)&&(c=
g.convertNumber(a));h.resolve(c)}catch(e){h.reject()}}).fail(h.reject):h.reject(),d[c]=h.promise(),d[c]}};b.fn.socialLikes=function(c){return this.each(function(){var d=b(this),f=d.data("social-likes");f?b.isPlainObject(c)&&f.update(c):(f=new a(d,b.extend({},b.fn.socialLikes.defaults,c,e(d))),d.data("social-likes",f))})};b.fn.socialLikes.defaults={url:window.location.href.replace(window.location.hash,""),title:document.title,counters:!0,zeroes:!1,wait:500,timeout:1E4,popupCheckInterval:500,singleTitle:"Share"};
a.prototype={init:function(){this.container.addClass("social-likes");this.single=this.container.hasClass("social-likes_single");this.initUserButtons();this.number=this.countersLeft=0;this.container.on("counter.social-likes",b.proxy(this.updateCounter,this));var a=this.container.children();this.makeSingleButton();this.buttons=[];a.each(b.proxy(function(a,c){a=new d(b(c),this.options);this.buttons.push(a);a.options.counterUrl&&this.countersLeft++},this));this.options.counters?(this.timer=setTimeout(b.proxy(this.appear,
this),this.options.wait),this.timeout=setTimeout(b.proxy(this.ready,this,!0),this.options.timeout)):this.appear()},initUserButtons:function(){!this.userButtonInited&&window.socialLikesButtons&&b.extend(!0,x,socialLikesButtons);this.userButtonInited=!0},makeSingleButton:function(){if(this.single){var a=this.container;a.addClass("social-likes_vertical");a.wrap(b("<div>",{class:"social-likes_single-w"}));a.wrapInner(b("<div>",{class:"social-likes__single-container"}));var c=a.parent(),e=b("<div>",{class:g("widget",
"single")}),d=b(l('<div class="{buttonCls}"><span class="{iconCls}"></span>{title}</div>',{buttonCls:g("button","single"),iconCls:g("icon","single"),title:this.options.singleTitle}));e.append(d);c.append(e);e.on("click",function(){return e.toggleClass("social-likes__widget_active"),e.hasClass("social-likes__widget_active")?(a.css({left:-(a.width()-e.width())/2,top:-a.height()}),p(a),h(a,function(){e.removeClass("social-likes__widget_active")})):a.removeClass(r),!1});this.widget=e}},update:function(a){if(a.forceUpdate||
a.url!==this.options.url){this.number=0;this.countersLeft=this.buttons.length;this.widget&&this.widget.find(".social-likes__counter").remove();b.extend(this.options,a);for(var c=0;c<this.buttons.length;c++)this.buttons[c].update(a)}},updateCounter:function(a,b,c){((c=c||0)||this.options.zeroes)&&(this.number+=c,this.single&&this.getCounterElem().text(this.number));this.countersLeft--;0===this.countersLeft&&(this.appear(),this.ready())},appear:function(){this.container.addClass("social-likes_visible")},
ready:function(a){this.timeout&&clearTimeout(this.timeout);this.container.addClass("social-likes_ready");a||this.container.trigger("ready.social-likes",this.number)},getCounterElem:function(){var a=this.widget.find("."+n+"counter_single");return a.length||(a=b("<span>",{class:g("counter","single")}),this.widget.append(a)),a}};d.prototype={init:function(){this.detectParams();this.initHtml();setTimeout(b.proxy(this.initCounter,this),0)},update:function(a){b.extend(this.options,{forceUpdate:!1},a);this.widget.find(".social-likes__counter").remove();
this.initCounter()},detectService:function(){var a=this.widget.data("service");if(!a){for(var c=this.widget[0],c=c.classList||c.className.split(" "),e=0;e<c.length;e++){var d=c[e];if(x[d]){a=d;break}}if(!a)return}this.service=a;b.extend(this.options,x[a])},detectParams:function(){var a=this.widget.data();if(a.counter){var b=parseInt(a.counter,10);isNaN(b)?this.options.counterUrl=a.counter:this.options.counterNumber=b}a.title&&(this.options.title=a.title);a.url&&(this.options.url=a.url)},initHtml:function(){var a=
this.options,c=this.widget,e=c.find("a");e.length&&this.cloneDataAttrs(e,c);e=b("<span>",{class:this.getElementClassNames("button"),html:c.html()});if(a.clickUrl)a=f(a.clickUrl,{url:a.url,title:a.title}),a=b("<a>",{href:a}),this.cloneDataAttrs(c,a),c.replaceWith(a),this.widget=c=a;else c.on("click",b.proxy(this.click,this));c.removeClass(this.service);c.addClass(this.getElementClassNames("widget"));e.prepend(b("<span>",{class:this.getElementClassNames("icon")}));c.empty().append(e);this.button=e},
initCounter:function(){this.options.counters&&(this.options.counterNumber?this.updateCounter(this.options.counterNumber):z.fetch(this.service,this.options.url,{counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate}).always(b.proxy(this.updateCounter,this)))},cloneDataAttrs:function(a,b){a=a.data();for(var c in a)a.hasOwnProperty(c)&&b.data(c,a[c])},getElementClassNames:function(a){return g(a,this.service)},updateCounter:function(a){a=parseInt(a,10)||0;var c={class:this.getElementClassNames("counter"),
text:a};a||this.options.zeroes||(c.class+=" social-likes__counter_empty",c.text="");c=b("<span>",c);this.widget.append(c);this.widget.trigger("counter.social-likes",[this.service,a])},click:function(a){var c=this.options,e=!0;if(b.isFunction(c.click)&&(e=c.click.call(this,a)),e)a=f(c.popupUrl,{url:c.url,title:c.title}),a=this.addAdditionalParamsToUrl(a),this.openPopup(a,{width:c.popupWidth,height:c.popupHeight});return!1},addAdditionalParamsToUrl:function(a){var c=b.param(b.extend(this.widget.data(),
this.options.data));if(b.isEmptyObject(c))return a;var e=-1===a.indexOf("?")?"?":"&";return a+e+c},openPopup:function(a,e){var d=window.screenTop!==c?window.screenTop:screen.top,f=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,g=Math.round((window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-e.width/2)+(window.screenLeft!==c?window.screenLeft:screen.left),
h=0;f>e.height&&(h=Math.round(f/3-e.height/2)+d);var l=window.open(a,"sl_"+this.service,"left="+g+",top="+h+",width="+e.width+",height="+e.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");if(l){l.focus();this.widget.trigger("popup_opened.social-likes",[this.service,l]);var p=setInterval(b.proxy(function(){l.closed&&(clearInterval(p),this.widget.trigger("popup_closed.social-likes",this.service))},this),this.options.popupCheckInterval)}else location.href=a}};b(function(){b(".social-likes").socialLikes()})});
(function(b){b.browser||(b.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:-1<navigator.userAgent.toLowerCase().indexOf("mozilla/5.0")&&-1<navigator.userAgent.toLowerCase().indexOf("android ")&&-1<navigator.userAgent.toLowerCase().indexOf("applewebkit"),version:function(a){a=
a.toLowerCase();return(/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[])[2]||"0"}(navigator.userAgent)});var c=null!=window.orientation,a=b.browser.opera||b.browser.mozilla&&1.9>parseFloat(b.browser.version.substr(0,3))?"input":"paste",d=function(a){a=b.event.fix(a||window.event);a.type="paste";var c=a.target;setTimeout(function(){b.event.dispatch.call(c,
a)},1)};b.event.special.paste={setup:function(){this.addEventListener?this.addEventListener(a,d,!1):this.attachEvent&&this.attachEvent("on"+a,d)},teardown:function(){this.removeEventListener?this.removeEventListener(a,d,!1):this.detachEvent&&this.detachEvent("on"+a,d)}};b.extend({mask:{rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-Z\u00e7\u00c7\u00e1\u00e0\u00e3\u00e2\u00e9\u00e8\u00ea\u00ed\u00ec\u00f3\u00f2\u00f4\u00f5\u00fa\u00f9\u00fc]/},keyRepresentation:{8:"backspace",
9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:!1,textAlign:!0,selectCharsOnFocus:!0,autoTab:!0,setSize:!1,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){},onFocus:function(a,b){},onBlur:function(a,
b){}},masks:{phone:{mask:"(99) 9999-9999"},"phone-us":{mask:"(999) 999-9999"},cpf:{mask:"999.999.999-99"},cnpj:{mask:"99.999.999/9999-99"},date:{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},cep:{mask:"99999-999"},time:{mask:"29:59"},cc:{mask:"9999 9999 9999 9999"},integer:{mask:"999.999.999.999",type:"reverse"},decimal:{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",
type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"}},init:function(){if(!this.hasInit){var a=this,c,d=this.keyRepresentation;this.ignore=!1;for(c=0;9>=c;c++)this.rules[c]=new RegExp("[0-"+c+"]");this.keyRep=d;this.ignoreKeys=[];b.each(d,function(b){a.ignoreKeys.push(parseInt(b,10))});this.hasInit=!0}},set:function(a,c){var d=this;a=b(a);c=c||{};this.init();return a.each(function(){c.attr&&(d.options.attr=c.attr);var a=b(this),e=b.extend({},
d.options),p=a.attr(e.attr);if(p="string"==typeof c?c:""!==p?p:null)e.mask=p;d.masks[p]&&(e=b.extend(e,d.masks[p]));"object"==typeof c&&c.constructor!=Array&&(e=b.extend(e,c));b.metadata&&(e=b.extend(e,a.metadata()));if(null!=e.mask){e.mask+="";a.data("mask")&&d.unset(a);var p=e.defaultValue,n="reverse"===e.type,r=new RegExp(e.fixedChars,"g");-1===e.maxLength&&(e.maxLength=a.attr("maxLength"));e=b.extend({},e,{fixedCharsReg:new RegExp(e.fixedChars),fixedCharsRegG:r,maskArray:e.mask.split(""),maskNonFixedCharsArray:e.mask.replace(r,
"").split("")});"fixed"!=e.type&&!n||!e.setSize||a.attr("size")||a.attr("size",e.mask.length);n&&e.textAlign&&a.css("text-align","right");if(""!==this.value||""!==p)this.defaultValue=p=d.string(""!==this.value?this.value:p,e),a.val(p);"infinite"==e.type&&(e.type="repeat");a.data("mask",e);a.removeAttr("maxLength");a.bind("keydown.mask",{func:d._onKeyDown,thisObj:d},d._onMask).bind("keypress.mask",{func:d._onKeyPress,thisObj:d},d._onMask).bind("keyup.mask",{func:d._onKeyUp,thisObj:d},d._onMask).bind("paste.mask",
{func:d._onPaste,thisObj:d},d._onMask).bind("drop.mask",{func:d._onPaste,thisObj:d},d._onMask).bind("focus.mask",d._onFocus).bind("blur.mask",d._onBlur).bind("change.mask",d._onChange)}})},unset:function(a){return b(a).each(function(){var a=b(this);if(a.data("mask")){var c=a.data("mask").maxLength;-1!=c&&a.attr("maxLength",c);a.unbind(".mask").removeData("mask")}})},string:function(a,c){this.init();var d={};"string"!=typeof a&&(a=String(a));switch(typeof c){case "string":this.masks[c]?d=b.extend(d,
this.masks[c]):d.mask=c;break;case "object":d=c}d.fixedChars||(d.fixedChars=this.options.fixedChars);c=new RegExp(d.fixedChars);var g=new RegExp(d.fixedChars,"g");if("reverse"===d.type&&d.defaultValue&&"undefined"!=typeof this.signals[d.defaultValue.charAt(0)]){var h=a.charAt(0);d.signal="undefined"!=typeof this.signals[h]?this.signals[h]:this.signals[d.defaultValue.charAt(0)];d.defaultValue=d.defaultValue.substring(1)}return this.__maskArray(a.split(""),d.mask.replace(g,"").split(""),d.mask.split(""),
d.type,d.maxLength,d.defaultValue,c,d.signal)},_onFocus:function(a){var c=b(this),d=c.data("mask");d.inputFocusValue=c.val();d.changed=!1;d.selectCharsOnFocus&&c.select();d.onFocus(this,a)},_onBlur:function(a){var c=b(this),d=c.data("mask");d.inputFocusValue==c.val()||d.changed||c.trigger("change");d.onBlur(this,a)},_onChange:function(a){b(this).data("mask").changed=!0},_onMask:function(a){var c=a.data.thisObj,d={};d._this=a.target;d.$this=b(d._this);d.data=d.$this.data("mask");if(d.$this.attr("readonly")||
!d.data)return!0;d[d.data.type]=!0;d.value=d.$this.val();d.nKey=c.__getKeyNumber(a);d.range=c.__getRange(d._this);d.valueArray=d.value.split("");return a.data.func.call(c,a,d)},_onKeyDown:function(a,d){(this.ignore=-1<b.inArray(d.nKey,this.ignoreKeys)||(a.ctrlKey||a.metaKey||a.altKey)&&a.key)&&d.data.onValid.call(d._this,this.keyRep[d.nKey]||"",d.nKey);return c?this._onKeyPress(a,d):!0},_onKeyUp:function(a,b){return 9===b.nKey||16===b.nKey?!0:b.repeat?(this.__autoTab(b),!0):this._onPaste(a,b)},_onPaste:function(a,
c){c.reverse&&this.__changeSignal(a.type,c);a=this.__maskArray(c.valueArray,c.data.maskNonFixedCharsArray,c.data.maskArray,c.data.type,c.data.maxLength,c.data.defaultValue,c.data.fixedCharsReg,c.data.signal);c.$this.val(a);!c.reverse&&c.data.defaultValue.length&&c.range.start===c.range.end&&this.__setRange(c._this,c.range.start,c.range.end);!b.browser.msie&&!b.browser.safari||c.reverse||this.__setRange(c._this,c.range.start,c.range.end);if(this.ignore)return!0;this.__autoTab(c);return!0},_onKeyPress:function(a,
b){if(this.ignore)return!0;b.reverse&&this.__changeSignal(a.type,b);var c=String.fromCharCode(b.nKey),d=b.range.start,h=b.value,p=b.data.maskArray;if(b.reverse){var n=h.substr(0,d),h=h.substr(b.range.end,h.length),h=n+c+h;b.data.signal&&0<d-b.data.signal.length&&(d-=b.data.signal.length)}n=h.replace(b.data.fixedCharsRegG,"").split("");h=this.__extraPositionsTill(d,p,b.data.fixedCharsReg);b.rsEp=d+h;b.repeat&&(b.rsEp=0);if(!this.rules[p[b.rsEp]]||-1!=b.data.maxLength&&n.length>=b.data.maxLength&&b.repeat)return b.data.onOverflow.call(b._this,
c,b.nKey),!1;if(this.rules[p[b.rsEp]].test(c))b.data.onValid.call(b._this,c,b.nKey);else return b.data.onInvalid.call(b._this,c,b.nKey),!1;c=this.__maskArray(n,b.data.maskNonFixedCharsArray,p,b.data.type,b.data.maxLength,b.data.defaultValue,b.data.fixedCharsReg,b.data.signal,h);b.repeat||b.$this.val(c);return b.reverse?this._keyPressReverse(a,b):b.fixed?this._keyPressFixed(a,b):!0},_keyPressFixed:function(a,b){b.range.start==b.range.end?(0===b.rsEp&&0===b.value.length||b.rsEp<b.value.length)&&this.__setRange(b._this,
b.rsEp,b.rsEp+1):this.__setRange(b._this,b.range.start,b.range.end);return!0},_keyPressReverse:function(a,c){b.browser.msie&&(0===c.range.start&&0===c.range.end||c.range.start!=c.range.end)&&this.__setRange(c._this,c.value.length);return!1},__autoTab:function(a){if(a.data.autoTab&&(a.$this.val().length>=a.data.maskArray.length&&!a.repeat||-1!=a.data.maxLength&&a.valueArray.length>=a.data.maxLength&&a.repeat)){var b=this.__getNextInput(a._this,a.data.autoTab);b&&(a.$this.trigger("blur"),b.focus().select())}},
__changeSignal:function(a,b){!1!==b.data.signal&&(a="paste"===a?b.value.charAt(0):String.fromCharCode(b.nKey),this.signals&&"undefined"!==typeof this.signals[a]&&(b.data.signal=this.signals[a]))},__getKeyNumber:function(a){return a.charCode||a.keyCode||a.which},__maskArray:function(a,b,c,d,h,p,n,r,v){"reverse"===d&&a.reverse();a=this.__removeInvalidChars(a,b,"repeat"===d||"infinite"===d);p&&(a=this.__applyDefaultValue.call(a,p));a=this.__applyMask(a,c,v,n);switch(d){case "reverse":return a.reverse(),
(r||"")+a.join("").substring(a.length-c.length);case "infinite":case "repeat":return b=a.join(""),-1!==h&&a.length>=h?b.substring(0,h):b;default:return a.join("").substring(0,c.length)}},__applyDefaultValue:function(a){var b=a.length,c;for(c=this.length-1;0<=c;c--)if(this[c]==a.charAt(0))this.pop();else break;for(c=0;c<b;c++)this[c]||(this[c]=a.charAt(c));return this},__removeInvalidChars:function(a,b,c){for(var d=0,h=0;d<a.length;d++)b[h]&&this.rules[b[h]]&&!this.rules[b[h]].test(a[d])&&(a.splice(d,
1),c||h--,d--),c||h++;return a},__applyMask:function(a,b,c,d){"undefined"==typeof c&&(c=0);for(var h=0;h<a.length+c;h++)b[h]&&d.test(b[h])&&a.splice(h,0,b[h]);return a},__extraPositionsTill:function(a,b,c){for(var d=0;c.test(b[a++]);)d++;return d},__getNextInput:function(a,c){var d=a.form;if(null==d)return null;var g=d.elements,h=b.inArray(a,g)+1,d=g.length,p;for(p=h;p<d;p++)if(h=b(g[p]),this.__isNextInput(h,c))return h;var g=document.forms,d=b.inArray(a.form,g)+1,n,r;a=g.length;for(n=d;n<a;n++)for(r=
g[n].elements,d=r.length,p=0;p<d;p++)if(h=b(r[p]),this.__isNextInput(h,c))return h;return null},__isNextInput:function(a,b){var c=a.get(0);return c&&(0<c.offsetWidth||0<c.offsetHeight)&&"FIELDSET"!=c.nodeName&&(!0===b||"string"==typeof b&&a.is(b))},__setRange:function(a,b,c){"undefined"==typeof c&&(c=b);a.setSelectionRange?a.setSelectionRange(b,c):(a=a.createTextRange(),a.collapse(),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())},__getRange:function(a){if(!b.browser.msie&&!b.browser.android)return{start:a.selectionStart,
end:a.selectionEnd};a={start:0,end:0};var c=document.selection.createRange();a.start=0-c.duplicate().moveStart("character",-1E5);a.end=a.start+c.text.length;return a},unmaskedVal:function(a){return b(a).val().replace(b.mask.fixedCharsRegG,"")}}});b.fn.extend({setMask:function(a){return b.mask.set(this,a)},unsetMask:function(){return b.mask.unset(this)},unmaskedVal:function(){return b.mask.unmaskedVal(this[0])}})})(jQuery);
setTimeout(function(){try{if(!$.cookie("trSessionId")){var b=.26;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(b=.76);if(Math.random()<b){var c=new Date((new Date).getTime()+6E5);$.cookie("trSessionId","0.2357",{expires:c,path:"/"});$.ajax("/internal/js_errors",{data:{browser:navigator.userAgent,language:navigator.language,text:"Failed to load resource: net::ERR_BLOCKED_BY_CLIENT: https://mc.yandex.ru/metrika/advert.gif"},type:"POST"})}}}catch(a){}},
2400);
(function(b){function c(a){var c=this,d=a.target,e=b.data(d,"buttonName"),g=L[e],f=g.popupName,l=T[f];if(!c.disabled&&"disabled"!==b(d).attr("disabled")){var n={editor:c,button:d,buttonName:e,popup:l,popupName:f,command:g.command,useCSS:c.options.useCSS};if(g.buttonClick&&!1===g.buttonClick(a,n))return!1;if("source"===e)Q(c)?(delete c.range,c.$area.hide(),c.$frame.show(),d.title=g.title):(c.$frame.hide(),c.$area.show(),d.title="Show Rich Text");else if(!Q(c)){if(f){var r=b(l);if("url"===f){if("link"===e&&
""===u(c))return A(c,"A selection is required when inserting a link.",d),!1;r.children(":button").unbind("click").bind("click",function(){var a=r.find(":text"),d=b.trim(a.val());""!==d&&h(c,n.command,d,null,n.button);a.val("http://");x();p(c)})}else"pastetext"===f&&r.children(":button").unbind("click").bind("click",function(){var a=r.find("textarea"),b=a.val().replace(/\n/g,"<br />");""!==b&&h(c,n.command,b,null,n.button);a.val("");x();p(c)});if(d!==b.data(l,"button"))return N(c,l,d),!1;return}if("print"===
e)c.$frame[0].contentWindow.print();else if(!h(c,n.command,n.value,n.useCSS,d))return!1}p(c)}}function a(a){a=b(a.target).closest("div");a.css("backgroundColor",a.data("buttonName")?"#FFF":"#FFC")}function d(a){b(a.target).closest("div").css("backgroundColor","transparent")}function e(a){var c=a.data.popup,d=a.target;if(c!==T.msg&&!b(c).hasClass("cleditorPrompt")){var e=b.data(c,"button"),g=b.data(e,"buttonName"),u=L[g],f=u.command,l,A=this.options.useCSS;"font"===g?l=d.style.fontFamily.replace(/"/g,
""):"size"===g?("DIV"===d.tagName.toUpperCase()&&(d=d.children[0]),l=d.innerHTML):"style"===g?l="<"+d.tagName+">":"color"===g?l=v(d.style.backgroundColor):"highlight"===g&&(l=v(d.style.backgroundColor),C?f="backcolor":A=!0);c={editor:this,button:e,buttonName:g,popup:c,popupName:u.popupName,command:f,value:l,useCSS:A};if(!u.popupClick||!1!==u.popupClick(a,c)){if(c.command&&!h(this,c.command,c.value,c.useCSS,e))return!1;x();p(this)}}}function f(a){for(var b=1,c=0,d=0;d<a.length;++d)b=(b+a.charCodeAt(d))%
65521,c=(c+b)%65521;return c<<16|b}function l(c,e,g,h,u){if(T[c])return T[c];var f=b("<div>").hide().addClass("cleditorPopup").appendTo("body");h?f.html(h):"color"===c?(e=e.colors.split(" "),10>e.length&&f.width("auto"),b.each(e,function(a,c){b("<div>").appendTo(f).css("backgroundColor","#"+c)}),g="cleditorColor"):"font"===c?b.each(e.fonts.split(","),function(a,c){b("<div>").appendTo(f).css("fontFamily",c).html(c)}):"size"===c?b.each(e.sizes.split(","),function(a,c){b("<div>").appendTo(f).html('<font size="'+
c+'">'+c+"</font>")}):"style"===c?b.each(e.styles,function(a,c){b("<div>").appendTo(f).html(c[1]+c[0]+c[1].replace("<","</"))}):"url"===c?(f.html('<label>Enter URL:<br /><input type="text" value="http://" style="width:200px" /></label><br /><input type="button" value="Submit" />'),g="cleditorPrompt"):"pastetext"===c&&(f.html('<label>Paste your content here:<br /><textarea rows="3" style="width:200px"></textarea></label><br /><input type="button" value="Submit" />'),g="cleditorPrompt");g||h||(g="cleditorList");
f.addClass(g);C&&f.attr("unselectable","on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr("unselectable","on");(f.hasClass("cleditorList")||!0===u)&&f.children().hover(a,d);T[c]=f[0];return f[0]}function g(a,b){b?(a.$area.attr("disabled","disabled"),a.disabled=!0):(a.$area.removeAttr("disabled"),delete a.disabled);try{C?a.doc.body.contentEditable=!b:a.doc.designMode=b?"off":"on"}catch(c){}t(a)}function h(a,b,c,d,e){y(a);if(!C){if(void 0===d||null===d)d=a.options.useCSS;a.doc.execCommand("styleWithCSS",
0,d.toString())}d="inserthtml"===b.toLowerCase();if(C&&d)n(a).pasteHTML(c);else if(V&&d)b=r(a),e=b.getRangeAt(0),e.deleteContents(),e.insertNode(e.createContextualFragment(c)),b.removeAllRanges(),b.addRange(e);else{var g=!0,h;try{g=a.doc.execCommand(b,0,c||null)}catch(u){h=u.message,g=!1}g||(-1<"cutcopypaste".indexOf(b)?A(a,"For security reasons, your browser does not support the "+b+" command. Try using the keyboard shortcut or context menu instead.",e):A(a,h?h:"Error executing the "+b+" command.",
e))}t(a);Y(a,!0);return g}function p(a){setTimeout(function(){Q(a)?a.$area.focus():a.$frame[0].contentWindow.focus();t(a)},0)}function n(a){return C?r(a).createRange():r(a).getRangeAt(0)}function r(a){return C?a.doc.selection:a.$frame[0].contentWindow.getSelection()}function v(a){var b=/rgba?\((\d+), (\d+), (\d+)/.exec(a);if(b){for(a=(b[1]<<16|b[2]<<8|b[3]).toString(16);6>a.length;)a="0"+a;return"#"+a}b=a.split("");return 4===a.length?"#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]:a}function x(){b.each(T,function(a,
c){b(c).hide().unbind("click").removeData("button")})}function z(){return b("link[href*=cleditor]").attr("href").replace(/^(.*\/)[^\/]+$/,"$1")+"images/"}function B(a){var c=a.$main,d=a.options;a.$frame&&a.$frame.remove();var e=a.$frame=b('<iframe frameborder="0" src="javascript:true;" />').hide().appendTo(c),h=a.doc=e[0].contentWindow.document,u=b(h);h.open();h.write(d.docType+"<html>"+(""===d.docCSSFile?"":'<head><link rel="stylesheet" type="text/css" href="'+d.docCSSFile+'" /></head>')+'<body style="'+
d.bodyStyle+'"></body></html>');h.close();(C||V)&&u.click(function(){p(a)});W(a);C||V?(u.bind("beforedeactivate beforeactivate selectionchange keypress keyup",function(b){if("beforedeactivate"===b.type)a.inactive=!0;else if("beforeactivate"===b.type)!a.inactive&&a.range&&1<a.range.length&&a.range.shift(),delete a.inactive;else if(!a.inactive)for(a.range||(a.range=[]),a.range.unshift(n(a));2<a.range.length;)a.range.pop()}),e.focus(function(){y(a);b(a).triggerHandler("focused")}),e.blur(function(){b(a).triggerHandler("blurred")})):
b(e[0].contentWindow).focus(function(){b(a).triggerHandler("focused")}).blur(function(){b(a).triggerHandler("blurred")});u.click(x).keydown(function(b){C&&"Control"==r(a).type&&8==b.keyCode&&(r(a).clear(),b.preventDefault())}).bind("keyup mouseup",function(){t(a);Y(a,!0)});ca?a.$area.show():e.show();b(function(){var b=a.$toolbar,h=b.children("div:last"),u=c.width(),h=h.offset().top+h.outerHeight()-b.offset().top+1;b.height(h);h=(/%/.test(""+d.height)?c.height():parseInt(d.height,10))-h;e.width(u).height(h);
a.$area.width(u).height(ga?h-2:h);g(a,a.disabled);t(a)})}function t(a){ca||!ja||a.focused||(a.$frame[0].contentWindow.focus(),window.focus(),a.focused=!0);var c=a.doc;C&&(c=n(a));var d=Q(a);b.each(a.$toolbar.find(".cleditorButton"),function(e,g){e=b(g);var h=b.cleditor.buttons[b.data(g,"buttonName")],u=h.command,f=!0;if(a.disabled)f=!1;else if(h.getEnabled)f=h.getEnabled({editor:a,button:g,buttonName:h.name,popup:T[h.popupName],popupName:h.popupName,command:h.command,useCSS:a.options.useCSS}),void 0===
f&&(f=!0);else if((d||ca)&&"source"!==h.name||C&&("undo"===u||"redo"===u))f=!1;else if(u&&"print"!==u&&(C&&"hilitecolor"===u&&(u="backcolor"),!C&&!V||"inserthtml"!==u))try{f=c.queryCommandEnabled(u)}catch(l){f=!1}f?(e.removeClass("cleditorDisabled"),e.removeAttr("disabled")):(e.addClass("cleditorDisabled"),e.attr("disabled","disabled"))})}function y(a){a.range&&(C?a.range[0].select():V&&r(a).addRange(a.range[0]))}function u(a){y(a);return C?n(a).text:r(a).toString()}function A(a,b,c){var d=l("msg",
a.options,"cleditorMsg");d.innerHTML=b;N(a,d,c)}function N(a,c,d){var g,h,u=b(c);if(d){var f=b(d);g=f.offset();h=--g.left;g=g.top+f.height()}else f=a.$toolbar,g=f.offset(),h=Math.floor((f.width()-u.width())/2)+g.left,g=g.top+f.height()-2;x();u.css({left:h,top:g}).show();d&&(b.data(c,"button",d),u.bind("click",{popup:c},b.proxy(e,a)));setTimeout(function(){u.find(":text,textarea").eq(0).focus().select()},100)}function Q(a){return a.$area.is(":visible")}function W(a,c){var d=a.$area.val(),e=a.options,
g=e.updateFrame,h=b(a.doc.body);if(g){var u=f(d);if(c&&a.areaChecksum===u)return;a.areaChecksum=u}c=g?g(d):d;c=c.replace(/<(?=\/?script)/ig,"&lt;");e.updateTextArea&&(a.frameChecksum=f(c));c!==h.html()&&(h.html(c),b(a).triggerHandler("change"))}function Y(a,c){var d=b(a.doc.body).html(),e=a.options,g=e.updateTextArea,h=a.$area;if(g){var u=f(d);if(c&&a.frameChecksum===u)return;a.frameChecksum=u}c=g?g(d):d;e.updateFrame&&(a.areaChecksum=f(c));c!==h.val()&&(h.val(c),b(a).triggerHandler("change"))}b.cleditor=
{defaultOptions:{width:"auto",height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",
fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!0,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},
imagesPath:function(){return z()}};b.fn.cleditor=function(a){var c=b([]);this.each(function(d,e){"TEXTAREA"===e.tagName.toUpperCase()&&((d=b.data(e,G))||(d=new cleditor(e,a)),c=c.add(d))});return c};var G="cleditor",O=navigator.userAgent.toLowerCase(),C=/msie/.test(O),ga=/msie\s6/.test(O),V=/(trident)(?:.*rv:([\w.]+))?/.test(O),ja=/webkit/.test(O),ca=/iPhone|iPad|iPod/i.test(O),T={},da,L=b.cleditor.buttons;b.each(L.init.split("|"),function(a,b){b=b.split(",");var c=b[0];L[c]={stripIndex:a,name:c,
title:""===b[1]?c.charAt(0).toUpperCase()+c.substr(1):b[1],command:""===b[2]?c:b[2],popupName:""===b[3]?c:b[3]}});delete L.init;cleditor=function(e,g){var h=this;h.options=g=b.extend({},b.cleditor.defaultOptions,g);e=h.$area=b(e).css({border:"none",margin:0,padding:0}).hide().data(G,h).blur(function(){W(h,!0)});var u=h.$main=b("<div>").addClass("cleditorMain").width(g.width).height(g.height),f=h.$toolbar=b("<div>").addClass("cleditorToolbar").appendTo(u),A=b("<div>").addClass("cleditorGroup").appendTo(f),
p=0;b.each(g.controls.split(" "),function(e,u){if(""===u)return!0;if("|"===u)b("<div>").addClass("cleditorDivider").appendTo(A),A.width(p+1),p=0,A=b("<div>").addClass("cleditorGroup").appendTo(f);else{e=L[u];u=b("<div>").data("buttonName",e.name).addClass("cleditorButton").attr("title",e.title).bind("click",b.proxy(c,h)).appendTo(A).hover(a,d);p+=24;A.width(p+1);var n={};if(e.css)n=e.css;else if(e.image){var N=n,r;r=e.image;r="url("+z()+r+")";N.backgroundImage=r}e.stripIndex&&(n.backgroundPosition=
-24*e.stripIndex);u.css(n);C&&u.attr("unselectable","on");e.popupName&&l(e.popupName,g,e.popupClass,e.popupContent,e.popupHover)}});u.insertBefore(e).append(e);da||(b(document).click(function(a){a=b(a.target);a.add(a.parents()).is(".cleditorPrompt")||x()}),da=!0);/auto|%/.test(""+g.width+g.height)&&b(window).bind("resize.cleditor",function(){B(h)});B(h)};var U=cleditor.prototype;b.each([["clear",function(a){a.$area.val("");W(a)}],["disable",g],["execCommand",h],["focus",p],["hidePopups",x],["sourceMode",
Q,!0],["refresh",B],["select",function(a){setTimeout(function(){Q(a)?a.$area.select():h(a,"selectall")},0)}],["selectedHTML",function(a){y(a);a=n(a);if(C)return a.htmlText;var c=b("<layer>")[0];c.appendChild(a.cloneContents());return c.innerHTML},!0],["selectedText",u,!0],["showMessage",A],["updateFrame",W],["updateTextArea",Y]],function(a,b){U[b[0]]=function(){for(var a=[this],c=0;c<arguments.length;c++)a.push(arguments[c]);a=b[1].apply(this,a);return b[2]?a:this}});U.blurred=function(a){var c=b(this);
return a?c.bind("blurred",a):c.trigger("blurred")};U.change=function(a){var c=b(this);return a?c.bind("change",a):c.trigger("change")};U.focused=function(a){var c=b(this);return a?c.bind("focused",a):c.trigger("focused")}})(jQuery);
(function(b){function c(a){a.hidePopups();a.focus()}b.cleditor.buttons.image={name:"image",title:"Insert/Upload Image",command:"insertimage",popupName:"image",popupClass:"cleditorPrompt",stripIndex:b.cleditor.buttons.image.stripIndex,popupContent:'<iframe style="width:0;height:0;border:0;" name="__upload_iframe" /><table cellpadding="0" cellspacing="0"><tr><td>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043d\u0430 \u0434\u0438\u0441\u043a\u0435:</td></tr><tr><td> <form method="post" enctype="multipart/form-data" action="" target="__upload_iframe"><input id="imageName" name="imageName" type="file" /></form> </td></tr><tr><td>\u0418\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL:</td></tr><tr><td><input type="text" size="40" value="" /></td></tr></table><input type="button" value="Submit">',buttonClick:function(a,
d){var e=d.editor;a=b(d.popup).find(":text");var f=b.trim(a.val()),l=b(d.popup).find("iframe"),g=b(d.popup).find(":file");g.val("");a.val("").focus();b(d.popup).children(":button").unbind("click").bind("click",function(a){g.val()?(l.bind("load",function(){var a;try{a=l.get(0).contentWindow.document.getElementById("image").innerHTML}catch(b){}a?e.execCommand(d.command,a,null,d.button):alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f!");
l.unbind("load");c(e)}),b(d.popup).find("form").attr("action",b.cleditor.buttons.image.uploadUrl).submit()):""!=f&&(e.execCommand(d.command,f,null,d.button),c(e))})},uploadUrl:"/uploadImage"}})(jQuery);
(function(b,c,a){function d(a,d,e){a=c.createElement(a);d&&(a.id="cbox"+d);e&&(a.style.cssText=e);return b(a)}function e(){return a.innerHeight?a.innerHeight:b(a).height()}function f(a){var b=G.length;a=(P+a)%b;return 0>a?b+a:a}function l(a,b){return Math.round((/%/.test(a)?("x"===b?O.width():e())/100:1)*parseInt(a,10))}function g(b,c){return b.retinaUrl&&1<a.devicePixelRatio?c.replace(b.photoRegex,b.retinaSuffix):c}function h(a){"contains"in y[0]&&!y[0].contains(a.target)&&(a.stopPropagation(),y.focus())}
function p(){var a,c=b.data(R,"colorbox");null==c?(q=b.extend({},B),console&&console.log&&console.log("Error: cboxElement missing settings object")):q=b.extend({},c);for(a in q)b.isFunction(q[a])&&"on"!==a.slice(0,2)&&(q[a]=q[a].call(R));q.rel=q.rel||R.rel||b(R).data("rel")||"nofollow";q.href=q.href||b(R).attr("href");q.title=q.title||R.title;"string"===typeof q.href&&(q.href=b.trim(q.href))}function n(a,d){b(c).trigger(a);X.trigger(a);b.isFunction(d)&&d.call(R)}function r(a){if(!la){R=a;p();G=b(R);
P=0;"nofollow"!==q.rel&&(G=b(".cboxElement").filter(function(){var a=b.data(this,"colorbox"),c;a&&(c=b(this).data("rel")||a.rel||this.rel);return c===q.rel}),P=G.index(R),-1===P&&(G=G.add(R),P=G.length-1));t.css({opacity:parseFloat(q.opacity),cursor:q.overlayClose?"pointer":"auto",visibility:"visible"}).show();qa&&y.add(t).removeClass(qa);q.className&&y.add(t).addClass(q.className);qa=q.className;q.closeButton?U.html(q.close).appendTo(A):U.appendTo("<div/>");if(!ba&&(ba=ka=!0,y.css({visibility:"hidden",
display:"block"}),C=d("div","LoadedContent","width:0; height:0; overflow:hidden"),A.css({width:"",height:""}).append(C),Z=N.height()+Y.height()+A.outerHeight(!0)-A.height(),aa=Q.width()+W.width()+A.outerWidth(!0)-A.width(),J=C.outerHeight(!0),fa=C.outerWidth(!0),q.w=l(q.initialWidth,"x"),q.h=l(q.initialHeight,"y"),C.css({width:"",height:q.h}),H.position(),n("cbox_open",q.onOpen),na.add(ja).hide(),y.focus(),q.trapFocus&&c.addEventListener&&(c.addEventListener("focus",h,!0),X.one("cbox_closed",function(){c.removeEventListener("focus",
h,!0)})),q.returnFocus))X.one("cbox_closed",function(){b(R).focus()});z()}}function v(){!y&&c.body&&(ra=!1,O=b(a),y=d("div").attr({id:"colorbox","class":!1===b.support.opacity?"cboxIE":"",role:"dialog",tabindex:"-1"}).hide(),t=d("div","Overlay").hide(),V=b([d("div","LoadingOverlay")[0],d("div","LoadingGraphic")[0]]),u=d("div","Wrapper"),A=d("div","Content").append(ja=d("div","Title"),ca=d("div","Current"),L=b('<button type="button"/>').attr({id:"cboxPrevious"}),da=b('<button type="button"/>').attr({id:"cboxNext"}),
T=d("button","Slideshow"),V),U=b('<button type="button"/>').attr({id:"cboxClose"}),u.append(d("div").append(d("div","TopLeft"),N=d("div","TopCenter"),d("div","TopRight")),d("div",!1,"clear:left").append(Q=d("div","MiddleLeft"),A,W=d("div","MiddleRight")),d("div",!1,"clear:left").append(d("div","BottomLeft"),Y=d("div","BottomCenter"),d("div","BottomRight"))).find("div div").css({"float":"left"}),ga=d("div",!1,"position:absolute; width:9999px; visibility:hidden; display:none"),na=da.add(L).add(ca).add(T),
b(c.body).append(t,y.append(u,ga)))}function x(){function a(b){1<b.which||b.shiftKey||b.altKey||b.metaKey||b.ctrlKey||(b.preventDefault(),r(this))}if(y){if(!ra)if(ra=!0,da.click(function(){H.next()}),L.click(function(){H.prev()}),U.click(function(){H.close()}),t.click(function(){q.overlayClose&&H.close()}),b(c).bind("keydown.cbox",function(a){var b=a.keyCode;ba&&q.escKey&&27===b&&(a.preventDefault(),H.close());ba&&q.arrowKey&&G[1]&&!a.altKey&&(37===b?(a.preventDefault(),L.click()):39===b&&(a.preventDefault(),
da.click()))}),b.isFunction(b.fn.on))b(c).on("click.cbox",".cboxElement",a);else b(".cboxElement").live("click.cbox",a);return!0}return!1}function z(){var e,h,u=H.prep,f,A=++sa;ka=!0;E=!1;R=G[P];p();n("cbox_purge");n("cbox_load",q.onLoad);q.h=q.height?l(q.height,"y")-J-Z:q.innerHeight&&l(q.innerHeight,"y");q.w=q.width?l(q.width,"x")-fa-aa:q.innerWidth&&l(q.innerWidth,"x");q.mw=q.w;q.mh=q.h;q.maxWidth&&(q.mw=l(q.maxWidth,"x")-fa-aa,q.mw=q.w&&q.w<q.mw?q.w:q.mw);q.maxHeight&&(q.mh=l(q.maxHeight,"y")-
J-Z,q.mh=q.h&&q.h<q.mh?q.h:q.mh);e=q.href;va=setTimeout(function(){V.show()},100);q.inline?(f=d("div").hide().insertBefore(b(e)[0]),X.one("cbox_purge",function(){f.replaceWith(C.children())}),u(b(e))):q.iframe?u(" "):q.html?u(q.html):q.photo||q.photoRegex.test(e)?(e=g(q,e),E=c.createElement("img"),b(E).addClass("cboxPhoto").bind("error",function(){q.title=!1;u(d("div","Error").html(q.imgError))}).one("load",function(){var c;A===sa&&(E.alt=b(R).attr("alt")||b(R).attr("data-alt")||"",q.retinaImage&&
1<a.devicePixelRatio&&(E.height/=a.devicePixelRatio,E.width/=a.devicePixelRatio),q.scalePhotos&&(h=function(){E.height-=E.height*c;E.width-=E.width*c},q.mw&&E.width>q.mw&&(c=(E.width-q.mw)/E.width,h()),q.mh&&E.height>q.mh&&(c=(E.height-q.mh)/E.height,h())),q.h&&(E.style.marginTop=Math.max(q.mh-E.height,0)/2+"px"),G[1]&&(q.loop||G[P+1])&&(E.style.cursor="pointer",E.onclick=function(){H.next()}),E.style.width=E.width+"px",E.style.height=E.height+"px",setTimeout(function(){u(E)},1))}),setTimeout(function(){E.src=
e},1)):e&&ga.load(e,q.data,function(a,c){A===sa&&u("error"===c?d("div","Error").html(q.xhrError):b(this).contents())})}var B={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",
previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,trapFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,
closeButton:!0},t,y,u,A,N,Q,W,Y,G,O,C,ga,V,ja,ca,T,da,L,U,na,X=b("<a/>"),q,Z,aa,J,fa,R,P,E,ba,ka,la,va,H,qa,sa=0,wa={},ra,Ca=function(){function a(){clearTimeout(h)}function b(){if(q.loop||G[P+1])a(),h=setTimeout(H.next,q.slideshowSpeed)}function c(){T.html(q.slideshowStop).unbind("click.cbox").one("click.cbox",d);X.bind("cbox_complete",b).bind("cbox_load",a);y.removeClass("cboxSlideshow_off").addClass("cboxSlideshow_on")}function d(){a();X.unbind("cbox_complete",b).unbind("cbox_load",a);T.html(q.slideshowStart).unbind("click.cbox").one("click.cbox",
function(){H.next();c()});y.removeClass("cboxSlideshow_on").addClass("cboxSlideshow_off")}function e(){g=!1;T.hide();a();X.unbind("cbox_complete",b).unbind("cbox_load",a);y.removeClass("cboxSlideshow_off cboxSlideshow_on")}var g,h;return function(){g?q.slideshow||(X.unbind("cbox_cleanup",e),e()):q.slideshow&&G[1]&&(g=!0,X.one("cbox_cleanup",e),q.slideshowAuto?c():d(),T.show())}}();b.colorbox||(b(v),H=b.fn.colorbox=b.colorbox=function(a,c){var d=this;a=a||{};v();if(x()){if(b.isFunction(d))d=b("<a/>"),
a.open=!0;else if(!d[0])return d;c&&(a.onComplete=c);d.each(function(){b.data(this,"colorbox",b.extend({},b.data(this,"colorbox")||B,a))}).addClass("cboxElement");(b.isFunction(a.open)&&a.open.call(d)||a.open)&&r(d[0])}return d},H.position=function(a,c){function d(){N[0].style.width=Y[0].style.width=A[0].style.width=parseInt(y[0].style.width,10)-aa+"px";A[0].style.height=Q[0].style.height=W[0].style.height=parseInt(y[0].style.height,10)-Z+"px"}var g,h=0,f=0,p=y.offset(),n,r;O.unbind("resize.cbox");
y.css({top:-9E4,left:-9E4});n=O.scrollTop();r=O.scrollLeft();q.fixed?(p.top-=n,p.left-=r,y.css({position:"fixed"})):(h=n,f=r,y.css({position:"absolute"}));f=!1!==q.right?f+Math.max(O.width()-q.w-fa-aa-l(q.right,"x"),0):!1!==q.left?f+l(q.left,"x"):f+Math.round(Math.max(O.width()-q.w-fa-aa,0)/2);h=!1!==q.bottom?h+Math.max(e()-q.h-J-Z-l(q.bottom,"y"),0):!1!==q.top?h+l(q.top,"y"):h+Math.round(Math.max(e()-q.h-J-Z,0)/2);y.css({top:p.top,left:p.left,visibility:"visible"});u[0].style.width=u[0].style.height=
"9999px";g={width:q.w+fa+aa,height:q.h+J+Z,top:h,left:f};if(a){var v=0;b.each(g,function(b){g[b]!==wa[b]&&(v=a)});a=v}wa=g;a||y.css(g);y.dequeue().animate(g,{duration:a||0,complete:function(){d();ka=!1;u[0].style.width=q.w+fa+aa+"px";u[0].style.height=q.h+J+Z+"px";q.reposition&&setTimeout(function(){O.bind("resize.cbox",H.position)},1);c&&c()},step:d})},H.resize=function(a){var b;ba&&(a=a||{},a.width&&(q.w=l(a.width,"x")-fa-aa),a.innerWidth&&(q.w=l(a.innerWidth,"x")),C.css({width:q.w}),a.height&&
(q.h=l(a.height,"y")-J-Z),a.innerHeight&&(q.h=l(a.innerHeight,"y")),a.innerHeight||a.height||(b=C.scrollTop(),C.css({height:"auto"}),q.h=C.height()),C.css({height:q.h}),b&&C.scrollTop(b),H.position("none"===q.transition?0:q.speed))},H.prep=function(a){function e(){q.w=q.w||C.width();q.w=q.mw&&q.mw<q.w?q.mw:q.w;return q.w}function h(){q.h=q.h||C.height();q.h=q.mh&&q.mh<q.h?q.mh:q.h;return q.h}if(ba){var u,l="none"===q.transition?0:q.speed;C.empty().remove();C=d("div","LoadedContent").append(a);C.hide().appendTo(ga.show()).css({width:e(),
overflow:q.scrolling?"auto":"hidden"}).css({height:h()}).prependTo(A);ga.hide();b(E).css({"float":"none"});u=function(){function a(){!1===b.support.opacity&&y[0].style.removeAttribute("filter")}var e=G.length,h,u;ba&&(u=function(){clearTimeout(va);V.hide();n("cbox_complete",q.onComplete)},ja.html(q.title).add(C).show(),1<e?("string"===typeof q.current&&ca.html(q.current.replace("{current}",P+1).replace("{total}",e)).show(),da[q.loop||P<e-1?"show":"hide"]().html(q.next),L[q.loop||P?"show":"hide"]().html(q.previous),
Ca(),q.preloading&&b.each([f(-1),f(1)],function(){var a,d;d=G[this];var e=b.data(d,"colorbox");e&&e.href?(a=e.href,b.isFunction(a)&&(a=a.call(d))):a=b(d).attr("href");a&&(e.photo||e.photoRegex.test(a))&&(a=g(e,a),d=c.createElement("img"),d.src=a)})):na.hide(),q.iframe?(h=d("iframe")[0],"frameBorder"in h&&(h.frameBorder=0),"allowTransparency"in h&&(h.allowTransparency="true"),q.scrolling||(h.scrolling="no"),b(h).attr({src:q.href,name:(new Date).getTime(),"class":"cboxIframe",allowFullScreen:!0,webkitAllowFullScreen:!0,
mozallowfullscreen:!0}).one("load",u).appendTo(C),X.one("cbox_purge",function(){h.src="//about:blank"}),q.fastIframe&&b(h).trigger("load")):u(),"fade"===q.transition?y.fadeTo(l,1,a):a())};"fade"===q.transition?y.fadeTo(l,0,function(){H.position(0,u)}):H.position(l,u)}},H.next=function(){!ka&&G[1]&&(q.loop||G[P+1])&&(P=f(1),r(G[P]))},H.prev=function(){!ka&&G[1]&&(q.loop||P)&&(P=f(-1),r(G[P]))},H.close=function(){ba&&!la&&(la=!0,ba=!1,n("cbox_cleanup",q.onCleanup),O.unbind(".cbox"),t.fadeTo(q.fadeOut||
0,0),y.stop().fadeTo(q.fadeOut||0,0,function(){y.add(t).css({opacity:1,cursor:"auto"}).hide();n("cbox_purge");C.empty().remove();setTimeout(function(){la=!1;n("cbox_closed",q.onClosed)},1)}))},H.remove=function(){y&&(y.stop(),b.colorbox.close(),y.stop().remove(),t.remove(),la=!1,y=null,b(".cboxElement").removeData("colorbox").removeClass("cboxElement"),b(c).unbind("click.cbox"))},H.element=function(){return b(R)},H.settings=B)})(jQuery,document,window);
$(function(){$(".expandable").each(function(){try{var b=$(this),c=1*b.attr("data-height");if(c&&c<b.height()-200){var a=$('<div class="background"><div class="open-border"> </div><div class="open"><span class="js-link">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c</span></div></div>').click(function(){b.css("height","").removeClass("expanded")});b.append(a).css("height",c+"px").addClass("expanded")}}catch(d){}})});
$(function(){$("body").append('<a class="scroll-top hide" href="#"><i class="fa fa-lg fa-arrow-circle-o-up"></i> \u0412\u0432\u0435\u0440\u0445</a>');$(window).scroll(function(){var b=$(window).scrollTop();$(".scroll-top").toggle(800<b).css({opacity:b/2500})});$("a.scroll-top").click(function(){$(".scroll-top").hide();$("html, body").animate({scrollTop:0},500);return!1})});
function initUploadInputs(b){b=b||"";$(document).on("change",b+" .btn-file :file",function(){var b=$(this),a=b.get(0).files?b.get(0).files.length:1,d=b.val().replace(/\\/g,"/").replace(/.*\//,"");b.trigger("fileselect",[a,d])});$(b+" .btn-file :text").on("click",function(b){$(this).parents(".btn-file").find("input[type=file]").click()});$(b+" .btn-file :file").on("fileselect",function(b,a,d){b=$(this);var e=b.parents(".btn-file").find(":text");a=1<a?a+" files selected":d;e.length?(e.val(a),b.hasClass("auto-start")&&
(b.parents("form").submit(),e.val("\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f "+a))):a&&alert(a)})}$(function(){initUploadInputs()});
(function(b){var c={init:function(a){return this.each(function(){this.self=b(this);c.destroy.call(this.self);this.opt=b.extend(!0,{},b.fn.raty.defaults,a);c._adjustCallback.call(this);c._adjustNumber.call(this);c._adjustHints.call(this);this.opt.score=c._adjustedScore.call(this,this.opt.score);"img"!==this.opt.starType&&c._adjustStarType.call(this);c._adjustPath.call(this);c._createStars.call(this);this.opt.cancel&&c._createCancel.call(this);this.opt.precision&&c._adjustPrecision.call(this);c._createScore.call(this);
c._apply.call(this,this.opt.score);c._setTitle.call(this,this.opt.score);c._target.call(this,this.opt.score);this.opt.readOnly?c._lock.call(this):(this.style.cursor="pointer",c._binds.call(this))})},_adjustCallback:function(){for(var a="number readOnly score scoreName target path".split(" "),b=0;b<a.length;b++)"function"===typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_adjustedScore:function(a){return a?c._between(a,0,this.opt.number):a},_adjustHints:function(){this.opt.hints||
(this.opt.hints=[]);if(this.opt.halfShow||this.opt.half)for(var a=this.opt.precision?10:2,b=0;b<this.opt.number;b++){var c=this.opt.hints[b];"[object Array]"!==Object.prototype.toString.call(c)&&(c=[c]);this.opt.hints[b]=[];for(var f=0;f<a;f++){var l=c[f],g=c[c.length-1];void 0===g&&(g=null);this.opt.hints[b][f]=void 0===l?g:l}}},_adjustNumber:function(){this.opt.number=c._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-
1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var a=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var b=0;b<a.length;b++)this.opt[a[b]]=this.opt[a[b]].replace(".","-")},_apply:function(a){c._fill.call(this,a);a&&(0<a&&this.score.val(a),c._roundStars.call(this,a))},_between:function(a,b,c){return Math.min(Math.max(parseFloat(a),b),c)},_binds:function(){this.cancel&&(c._bindOverCancel.call(this),c._bindClickCancel.call(this),
c._bindOutCancel.call(this));c._bindOver.call(this);c._bindClick.call(this);c._bindOut.call(this)},_bindClick:function(){var a=this;a.stars.on("click.raty",function(d){var e=!0,f=a.opt.half||a.opt.precision?a.self.data("score"):this.alt||b(this).data("alt");a.opt.click&&(e=a.opt.click.call(a,+f,d));if(e||void 0===e)a.opt.half&&!a.opt.precision&&(f=c._roundHalfScore.call(a,f)),c._apply.call(a,f)})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value");
a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var a=this;a.self.on("mouseleave.raty",function(b){var e=+a.score.val()||void 0;c._apply.call(a,e);c._target.call(a,e,b);c._resetTitle.call(a);a.opt.mouseout&&a.opt.mouseout.call(a,e,b)})},_bindOutCancel:function(){var a=this;a.cancel.on("mouseleave.raty",function(b){var e=a.opt.cancelOff;"img"!==a.opt.starType&&(e=a.opt.cancelClass+" "+e);c._setIcon.call(a,this,e);a.opt.mouseout&&(e=+a.score.val()||void 0,a.opt.mouseout.call(a,e,b))})},
_bindOver:function(){var a=this;a.stars.on(a.opt.half?"mousemove.raty":"mouseover.raty",function(b){var e=c._getScoreByPosition.call(a,b,this);c._fill.call(a,e);a.opt.half&&(c._roundStars.call(a,e,b),c._setTitle.call(a,e,b),a.self.data("score",e));c._target.call(a,e,b);a.opt.mouseover&&a.opt.mouseover.call(a,e,b)})},_bindOverCancel:function(){var a=this;a.cancel.on("mouseover.raty",function(b){var e=a.opt.path+a.opt.starOff,f=a.opt.cancelOn;"img"===a.opt.starType?a.stars.attr("src",e):(f=a.opt.cancelClass+
" "+f,a.stars.attr("class",e));c._setIcon.call(a,this,f);c._target.call(a,null,b);a.opt.mouseover&&a.opt.mouseover.call(a,null)})},_buildScoreField:function(){return b("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var a=this.opt.path+this.opt.cancelOff,c=b("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?c.attr({src:a,alt:"x"}):c.attr("data-alt","x").addClass(a);"left"===this.opt.cancelPlace?
this.self.prepend("&#160;").prepend(c):this.self.append("&#160;").append(c);this.cancel=c},_createScore:function(){var a=b(this.opt.targetScore);this.score=a.length?a:c._buildScoreField.call(this)},_createStars:function(){for(var a=1;a<=this.opt.number;a++){var d=c._nameForIndex.call(this,a),d={alt:a,src:this.opt.path+this.opt[d]};"img"!==this.opt.starType&&(d={"data-alt":a,"class":d.src});d.title=c._getHint.call(this,a);b("<"+this.opt.starType+" />",d).appendTo(this);this.opt.space&&this.self.append(a<
this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(a){b(this).text(a);b.error(a)},_fill:function(a){for(var b=0,e=1;e<=this.stars.length;e++){var f,l=this.stars[e-1];f=c._turnOn.call(this,e,a);if(this.opt.iconRange&&this.opt.iconRange.length>b){var g=this.opt.iconRange[b];f=c._getRangeIcon.call(this,g,f);e<=g.range&&c._setIcon.call(this,l,f);e===g.range&&b++}else f=this.opt[f?"starOn":"starOff"],c._setIcon.call(this,l,f)}},_getFirstDecimal:function(a){a=
a.toString().split(".")[1];var b=0;a&&(b=parseInt(a.charAt(0),10),"9999"===a.slice(1,5)&&b++);return b},_getRangeIcon:function(a,b){return b?a.on||this.opt.starOn:a.off||this.opt.starOff},_getScoreByPosition:function(a,d){var e=parseInt(d.alt||d.getAttribute("data-alt"),10);if(this.opt.half){var f=c._getWidth.call(this);a=parseFloat((a.pageX-b(d).offset().left)/f);e=e-1+a}return e},_getHint:function(a,b){if(0!==a&&!a)return this.opt.noRatedMsg;var e=c._getFirstDecimal.call(this,a),f=this.opt.hints[(Math.ceil(a)||
1)-1],l=f;b=!b||this.move;if(this.opt.precision)b&&(e=0===e?9:e-1),l=f[e];else if(this.opt.halfShow||this.opt.half)l=f[b&&0===e?1:5<e?1:0];return""===l?"":l||a},_getWidth:function(){var a=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));a||c._error.call(this,"Could not get the icon width!");return a},_lock:function(){var a=c._getHint.call(this,this.score.val());this.style.cursor="";this.title=a;this.score.prop("readonly",!0);this.stars.prop("title",a);this.cancel&&this.cancel.hide();
this.self.data("readonly",!0)},_nameForIndex:function(a){return this.opt.score&&this.opt.score>=a?"starOn":"starOff"},_resetTitle:function(a){for(a=0;a<this.opt.number;a++)this.stars[a].title=c._getHint.call(this,a+1)},_roundHalfScore:function(a){var b=parseInt(a,10);a=c._getFirstDecimal.call(this,a);0!==a&&(a=5<a?1:.5);return b+a},_roundStars:function(a,b){var e=(a%1).toFixed(2),f;b||this.move?f=.5<e?"starOn":"starHalf":e>this.opt.round.down&&(f="starOn",this.opt.halfShow&&e<this.opt.round.up?f=
"starHalf":e<this.opt.round.full&&(f="starOff"));f&&c._setIcon.call(this,this.stars[Math.ceil(a)-1],this.opt[f])},_setIcon:function(a,b){a["img"===this.opt.starType?"src":"className"]=this.opt.path+b},_setTarget:function(a,b){b&&(b=this.opt.targetFormat.toString().replace("{score}",b));a.is(":input")?a.val(b):a.html(b)},_setTitle:function(a,b){if(a){var e=parseInt(Math.ceil(a),10);this.stars[e-1].title=c._getHint.call(this,a,b)}},_target:function(a,d){if(this.opt.target){var e=b(this.opt.target);
e.length||c._error.call(this,"Target selector invalid or missing!");var f=d&&"mouseover"===d.type;void 0===a?a=this.opt.targetText:null===a?a=f?this.opt.cancelHint:this.opt.targetText:("hint"===this.opt.targetType?a=c._getHint.call(this,a,d):this.opt.precision&&(a=parseFloat(a).toFixed(1)),d=d&&"mousemove"===d.type,f||d||this.opt.targetKeep||(a=this.opt.targetText));c._setTarget.call(this,e,a)}},_turnOn:function(a,b){return this.opt.single?a===b:a<=b},_unlock:function(){this.style.cursor="pointer";
this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",!1);for(var a=0;a<this.opt.number;a++)this.stars[a].title=c._getHint.call(this,a+1);this.cancel&&this.cancel.css("display","")},cancel:function(a){return this.each(function(){var d=b(this);!0!==d.data("readonly")&&(c[a?"click":"score"].call(d,null),this.score.removeAttr("value"))})},click:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=c._adjustedScore.call(this,a),c._apply.call(this,
a),this.opt.click&&this.opt.click.call(this,a,b.Event("click")),c._target.call(this,a))})},destroy:function(){return this.each(function(){var a=b(this),c=a.data("raw");c?a.off(".raty").empty().css({cursor:c.style.cursor}).removeData("readonly"):a.data("raw",a.clone()[0])})},getScore:function(){var a=[],b;this.each(function(){b=this.score.val();a.push(b?+b:void 0)});return 1<a.length?a:a[0]},move:function(a){return this.each(function(){var d=parseInt(a,10),e=c._getFirstDecimal.call(this,a);d>=this.opt.number&&
(d=this.opt.number-1,e=10);var f=c._getWidth.call(this)/10,d=b(this.stars[d]),e=d.offset().left+f*e,e=b.Event("mousemove",{pageX:e});this.move=!0;d.trigger(e);this.move=!1})},readOnly:function(a){return this.each(function(){var d=b(this);d.data("readonly")!==a&&(a?(d.off(".raty").children(this.opt.starType).off(".raty"),c._lock.call(this)):(c._binds.call(this),c._unlock.call(this)),d.data("readonly",a))})},reload:function(){return c.set.call(this,{})},score:function(){var a=b(this);return arguments.length?
c.setScore.apply(a,arguments):c.getScore.call(a)},set:function(a){return this.each(function(){b(this).raty(b.extend({},this.opt,a))})},setScore:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=c._adjustedScore.call(this,a),c._apply.call(this,a),c._target.call(this,a))})}};b.fn.raty=function(a){if(c[a])return c[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist!");else return c.init.apply(this,arguments)};b.fn.raty.defaults=
{cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",
starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}})(jQuery);
function addCowsRaty(b){$(b).raty({half:function(){return $(this).attr("data-half")||!1},halfShow:!0,score:function(){var b=$(this).attr("data-score")||0;log("score",b);return b},readOnly:function(){return"true"==$(this).attr("data-readOnly")},hints:["\u043e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e","\u043f\u043b\u043e\u0445\u043e","\u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e","\u0445\u043e\u0440\u043e\u0448\u043e","\u043e\u0442\u043b\u0438\u0447\u043d\u043e"],starType:"i",
click:function(b,a){a=$(this).attr("data-id");var d=$(this).attr("data-type"),e=$(this).attr("data-subject-id"),f=$(this).attr("data-rate-url"),l="#user_rate_"+a;$.ajax({url:f,data:{id:a,rating:b,type:d,subjectId:e},method:"POST",success:function(a){$(l).empty().append(a)},error:function(a,b){403==a.status?showNoty({text:"\u0414\u043b\u044f \u043e\u0446\u0435\u043d\u043a\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0435\u043d\u043d\u044b\u043c",
type:"error"}):(showNoty({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0447\u0442\u043e-\u0442\u043e \u0443\u0436\u0430\u0441\u043d\u043e\u0435",type:"error"}),log(a.responseText,a.status))}})}})}
(function(b,c){"function"===typeof define&&define.amd?define("sifter",c):"object"===typeof exports?module.exports=c():b.Sifter=c()})(this,function(){var b=function(a,b){this.items=a;this.settings=b||{diacritics:!0}};b.prototype.tokenize=function(a){a=(String(a||"").toLowerCase()+"").replace(/^\s+|\s+$|/g,"");if(!a||!a.length)return[];var b,c,d,f=[],r=a.split(/ +/);a=0;for(b=r.length;a<b;a++){c=(r[a]+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(this.settings.diacritics)for(d in e)e.hasOwnProperty(d)&&
(c=c.replace(new RegExp(d,"g"),e[d]));f.push({string:r[a],regex:new RegExp(c,"i")})}return f};b.prototype.iterator=function(a,b){(d(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;b<c;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)}).apply(a,[b])};b.prototype.getScoreFunction=function(a,b){var c,d,e;a=this.prepareSearch(a,b);d=a.tokens;c=a.options.fields;e=d.length;var f=function(a,b){var c;if(!a)return 0;a=String(a||"");c=a.search(b.regex);
if(-1===c)return 0;a=b.string.length/a.length;0===c&&(a+=.5);return a},v=function(){var a=c.length;return a?1===a?function(a,b){return f(b[c[0]],a)}:function(b,d){for(var e=0,g=0;e<a;e++)g+=f(d[c[e]],b);return g/a}:function(){return 0}}();return e?1===e?function(a){return v(d[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,g=0;c<e;c++){b=v(d[c],a);if(0>=b)return 0;g+=b}return g/e}:function(a){for(var b=0,c=0;b<e;b++)c+=v(d[b],a);return c/e}:function(){return 0}};b.prototype.getSortFunction=
function(a,b){var d,e,f,r,v,x,z,B,t;e=this;a=e.prepareSearch(a,b);t=!a.query&&b.sort_empty||b.sort;B=function(a,b){return"$score"===a?b.score:e.items[b.id][a]};r=[];if(t)for(b=0,d=t.length;b<d;b++)(a.query||"$score"!==t[b].field)&&r.push(t[b]);if(a.query){a=!0;b=0;for(d=r.length;b<d;b++)if("$score"===r[b].field){a=!1;break}a&&r.unshift({field:"$score",direction:"desc"})}else for(b=0,d=r.length;b<d;b++)if("$score"===r[b].field){r.splice(b,1);break}z=[];b=0;for(d=r.length;b<d;b++)z.push("desc"===r[b].direction?
-1:1);return(v=r.length)?1===v?(f=r[0].field,x=z[0],function(a,b){return x*c(B(f,a),B(f,b))}):function(a,b){var d,e;for(d=0;d<v;d++)if(e=r[d].field,e=z[d]*c(B(e,a),B(e,b)))return e;return 0}:null};b.prototype.prepareSearch=function(b,c){if("object"===typeof b)return b;c=a({},c);var e=c.fields,f=c.sort,n=c.sort_empty;e&&!d(e)&&(c.fields=[e]);f&&!d(f)&&(c.sort=[f]);n&&!d(n)&&(c.sort_empty=[n]);return{options:c,query:String(b||"").toLowerCase(),tokens:this.tokenize(b),total:0,items:[]}};b.prototype.search=
function(a,b){var c,d,e;d=this.prepareSearch(a,b);b=d.options;a=d.query;e=b.score||this.getScoreFunction(d);a.length?this.iterator(this.items,function(a,f){c=e(a);(!1===b.filter||0<c)&&d.items.push({score:c,id:f})}):this.iterator(this.items,function(a,b){d.items.push({score:1,id:b})});(a=this.getSortFunction(d,b))&&d.items.sort(a);d.total=d.items.length;"number"===typeof b.limit&&(d.items=d.items.slice(0,b.limit));return d};var c=function(a,b){if("number"===typeof a&&"number"===typeof b)return a>
b?1:a<b?-1:0;a=f(String(a||""));b=f(String(b||""));return a>b?1:b>a?-1:0},a=function(a,b){var c,d,e,f;c=1;for(d=arguments.length;c<d;c++)if(f=arguments[c])for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);return a},d=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},e={a:"[a\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u0100\u0101\u0105\u0104]",c:"[c\u00c7\u00e7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\u00c8\u00c9\u00ca\u00cb\u00e8\u00e9\u00ea\u00eb\u011b\u011a\u0112\u0113\u0119\u0118]",
i:"[i\u00cc\u00cd\u00ce\u00cf\u00ec\u00ed\u00ee\u00ef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\u00d1\u00f1\u0148\u0147\u0144\u0143]",o:"[o\u00d2\u00d3\u00d4\u00d5\u00d5\u00d6\u00d8\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\u00d9\u00da\u00db\u00dc\u00f9\u00fa\u00fb\u00fc\u016f\u016e\u016a\u016b]",y:"[y\u0178\u00ff\u00fd\u00dd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},f=function(){var a,b,c,d,f="",r={};for(c in e)if(e.hasOwnProperty(c))for(d=
e[c].substring(2,e[c].length-1),f+=d,a=0,b=d.length;a<b;a++)r[d.charAt(a)]=c;var v=new RegExp("["+f+"]","g");return function(a){return a.replace(v,function(a){return r[a]}).toLowerCase()}}();return b});
(function(b,c){"function"===typeof define&&define.amd?define("microplugin",c):"object"===typeof exports?module.exports=c():b.MicroPlugin=c()})(this,function(){var b={isArray:Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}};return{mixin:function(c){c.plugins={};c.prototype.initializePlugins=function(a){var c,e,f=[];this.plugins={names:[],settings:{},requested:{},loaded:{}};if(b.isArray(a))for(c=0,e=a.length;c<e;c++)"string"===typeof a[c]?f.push(a[c]):(this.plugins.settings[a[c].name]=
a[c].options,f.push(a[c].name));else if(a)for(c in a)a.hasOwnProperty(c)&&(this.plugins.settings[c]=a[c],f.push(c));for(;f.length;)this.require(f.shift())};c.prototype.loadPlugin=function(a){var b=this.plugins,e=c.plugins[a];if(!c.plugins.hasOwnProperty(a))throw Error('Unable to find "'+a+'" plugin');b.requested[a]=!0;b.loaded[a]=e.fn.apply(this,[this.plugins.settings[a]||{}]);b.names.push(a)};c.prototype.require=function(a){var b=this.plugins;if(!this.plugins.loaded.hasOwnProperty(a)){if(b.requested[a])throw Error('Plugin has circular dependency ("'+
a+'")');this.loadPlugin(a)}return b.loaded[a]};c.define=function(a,b){c.plugins[a]={name:a,fn:b}}}}});
(function(b,c){"function"===typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],c):"object"===typeof exports?module.exports=c(require("jquery"),require("sifter"),require("microplugin")):b.Selectize=c(b.jQuery,b.Sifter,b.MicroPlugin)})(this,function(b,c,a){var d=function(a,b){if("string"!==typeof b||b.length){var c="string"===typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(0<=e&&0<a.data.length){var g=a.data.match(c),b=document.createElement("span");
b.className="highlight";a=a.splitText(e);a.splitText(g[0].length);e=a.cloneNode(!0);b.appendChild(e);a.parentNode.replaceChild(b,a);b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(e=0;e<a.childNodes.length;++e)e+=d(a.childNodes[e]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{};this._events[a]=this._events[a]||[];this._events[a].push(b)},off:function(a,b){var c=arguments.length;if(0===c)return delete this._events;
if(1===c)return delete this._events[a];this._events=this._events||{};!1!==a in this._events&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){this._events=this._events||{};if(!1!==a in this._events)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}};e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),l=f?91:17,g=f?18:
17,h=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,p=function(a){return"undefined"===typeof a||null===a?null:"boolean"===typeof a?a?"1":"0":a+""},n=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},r={before:function(a,b,c){var d=a[b];a[b]=function(){c.apply(a,arguments);return d.apply(a,arguments)}},after:function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);c.apply(a,arguments);
return b}}},v=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},x=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c);c=window.setTimeout(function(){a.apply(d,e)},b)}},z=function(a,b,c){var d,e=a.trigger,g={};a.trigger=function(){var c=arguments[0];if(-1!==b.indexOf(c))g[c]=arguments;else return e.apply(a,arguments)};c.apply(a,[]);a.trigger=e;for(d in g)g.hasOwnProperty(d)&&e.apply(a,g[d])},B=function(a,b,c,d){a.on(b,c,function(b){for(var c=
b.target;c&&c.parentNode!==a[0];)c=c.parentNode;b.currentTarget=c;return d.apply(this,[b])})},t=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length);b.start=c.text.length-d;b.length=d}return b},y=function(a,d){var e,g;g=a[0];g.selectize=this;e=(e=(e=window.getComputedStyle&&window.getComputedStyle(g,
null))?e.getPropertyValue("direction"):g.currentStyle&&g.currentStyle.direction)||a.parents("[dir]:first").attr("dir")||"";b.extend(this,{order:0,settings:d,$input:a,tabIndex:a.attr("tabindex")||"",tagType:"select"===g.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(e),eventNS:".selectize"+ ++y.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:a.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,
ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?this.onSearchChange:x(this.onSearchChange,d.loadThrottle)});this.sifter=new c(this.options,{diacritics:d.diacritics});if(this.settings.options){a=0;for(d=this.settings.options.length;a<d;a++)this.registerOption(this.settings.options[a]);delete this.settings.options}if(this.settings.optgroups){a=
0;for(d=this.settings.optgroups.length;a<d;a++)this.registerOptionGroup(this.settings.optgroups[a]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi");"boolean"!==typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode);this.initializePlugins(this.settings.plugins);this.setupCallbacks();this.setupTemplates();this.setup()};e.mixin(y);a.mixin(y);b.extend(y.prototype,{setup:function(){var a=this,c=a.settings,
d=a.eventNS,e=b(window),p=b(document),n=a.$input,r,v,x,z,y,t;y=a.settings.mode;t=n.attr("class")||"";r=b("<div>").addClass(c.wrapperClass).addClass(t).addClass(y);v=b("<div>").addClass(c.inputClass).addClass("items").appendTo(r);x=b('<input type="text" autocomplete="off" />').appendTo(v).attr("tabindex",n.is(":disabled")?"-1":a.tabIndex);z=b(c.dropdownParent||r);z=b("<div>").addClass(c.dropdownClass).addClass(y).hide().appendTo(z);y=b("<div>").addClass(c.dropdownContentClass).appendTo(z);a.settings.copyClassesToDropdown&&
z.addClass(t);r.css({width:n[0].style.width});a.plugins.names.length&&(t="plugin-"+a.plugins.names.join(" plugin-"),r.addClass(t),z.addClass(t));(null===c.maxItems||1<c.maxItems)&&1===a.tagType&&n.attr("multiple","multiple");a.settings.placeholder&&x.attr("placeholder",c.placeholder);!a.settings.splitOn&&a.settings.delimiter&&(t=a.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),a.settings.splitOn=new RegExp("\\s*"+t+"+\\s*"));n.attr("autocorrect")&&x.attr("autocorrect",n.attr("autocorrect"));
n.attr("autocapitalize")&&x.attr("autocapitalize",n.attr("autocapitalize"));a.$wrapper=r;a.$control=v;a.$control_input=x;a.$dropdown=z;a.$dropdown_content=y;z.on("mouseenter","[data-selectable]",function(){return a.onOptionHover.apply(a,arguments)});z.on("mousedown click","[data-selectable]",function(){return a.onOptionSelect.apply(a,arguments)});B(v,"mousedown","*:not(input)",function(){return a.onItemSelect.apply(a,arguments)});v.on({mousedown:function(){return a.onMouseDown.apply(a,arguments)},
click:function(){return a.onClick.apply(a,arguments)}});x.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return a.onKeyDown.apply(a,arguments)},keyup:function(){return a.onKeyUp.apply(a,arguments)},keypress:function(){return a.onKeyPress.apply(a,arguments)},resize:function(){a.positionDropdown.apply(a,[])},blur:function(){return a.onBlur.apply(a,arguments)},focus:function(){a.ignoreBlur=!1;return a.onFocus.apply(a,arguments)},paste:function(){return a.onPaste.apply(a,arguments)}});
p.on("keydown"+d,function(b){a.isCmdDown=b[f?"metaKey":"ctrlKey"];a.isCtrlDown=b[f?"altKey":"ctrlKey"];a.isShiftDown=b.shiftKey});p.on("keyup"+d,function(b){b.keyCode===g&&(a.isCtrlDown=!1);16===b.keyCode&&(a.isShiftDown=!1);b.keyCode===l&&(a.isCmdDown=!1)});p.on("mousedown"+d,function(b){if(a.isFocused){if(b.target===a.$dropdown[0]||b.target.parentNode===a.$dropdown[0])return!1;a.$control.has(b.target).length||b.target===a.$control[0]||a.blur(b.target)}});e.on(["scroll"+d,"resize"+d].join(" "),function(){a.isOpen&&
a.positionDropdown.apply(a,arguments)});e.on("mousemove"+d,function(){a.ignoreHover=!1});this.revertSettings={$children:n.children().detach(),tabindex:n.attr("tabindex")};n.attr("tabindex",-1).hide().after(a.$wrapper);b.isArray(c.items)&&(a.setValue(c.items),delete c.items);if(h)n.on("invalid"+d,function(b){b.preventDefault();a.isInvalid=!0;a.refreshState()});a.updateOriginalInput();a.refreshItems();a.refreshState();a.updatePlaceholder();a.isSetup=!0;n.is(":disabled")&&a.disable();a.on("change",this.onChange);
n.data("selectize",a);n.addClass("selectized");a.trigger("initialize");if(!0===c.preload)a.onSearchChange("")},setupTemplates:function(){var a=this.settings.labelField,c=this.settings.optgroupLabelField;this.settings.render=b.extend({},{optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[c])+"</div>"},option:function(b,c){return'<div class="option">'+c(b[a])+"</div>"},item:function(b,c){return'<div class="item">'+
c(b[a])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}},this.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",
dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(a in c)if(c.hasOwnProperty(a)&&(b=this.settings[c[a]]))this.on(a,b)},onClick:function(a){this.isFocused||(this.focus(),a.preventDefault())},onMouseDown:function(a){var c=this,d=a.isDefaultPrevented();b(a.target);if(c.isFocused){if(a.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},
onPaste:function(a){var c=this;c.isFull()||c.isInputHidden||c.isLocked?a.preventDefault():setTimeout(function(){if(c.settings.splitOn)for(var d=b.trim(c.$control_input.val()||"").split(c.settings.splitOn),e=0,g=d.length;e<g;e++)c.createItem(d[e]);c.onKeyUp(a)},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);if(this.settings.create&&"multi"===this.settings.mode&&b===this.settings.delimiter)return this.createItem(),a.preventDefault(),
!1},onKeyDown:function(a){if(this.isLocked)9!==a.keyCode&&a.preventDefault();else{switch(a.keyCode){case 65:if(this.isCmdDown){this.selectAll();return}break;case 27:this.isOpen&&(a.preventDefault(),a.stopPropagation(),this.close());return;case 78:if(!a.ctrlKey||a.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var b=this.getAdjacentOption(this.$activeOption,1);b.length&&this.setActiveOption(b,!0,!0)}a.preventDefault();return;case 80:if(!a.ctrlKey||
a.altKey)break;case 38:this.$activeOption&&(this.ignoreHover=!0,b=this.getAdjacentOption(this.$activeOption,-1),b.length&&this.setActiveOption(b,!0,!0));a.preventDefault();return;case 13:this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),a.preventDefault());return;case 37:this.advanceSelection(-1,a);return;case 39:this.advanceSelection(1,a);return;case 9:this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),
this.isFull()||a.preventDefault());this.settings.create&&this.createItem()&&a.preventDefault();return;case 8:case 46:this.deleteSelection(a);return}!this.isFull()&&!this.isInputHidden||(f?a.metaKey:a.ctrlKey)||a.preventDefault()}},onKeyUp:function(a){if(this.isLocked)return a&&a.preventDefault();a=this.$control_input.val()||"";this.lastValue!==a&&(this.lastValue=a,this.onSearchChange(a),this.refreshOptions(),this.trigger("type",a))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&!b.loadedSearches.hasOwnProperty(a)&&
(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])}))},onFocus:function(a){var b=this.isFocused;if(this.isDisabled)return this.blur(),a&&a.preventDefault(),!1;if(!this.ignoreFocus){this.isFocused=!0;if("focus"===this.settings.preload)this.onSearchChange("");b||this.trigger("focus");this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus));this.refreshState()}},onBlur:function(a,b){var c=this;c.isFocused&&(c.isFocused=!1,c.ignoreFocus||
(c.ignoreBlur||document.activeElement!==c.$dropdown_content[0]?(a=function(){c.close();c.setTextboxValue("");c.setActiveItem(null);c.setActiveOption(null);c.setCaret(c.items.length);c.refreshState();(b||document.body).focus();c.ignoreFocus=!1;c.trigger("blur")},c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,a):a()):(c.ignoreBlur=!0,c.onFocus(a))))},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(a){var c,
d=this;a.preventDefault&&(a.preventDefault(),a.stopPropagation());c=b(a.currentTarget);c.hasClass("create")?d.createItem(null,function(){d.settings.closeAfterSelect&&d.close()}):(c=c.attr("data-value"),"undefined"!==typeof c&&(d.lastQuery=null,d.setTextboxValue(""),d.addItem(c),d.settings.closeAfterSelect?d.close():!d.settings.hideSelected&&a.type&&/mouse/.test(a.type)&&d.setActiveOption(d.getOption(c))))},onItemSelect:function(a){this.isLocked||"multi"!==this.settings.mode||(a.preventDefault(),this.setActiveItem(a.currentTarget,
a))},load:function(a){var b=this,c=b.$wrapper.addClass(b.settings.loadingClass);b.loading++;a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0);a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden));b.loading||c.removeClass(b.settings.loadingClass);b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input;b.val()!==a&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:
this.items.join(this.settings.delimiter)},setValue:function(a,b){z(this,b?[]:["change"],function(){this.clear(b);this.addItems(a,b)})},setActiveItem:function(a,c){var d,e;if("single"!==this.settings.mode)if(a=b(a),a.length){d=c&&c.type.toLowerCase();if("mousedown"===d&&this.isShiftDown&&this.$activeItems.length){d=this.$control.children(".active:last");d=Array.prototype.indexOf.apply(this.$control[0].childNodes,[d[0]]);a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[a[0]]);d>a&&(e=d,
d=a,a=e);for(;d<=a;d++)e=this.$control[0].childNodes[d],-1===this.$activeItems.indexOf(e)&&(b(e).addClass("active"),this.$activeItems.push(e));c.preventDefault()}else"mousedown"===d&&this.isCtrlDown||"keydown"===d&&this.isShiftDown?a.hasClass("active")?(c=this.$activeItems.indexOf(a[0]),this.$activeItems.splice(c,1),a.removeClass("active")):this.$activeItems.push(a.addClass("active")[0]):(b(this.$activeItems).removeClass("active"),this.$activeItems=[a.addClass("active")[0]]);this.hideInput();this.isFocused||
this.focus()}else b(this.$activeItems).removeClass("active"),this.$activeItems=[],this.isFocused&&this.showInput()},setActiveOption:function(a,c,d){var e,g,h;this.$activeOption&&this.$activeOption.removeClass("active");this.$activeOption=null;a=b(a);a.length&&(this.$activeOption=a.addClass("active"),c||"undefined"===typeof c)&&(a=this.$dropdown_content.height(),e=this.$activeOption.outerHeight(!0),c=this.$dropdown_content.scrollTop()||0,g=this.$activeOption.offset().top-this.$dropdown_content.offset().top+
c,h=g-a+e,g+e>a+c?this.$dropdown_content.stop().animate({scrollTop:h},d?this.settings.scrollDuration:0):g<c&&this.$dropdown_content.stop().animate({scrollTop:g},d?this.settings.scrollDuration:0))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue("");this.$control_input.css({opacity:0,
position:"absolute",left:this.rtl?1E4:-1E4});this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0});this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1;a.onFocus()},0))},blur:function(a){this.$control_input[0].blur();this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=
this.settings,b=a.sortField;"string"===typeof b&&(b=[{field:b}]);return{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(a){var c,d;c=this.settings;var e=this.getSearchOptions();if(c.score&&(d=this.settings.score.apply(this,[a]),"function"!==typeof d))throw Error('Selectize "score" setting must be a function that returns a function');a!==this.lastQuery?(this.lastQuery=a,this.currentResults=a=this.sifter.search(a,b.extend(e,{score:d}))):a=b.extend(!0,{},this.currentResults);
if(c.hideSelected)for(c=a.items.length-1;0<=c;c--)-1!==this.items.indexOf(p(a.items[c].id))&&a.items.splice(c,1);return a},refreshOptions:function(a){var c,e,g,h,f,l,n,r,v,x,z,y;"undefined"===typeof a&&(a=!0);var t=this;z=b.trim(t.$control_input.val());var B=t.search(z),L=t.$dropdown_content,U=t.$activeOption&&p(t.$activeOption.attr("data-value"));h=B.items.length;"number"===typeof t.settings.maxOptions&&(h=Math.min(h,t.settings.maxOptions));f={};l=[];for(c=0;c<h;c++)for(n=t.options[B.items[c].id],
r=t.render("option",n),n=n[t.settings.optgroupField]||"",v=b.isArray(n)?n:[n],e=0,g=v&&v.length;e<g;e++)n=v[e],t.optgroups.hasOwnProperty(n)||(n=""),f.hasOwnProperty(n)||(f[n]=[],l.push(n)),f[n].push(r);this.settings.lockOptgroupOrder&&l.sort(function(a,b){return(t.optgroups[a].$order||0)-(t.optgroups[b].$order||0)});r=[];c=0;for(h=l.length;c<h;c++)n=l[c],t.optgroups.hasOwnProperty(n)&&f[n].length?(e=t.render("optgroup_header",t.optgroups[n])||"",e+=f[n].join(""),r.push(t.render("optgroup",b.extend({},
t.optgroups[n],{html:e})))):r.push(f[n].join(""));L.html(r.join(""));if(t.settings.highlight&&B.query.length&&B.tokens.length)for(c=0,h=B.tokens.length;c<h;c++)d(L,B.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,h=t.items.length;c<h;c++)t.getOption(t.items[c]).addClass("selected");if(c=t.canCreate(z))L.prepend(t.render("option_create",{input:z})),y=b(L[0].childNodes[0]);t.hasOptions=0<B.items.length||c;t.hasOptions?(0<B.items.length?((z=U&&t.getOption(U))&&z.length?x=z:"single"===t.settings.mode&&
t.items.length&&(x=t.getOption(t.items[0])),x&&x.length||(x=y&&!t.settings.addPrecedence?t.getAdjacentOption(y,1):L.find("[data-selectable]:first"))):x=y,t.setActiveOption(x),a&&!t.isOpen&&t.open()):(t.setActiveOption(null),a&&t.isOpen&&t.close())},addOption:function(a){var c,d;if(b.isArray(a))for(c=0,d=a.length;c<d;c++)this.addOption(a[c]);else if(c=this.registerOption(a))this.userOptions[c]=!0,this.lastQuery=null,this.trigger("option_add",c,a)},registerOption:function(a){var b=p(a[this.settings.valueField]);
if(!b||this.options.hasOwnProperty(b))return!1;a.$order=a.$order||++this.order;this.options[b]=a;return b},registerOptionGroup:function(a){var b=p(a[this.settings.optgroupValueField]);if(!b)return!1;a.$order=a.$order||++this.order;this.optgroups[b]=a;return b},addOptionGroup:function(a,b){b[this.settings.optgroupValueField]=a;(a=this.registerOptionGroup(b))&&this.trigger("optgroup_add",a,b)},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache=
{},this.trigger("optgroup_remove",a))},clearOptionGroups:function(){this.optgroups={};this.renderCache={};this.trigger("optgroup_clear")},updateOption:function(a,c){var d,e,g;a=p(a);d=p(c[this.settings.valueField]);if(null!==a&&this.options.hasOwnProperty(a)){if("string"!==typeof d)throw Error("Value must be set in option data");g=this.options[a].$order;d!==a&&(delete this.options[a],e=this.items.indexOf(a),-1!==e&&this.items.splice(e,1,d));c.$order=c.$order||g;this.options[d]=c;e=this.renderCache.item;
g=this.renderCache.option;e&&(delete e[a],delete e[d]);g&&(delete g[a],delete g[d]);-1!==this.items.indexOf(d)&&(a=this.getItem(a),c=b(this.render("item",c)),a.hasClass("active")&&c.addClass("active"),a.replaceWith(c));this.lastQuery=null;this.isOpen&&this.refreshOptions(!1)}},removeOption:function(a,b){a=p(a);var c=this.renderCache.item,d=this.renderCache.option;c&&delete c[a];d&&delete d[a];delete this.userOptions[a];delete this.options[a];this.lastQuery=null;this.trigger("option_remove",a);this.removeItem(a,
b)},clearOptions:function(){this.loadedSearches={};this.userOptions={};this.renderCache={};this.options=this.sifter.items={};this.lastQuery=null;this.trigger("option_clear");this.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(a,c){var d=this.$dropdown.find("[data-selectable]");a=d.index(a)+c;return 0<=a&&a<d.length?d.eq(a):b()},getElementWithValue:function(a,c){a=p(a);if("undefined"!==typeof a&&null!==
a)for(var d=0,e=c.length;d<e;d++)if(c[d].getAttribute("data-value")===a)return b(c[d]);return b()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(a,c){a=b.isArray(a)?a:[a];for(var d=0,e=a.length;d<e;d++)this.isPending=d<e-1,this.addItem(a[d],c)},addItem:function(a,c){z(this,c?[]:["change"],function(){var d,e,g,h=this.settings.mode;a=p(a);-1!==this.items.indexOf(a)?"single"===h&&this.close():this.options.hasOwnProperty(a)&&("single"===h&&this.clear(c),
"multi"===h&&this.isFull()||(d=b(this.render("item",this.options[a])),g=this.isFull(),this.items.splice(this.caretPos,0,a),this.insertAtCaret(d),(!this.isPending||!g&&this.isFull())&&this.refreshState(),this.isSetup&&(g=this.$dropdown_content.find("[data-selectable]"),this.isPending||(e=this.getOption(a),e=this.getAdjacentOption(e,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==h),e&&this.setActiveOption(this.getOption(e))),!g.length||this.isFull()?this.close():this.positionDropdown(),
this.updatePlaceholder(),this.trigger("item_add",a,d),this.updateOriginalInput({silent:c}))))})},removeItem:function(a,b){var c,d,e;c="object"===typeof a?a:this.getItem(a);a=p(c.attr("data-value"));d=this.items.indexOf(a);-1!==d&&(c.remove(),c.hasClass("active")&&(e=this.$activeItems.indexOf(c[0]),this.$activeItems.splice(e,1)),this.items.splice(d,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(a)&&this.removeOption(a,b),d<this.caretPos&&this.setCaret(this.caretPos-
1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:b}),this.positionDropdown(),this.trigger("item_remove",a,c))},createItem:function(a,c){var d=this,e=d.caretPos;a=a||b.trim(d.$control_input.val()||"");var g=arguments[arguments.length-1];"function"!==typeof g&&(g=function(){});"boolean"!==typeof c&&(c=!0);if(!d.canCreate(a))return g(),!1;d.lock();var h="function"===typeof d.settings.create?this.settings.create:function(a){var b={};b[d.settings.labelField]=a;b[d.settings.valueField]=
a;return b},f=v(function(a){d.unlock();if(!a||"object"!==typeof a)return g();var b=p(a[d.settings.valueField]);if("string"!==typeof b)return g();d.setTextboxValue("");d.addOption(a);d.setCaret(e);d.addItem(b);d.refreshOptions(c&&"single"!==d.settings.mode);g(a)}),h=h.apply(this,[a,f]);"undefined"!==typeof h&&f(h);return!0},refreshItems:function(){this.lastQuery=null;this.isSetup&&this.addItem(this.items);this.refreshState();this.updateOriginalInput()},refreshState:function(){this.isRequired&&(this.items.length&&
(this.isInvalid=!1),this.$control_input.prop("required",void 0));this.refreshClasses()},refreshClasses:function(){var a=this.isFull(),c=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl);this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",c).toggleClass("full",a).toggleClass("not-full",!a).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",
this.isOpen).toggleClass("has-options",!b.isEmptyObject(this.options)).toggleClass("has-items",0<this.items.length);this.$control_input.data("grow",!a&&!c)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var b,c,d,e;a=a||{};if(1===this.tagType){d=[];b=0;for(c=this.items.length;b<c;b++)e=this.options[this.items[b]][this.settings.labelField]||"",d.push('<option value="'+n(this.items[b])+'" selected="selected">'+n(e)+
"</option>");d.length||this.$input.attr("multiple")||d.push('<option value="" selected="selected"></option>');this.$input.html(d.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(a.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder);a.triggerHandler("update",{force:!0})}},
open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var a=this.isOpen;"single"===this.settings.mode&&this.items.length&&this.hideInput();this.isOpen=!1;this.$dropdown.hide();this.setActiveOption(null);this.refreshState();a&&this.trigger("dropdown_close",
this.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0);this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(a){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:a}),this.refreshState(),this.showInput(),this.trigger("clear"))},
insertAtCaret:function(a){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(a):b(this.$control[0].childNodes[c]).before(a);this.setCaret(c+1)},deleteSelection:function(a){var c,d,e,g,h;c=a&&8===a.keyCode?-1:1;d=t(this.$control_input[0]);this.$activeOption&&!this.settings.hideSelected&&(h=this.getAdjacentOption(this.$activeOption,-1).attr("data-value"));e=[];if(this.$activeItems.length){g=this.$control.children(".active:"+(0<c?"last":"first"));g=this.$control.children(":not(input)").index(g);
0<c&&g++;c=0;for(d=this.$activeItems.length;c<d;c++)e.push(b(this.$activeItems[c]).attr("data-value"));a&&(a.preventDefault(),a.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(0>c&&0===d.start&&0===d.length?e.push(this.items[this.caretPos-1]):0<c&&d.start===this.$control_input.val().length&&e.push(this.items[this.caretPos]));if(!e.length||"function"===typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[e]))return!1;for("undefined"!==typeof g&&
this.setCaret(g);e.length;)this.removeItem(e.pop());this.showInput();this.positionDropdown();this.refreshOptions(!0);h&&(a=this.getOption(h),a.length&&this.setActiveOption(a));return!0},advanceSelection:function(a,b){var c,d;0!==a&&(this.rtl&&(a*=-1),c=0<a?"last":"first",d=t(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(c=this.$control_input.val().length,(d=0>a?0===d.start&&0===d.length:d.start===c)&&!c&&this.advanceCaret(a,b)):(b=this.$control.children(".active:"+c),b.length&&(b=this.$control.children(":not(input)").index(b),
this.setActiveItem(null),this.setCaret(0<a?b+1:b))))},advanceCaret:function(a,b){var c;0!==a&&(c=0<a?"next":"prev",this.isShiftDown?(a=this.$control_input[c](),a.length&&(this.hideInput(),this.setActiveItem(a),b&&b.preventDefault())):this.setCaret(this.caretPos+a))},setCaret:function(a){a="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,a));if(!this.isPending){var c,d,e,g;e=this.$control.children(":not(input)");c=0;for(d=e.length;c<d;c++)g=b(e[c]).detach(),c<a?
this.$control_input.before(g):this.$control.append(g)}this.caretPos=a},lock:function(){this.close();this.isLocked=!0;this.refreshState()},unlock:function(){this.isLocked=!1;this.refreshState()},disable:function(){this.$input.prop("disabled",!0);this.$control_input.prop("disabled",!0).prop("tabindex",-1);this.isDisabled=!0;this.lock()},enable:function(){this.$input.prop("disabled",!1);this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex);this.isDisabled=!1;this.unlock()},destroy:function(){var a=
this.eventNS,c=this.revertSettings;this.trigger("destroy");this.off();this.$wrapper.remove();this.$dropdown.remove();this.$input.html("").append(c.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:c.tabindex}).show();this.$control_input.removeData("grow");this.$input.removeData("selectize");b(window).off(a);b(document).off(a);b(document.body).off(a);delete this.$input[0].selectize},render:function(a,b){var c,d,e=!1,g=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;
if("option"===a||"item"===a)c=p(b[this.settings.valueField]),e=!!c;if(e&&("undefined"===typeof this.renderCache[a]&&(this.renderCache[a]={}),this.renderCache[a].hasOwnProperty(c)))return this.renderCache[a][c];d=this.settings.render[a].apply(this,[b,n]);if("option"===a||"option_create"===a)d=d.replace(g,"<$1 data-selectable");"optgroup"===a&&(b=b[this.settings.optgroupValueField]||"",d=d.replace(g,'<$1 data-group="'+(n(b)+"").replace(/\$/g,"$$$$")+'"'));if("option"===a||"item"===a)d=d.replace(g,'<$1 data-value="'+
(n(c||"")+"").replace(/\$/g,"$$$$")+'"');e&&(this.renderCache[a][c]=d);return d},clearCache:function(a){"undefined"===typeof a?this.renderCache={}:delete this.renderCache[a]},canCreate:function(a){if(!this.settings.create)return!1;var b=this.settings.createFilter;return a.length&&("function"!==typeof b||b.apply(this,[a]))&&("string"!==typeof b||(new RegExp(b)).test(a))&&(!(b instanceof RegExp)||b.test(a))}});y.count=0;y.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,
diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1E3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,
wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}};b.fn.selectize=function(a){var c=b.fn.selectize.defaults,d=b.extend({},c,a),e=d.dataAttr,g=d.labelField,h=d.valueField,f=d.optgroupField,l=d.optgroupLabelField,n=d.optgroupValueField,r=function(a,c){var r,v,x,u=c.options,z={},t=function(a){a=e&&a.attr(e);return"string"===typeof a&&a.length?JSON.parse(a):
null},A=function(a,e){a=b(a);var l=p(a.attr("value"));if(l||d.allowEmptyOption)if(z.hasOwnProperty(l))e&&((a=z[l][f])?b.isArray(a)?a.push(e):z[l][f]=[a,e]:z[l][f]=e);else{var n=t(a)||{};n[g]=n[g]||a.text();n[h]=n[h]||l;n[f]=n[f]||e;z[l]=n;u.push(n);a.is(":selected")&&c.items.push(l)}},q=function(a){var d,e,g;a=b(a);if(e=a.attr("label"))d=t(a)||{},d[l]=e,d[n]=e,c.optgroups.push(d);g=b("option",a);a=0;for(d=g.length;a<d;a++)A(g[a],e)};c.maxItems=a.attr("multiple")?null:1;x=a.children();a=0;for(r=x.length;a<
r;a++)v=x[a].tagName.toLowerCase(),"optgroup"===v?q(x[a]):"option"===v&&A(x[a])};return this.each(function(){if(!this.selectize){var f=b(this),l=this.tagName.toLowerCase(),n=f.attr("placeholder")||f.attr("data-placeholder");n||d.allowEmptyOption||(n=f.children('option[value=""]').text());n={placeholder:n,options:[],optgroups:[],items:[]};if("select"===l)r(f,n);else{var p,v,x;if(l=f.attr(e))for(n.options=JSON.parse(l),l=0,p=n.options.length;l<p;l++)n.items.push(n.options[l][h]);else if(l=b.trim(f.val()||
""),d.allowEmptyOption||l.length){v=l.split(d.delimiter);l=0;for(p=v.length;l<p;l++)x={},x[g]=v[l],x[h]=v[l],n.options.push(x);n.items=v}}new y(f,b.extend(!0,{},c,n,a))}})};b.fn.selectize.defaults=y.defaults;b.fn.selectize.support={validity:h};y.define("drag_drop",function(a){if(!b.fn.sortable)throw Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var c=this;c.lock=function(){var a=c.lock;return function(){var b=c.$control.data("sortable");b&&b.disable();
return a.apply(c,arguments)}}();c.unlock=function(){var a=c.unlock;return function(){var b=c.$control.data("sortable");b&&b.enable();return a.apply(c,arguments)}}();c.setup=function(){var a=c.setup;return function(){a.apply(this,arguments);var d=c.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:c.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width"));d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var a=c.$activeItems?c.$activeItems.slice():
null,e=[];d.children("[data-value]").each(function(){e.push(b(this).attr("data-value"))});c.setValue(e);c.setActiveItem(a)}})}}()}});y.define("dropdown_header",function(a){var c=this;a=b.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+
'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},a);c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments);c.$dropdown_header=b(a.html(a));c.$dropdown.prepend(c.$dropdown_header)}}()});y.define("optgroup_columns",function(a){var c=this;a=b.extend({equalizeWidth:!0,equalizeHeight:!0},a);this.getAdjacentOption=function(a,c){var d=a.closest("[data-group]").find("[data-selectable]");a=d.index(a)+c;return 0<=a&&a<d.length?d.eq(a):b()};
this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e;if(!this.isOpen||37!==b.keyCode&&39!==b.keyCode)return a.apply(this,arguments);c.ignoreHover=!0;e=this.$activeOption.closest("[data-group]");d=e.find("[data-selectable]").index(this.$activeOption);e=37===b.keyCode?e.prev("[data-group]"):e.next("[data-group]");e=e.find("[data-selectable]");d=e.eq(Math.min(e.length-1,d));d.length&&this.setActiveOption(d)}}();var d=function(){var a,b=d.width,c=document;"undefined"===typeof b&&(a=
c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a));return b},e=function(){var e,g,h,f;f=b("[data-group]",c.$dropdown_content);if((g=f.length)&&c.$dropdown_content.width()){if(a.equalizeHeight){for(e=h=0;e<g;e++)h=Math.max(h,f.eq(e).height());f.css({height:h})}a.equalizeWidth&&
(h=c.$dropdown_content.innerWidth()-d(),e=Math.round(h/g),f.css({width:e}),1<g&&(e=h-e*(g-1),f.eq(g-1).css({width:e})))}};if(a.equalizeHeight||a.equalizeWidth)r.after(this,"positionDropdown",e),r.after(this,"refreshOptions",e)});y.define("remove_button",function(a){if("single"!==this.settings.mode){a=b.extend({label:"&times;",title:"Remove",className:"remove",append:!0},a);var c=this,d='<a href="javascript:void(0)" class="'+a.className+'" tabindex="-1" title="'+n(a.title)+'">'+a.label+"</a>";this.setup=
function(){var e=c.setup;return function(){if(a.append){var g=c.settings.render.item;c.settings.render.item=function(a){var b=g.apply(this,arguments),c=b.search(/(<\/[^>]+>\s*)$/);return b.substring(0,c)+d+b.substring(c)}}e.apply(this,arguments);this.$control.on("click","."+a.className,function(a){a.preventDefault();c.isLocked||(a=b(a.currentTarget).parent(),c.setActiveItem(a),c.deleteSelection()&&c.setCaret(c.items.length))})}}()}});y.define("restore_on_backspace",function(a){var b=this;a.text=a.text||
function(a){return a[this.settings.labelField]};this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d;if(8===b.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,0<=d&&d<this.items.length)){d=this.options[this.items[d]];this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[d])),this.refreshOptions(!0));b.preventDefault();return}return c.apply(this,arguments)}}()});return y});
Selectize.define("remove_button",function(b){if("single"!==this.settings.mode){b=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,a='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+(b.title+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'">'+b.label+"</a>";this.setup=function(){var d=c.setup;return function(){if(b.append){var e=c.settings.render.item;c.settings.render.item=function(b){var c=
e.apply(this,arguments),d=c.search(/(<\/[^>]+>\s*)$/);return c.substring(0,d)+a+c.substring(d)}}d.apply(this,arguments);this.$control.on("click","."+b.className,function(a){a.preventDefault();c.isLocked||(a=$(a.currentTarget).parent(),c.setActiveItem(a),c.deleteSelection()&&c.setCaret(c.items.length))})}}()}});
Selectize.define("preserve_on_blur",function(b){var c=this;b.text=b.text||function(a){return a[this.settings.labelField]};this.onBlur=function(a){var b=c.onBlur;return function(a){var c=this.$control_input.val();b.apply(this,a);this.setTextboxValue(c)}}()});
(function(){Selectize.define("no_results",function(b){var c=this;b=$.extend({message:"No results found.",html:function(a){return'<div class="selectize-dropdown '+a.classNames+' dropdown-empty-message"><div class="selectize-dropdown-content" style="padding: 3px 12px">'+a.message+"</div></div>"}},b);c.displayEmptyResultsMessage=function(){this.$empty_results_container.css("top",this.$control.outerHeight());this.$empty_results_container.show()};c.on("type",function(a){a='"'+c.lastQuery+'" is not valid';
c.hasOptions?c.$empty_results_container.hide():c.$empty_results_container.text(a).show()});c.onKeyDown=function(){var a=c.onKeyDown;return function(b){a.apply(c,arguments);this.$empty_results_container.hide()}}();c.onBlur=function(){var a=c.onBlur;return function(){a.apply(c,arguments);this.$empty_results_container.hide()}}();c.setup=function(){var a=c.setup;return function(){a.apply(c,arguments);c.$empty_results_container=$(b.html($.extend({classNames:c.$input.attr("class")},b)));c.$empty_results_container.insertBefore(c.$dropdown);
c.$empty_results_container.hide()}}()})})();"undefined"==typeof WBBLANG&&(WBBLANG={});
WBBLANG.en=CURLANG={bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",link:"Link",img:"Insert image",sup:"Superscript",sub:"Subscript",justifyleft:"Align left",justifycenter:"Align center",justifyright:"Align right",table:"Insert table",bullist:"\u2022 Unordered list",numlist:"1. Ordered list",quote:"Quote",offtop:"Offtop",code:"Code",spoiler:"Spoiler",fontcolor:"Font color",fontsize:"Font size",fontfamily:"Font family",fs_verysmall:"Very small",fs_small:"Small",fs_normal:"Normal",
fs_big:"Big",fs_verybig:"Very big",smilebox:"Insert emoticon",video:"Insert YouTube",removeFormat:"Remove Format",modal_link_title:"Insert link",modal_link_text:"Display text",modal_link_url:"URL",modal_email_text:"Display email",modal_email_url:"Email",modal_link_tab1:"Insert URL",modal_img_title:"Insert image",modal_img_tab1:"Insert URL",modal_img_tab2:"Upload image",modal_imgsrc_text:"Enter image URL",modal_img_btn:"Choose file",add_attach:"Add Attachment",modal_video_text:"Enter the URL of the video",
close:"Close",save:"Save",cancel:"Cancel",remove:"Delete",validation_err:"The entered data is invalid",error_onupload:"Error during file upload",fileupload_text1:"Drop file here",fileupload_text2:"or",loading:"Loading",auto:"Auto",views:"Views",downloads:"Downloads",sm1:"Smile",sm2:"Laughter",sm3:"Wink",sm4:"Thank you",sm5:"Scold",sm6:"Shock",sm7:"Angry",sm8:"Pain",sm9:"Sick"};wbbdebug=!0;
(function(b){b.wysibb=function(c,a){b(c).data("wbb",this);a&&a.deflang&&"undefined"!=typeof WBBLANG[a.deflang]&&(CURLANG=WBBLANG[a.deflang]);a&&a.lang&&"undefined"!=typeof WBBLANG[a.lang]&&(CURLANG=WBBLANG[a.lang]);this.txtArea=c;this.$txtArea=b(c);this.$txtArea.attr("id")||this.setUID(this.txtArea);this.options={bbmode:!1,onlyBBmode:!1,themeName:"default",bodyClass:"",lang:"ru",tabInsert:!0,imgupload:!1,img_uploadurl:"/iupload.php",img_maxwidth:800,img_maxheight:800,hotkeys:!0,showHotkeys:!0,autoresize:!0,
resize_maxheight:800,loadPageStyles:!0,traceTextarea:!0,smileConversion:!0,buttons:"bold,italic,underline,strike,sup,sub,|,img,video,link,|,bullist,numlist,|,fontcolor,fontsize,fontfamily,|,justifyleft,justifycenter,justifyright,|,quote,code,table,removeFormat",allButtons:{bold:{title:CURLANG.bold,buttonHTML:'<span class="fonticon ve-tlb-bold1">\ue018</span>',excmd:"bold",hotkey:"ctrl+b",transform:{"<b>{SELTEXT}</b>":"[b]{SELTEXT}[/b]","<strong>{SELTEXT}</strong>":"[b]{SELTEXT}[/b]"}},italic:{title:CURLANG.italic,
buttonHTML:'<span class="fonticon ve-tlb-italic1">\ue001</span>',excmd:"italic",hotkey:"ctrl+i",transform:{"<i>{SELTEXT}</i>":"[i]{SELTEXT}[/i]","<em>{SELTEXT}</em>":"[i]{SELTEXT}[/i]"}},underline:{title:CURLANG.underline,buttonHTML:'<span class="fonticon ve-tlb-underline1">\ue002</span>',excmd:"underline",hotkey:"ctrl+u",transform:{"<u>{SELTEXT}</u>":"[u]{SELTEXT}[/u]"}},strike:{title:CURLANG.strike,buttonHTML:'<span class="fonticon fi-stroke1 ve-tlb-strike1">\ue003</span>',excmd:"strikeThrough",
transform:{"<strike>{SELTEXT}</strike>":"[s]{SELTEXT}[/s]","<s>{SELTEXT}</s>":"[s]{SELTEXT}[/s]"}},sup:{title:CURLANG.sup,buttonHTML:'<span class="fonticon ve-tlb-sup1">\ue005</span>',excmd:"superscript",transform:{"<sup>{SELTEXT}</sup>":"[sup]{SELTEXT}[/sup]"}},sub:{title:CURLANG.sub,buttonHTML:'<span class="fonticon ve-tlb-sub1">\ue004</span>',excmd:"subscript",transform:{"<sub>{SELTEXT}</sub>":"[sub]{SELTEXT}[/sub]"}},link:{title:CURLANG.link,buttonHTML:'<span class="fonticon ve-tlb-link1">\ue007</span>',
hotkey:"ctrl+shift+2",modal:{title:CURLANG.modal_link_title,width:"500px",tabs:[{input:[{param:"SELTEXT",title:CURLANG.modal_link_text,type:"div"},{param:"URL",title:CURLANG.modal_link_url,validation:"^http(s)?://"}]}]},transform:{'<a href="{URL}">{SELTEXT}</a>':"[url={URL}]{SELTEXT}[/url]",'<a href="{URL}">{URL}</a>':"[url]{URL}[/url]"}},img:{title:CURLANG.img,buttonHTML:'<span class="fonticon ve-tlb-img1">\ue006</span>',hotkey:"ctrl+shift+1",addWrap:!0,modal:{title:CURLANG.modal_img_title,width:"600px",
tabs:[{title:CURLANG.modal_img_tab1,input:[{param:"SRC",title:CURLANG.modal_imgsrc_text,validation:"^http(s)?://.*?.(jpg|png|gif|jpeg)$"}]}],onLoad:this.imgLoadModal},transform:{'<img src="{SRC}" />':"[img]{SRC}[/img]",'<img src="{SRC}" width="{WIDTH}" height="{HEIGHT}"/>':"[img width={WIDTH},height={HEIGHT}]{SRC}[/img]"}},bullist:{title:CURLANG.bullist,buttonHTML:'<span class="fonticon ve-tlb-list1">\ue009</span>',excmd:"insertUnorderedList",transform:{"<ul>{SELTEXT}</ul>":"[list]{SELTEXT}[/list]",
"<li>{SELTEXT}</li>":"[*]{SELTEXT}[/*]"}},numlist:{title:CURLANG.numlist,buttonHTML:'<span class="fonticon ve-tlb-numlist1">\ue00a</span>',excmd:"insertOrderedList",transform:{"<ol>{SELTEXT}</ol>":"[list=1]{SELTEXT}[/list]","<li>{SELTEXT}</li>":"[*]{SELTEXT}[/*]"}},quote:{title:CURLANG.quote,buttonHTML:'<span class="fonticon ve-tlb-quote1">\ue00c</span>',hotkey:"ctrl+shift+3",transform:{"<blockquote>{SELTEXT}</blockquote>":"[quote]{SELTEXT}[/quote]"}},code:{title:CURLANG.code,buttonHTML:'<span class="fonticon">\ue00d</span>',
hotkey:"ctrl+shift+4",onlyClearText:!0,transform:{"<code>{SELTEXT}</code>":"[code]{SELTEXT}[/code]"}},offtop:{title:CURLANG.offtop,buttonText:"offtop",transform:{'<span style="font-size:10px;color:#ccc">{SELTEXT}</span>':"[offtop]{SELTEXT}[/offtop]"}},fontcolor:{type:"colorpicker",title:CURLANG.fontcolor,excmd:"foreColor",valueBBname:"color",subInsert:!0,colors:"#000000,#444444,#666666,#999999,#b6b6b6,#cccccc,#d8d8d8,#efefef,#f4f4f4,#ffffff,-, \t\t\t\t\t\t\t #ff0000,#980000,#ff7700,#ffff00,#00ff00,#00ffff,#1e84cc,#0000ff,#9900ff,#ff00ff,-, \t\t\t\t\t\t\t #f4cccc,#dbb0a7,#fce5cd,#fff2cc,#d9ead3,#d0e0e3,#c9daf8,#cfe2f3,#d9d2e9,#ead1dc, \t\t\t\t\t\t\t #ea9999,#dd7e6b,#f9cb9c,#ffe599,#b6d7a8,#a2c4c9,#a4c2f4,#9fc5e8,#b4a7d6,#d5a6bd, \t\t\t\t\t\t\t #e06666,#cc4125,#f6b26b,#ffd966,#93c47d,#76a5af,#6d9eeb,#6fa8dc,#8e7cc3,#c27ba0, \t\t\t\t\t\t\t #cc0000,#a61c00,#e69138,#f1c232,#6aa84f,#45818e,#3c78d8,#3d85c6,#674ea7,#a64d79, \t\t\t\t\t\t\t #900000,#85200C,#B45F06,#BF9000,#38761D,#134F5C,#1155Cc,#0B5394,#351C75,#741B47, \t\t\t\t\t\t\t #660000,#5B0F00,#783F04,#7F6000,#274E13,#0C343D,#1C4587,#073763,#20124D,#4C1130",
transform:{'<font color="{COLOR}">{SELTEXT}</font>':"[color={COLOR}]{SELTEXT}[/color]"}},table:{type:"table",title:CURLANG.table,cols:10,rows:10,cellwidth:20,transform:{"<td>{SELTEXT}</td>":"[td]{SELTEXT}[/td]","<tr>{SELTEXT}</tr>":"[tr]{SELTEXT}[/tr]",'<table class="wbb-table">{SELTEXT}</table>':"[table]{SELTEXT}[/table]"},skipRules:!0},fontsize:{type:"select",title:CURLANG.fontsize,options:"fs_verysmall,fs_small,fs_normal,fs_big,fs_verybig"},fontfamily:{type:"select",title:CURLANG.fontfamily,excmd:"fontName",
valueBBname:"font",options:[{title:"Arial",exvalue:"Arial"},{title:"Comic Sans MS",exvalue:"Comic Sans MS"},{title:"Courier New",exvalue:"Courier New"},{title:"Georgia",exvalue:"Georgia"},{title:"Lucida Sans Unicode",exvalue:"Lucida Sans Unicode"},{title:"Tahoma",exvalue:"Tahoma"},{title:"Times New Roman",exvalue:"Times New Roman"},{title:"Trebuchet MS",exvalue:"Trebuchet MS"},{title:"Verdana",exvalue:"Verdana"}],transform:{'<font face="{FONT}">{SELTEXT}</font>':"[font={FONT}]{SELTEXT}[/font]"}},
smilebox:{type:"smilebox",title:CURLANG.smilebox,buttonHTML:'<span class="fonticon ve-tlb-smilebox1">\ue00b</span>'},justifyleft:{title:CURLANG.justifyleft,buttonHTML:'<span class="fonticon ve-tlb-textleft1">\ue015</span>',groupkey:"align",transform:{'<p style="text-align:left">{SELTEXT}</p>':"[left]{SELTEXT}[/left]"}},justifyright:{title:CURLANG.justifyright,buttonHTML:'<span class="fonticon ve-tlb-textright1">\ue016</span>',groupkey:"align",transform:{'<p style="text-align:right">{SELTEXT}</p>':"[right]{SELTEXT}[/right]"}},
justifycenter:{title:CURLANG.justifycenter,buttonHTML:'<span class="fonticon ve-tlb-textcenter1">\ue014</span>',groupkey:"align",transform:{'<p style="text-align:center">{SELTEXT}</p>':"[center]{SELTEXT}[/center]"}},video:{title:CURLANG.video,buttonHTML:'<span class="fonticon ve-tlb-video1">\ue008</span>',modal:{title:CURLANG.video,width:"600px",tabs:[{title:CURLANG.video,input:[{param:"SRC",title:CURLANG.modal_video_text}]}],onSubmit:function(a,b,c){(b=this.$modal.find('input[name="SRC"]').val())&&
(b=b.replace(/^\s+/,"").replace(/\s+$/,""));(b=-1!=b.indexOf("youtu.be")?b.match(/^http[s]*:\/\/youtu\.be\/([a-z0-9_-]+)/i):b.match(/^http[s]*:\/\/www\.youtube\.com\/watch\?.*?v=([a-z0-9_-]+)/i))&&2==b.length&&this.insertAtCursor(this.getCodeByCommand(a,{src:b[1]}));this.closeModal();this.updateUI();return!1}},transform:{'<iframe src="http://www.youtube.com/embed/{SRC}" width="640" height="480" frameborder="0"></iframe>':"[video]{SRC}[/video]"}},fs_verysmall:{title:CURLANG.fs_verysmall,buttonText:"fs1",
excmd:"fontSize",exvalue:"1",transform:{'<font size="1">{SELTEXT}</font>':"[size=50]{SELTEXT}[/size]"}},fs_small:{title:CURLANG.fs_small,buttonText:"fs2",excmd:"fontSize",exvalue:"2",transform:{'<font size="2">{SELTEXT}</font>':"[size=85]{SELTEXT}[/size]"}},fs_normal:{title:CURLANG.fs_normal,buttonText:"fs3",excmd:"fontSize",exvalue:"3",transform:{'<font size="3">{SELTEXT}</font>':"[size=100]{SELTEXT}[/size]"}},fs_big:{title:CURLANG.fs_big,buttonText:"fs4",excmd:"fontSize",exvalue:"4",transform:{'<font size="4">{SELTEXT}</font>':"[size=150]{SELTEXT}[/size]"}},
fs_verybig:{title:CURLANG.fs_verybig,buttonText:"fs5",excmd:"fontSize",exvalue:"6",transform:{'<font size="6">{SELTEXT}</font>':"[size=200]{SELTEXT}[/size]"}},removeformat:{title:CURLANG.removeFormat,buttonHTML:'<span class="fonticon ve-tlb-removeformat1">\ue00f</span>',excmd:"removeFormat"}},systr:{"<br/>":"\n",'<span class="wbbtab">{SELTEXT}</span>':"   {SELTEXT}"},customRules:{td:[["[td]{SELTEXT}[/td]",{seltext:{rgx:!1,attr:!1,sel:!1}}]],tr:[["[tr]{SELTEXT}[/tr]",{seltext:{rgx:!1,attr:!1,sel:!1}}]],
table:[["[table]{SELTEXT}[/table]",{seltext:{rgx:!1,attr:!1,sel:!1}}]]},smileList:[],attrWrap:["src","color","href"]};this.inited=this.options.onlyBBmode;this.options.themePrefix||b("link").each(b.proxy(function(a,c){a=b(c).get(0).href.match(/(.*\/)(.*)\/wbbtheme\.css.*$/);null!==a&&(this.options.themeName=a[2],this.options.themePrefix=a[1])},this));"undefined"!=typeof WBBPRESET&&(WBBPRESET.allButtons&&b.each(WBBPRESET.allButtons,b.proxy(function(a,b){b.transform&&this.options.allButtons[a]&&delete this.options.allButtons[a].transform},
this)),b.extend(!0,this.options,WBBPRESET));a&&a.allButtons&&b.each(a.allButtons,b.proxy(function(a,b){b.transform&&this.options.allButtons[a]&&delete this.options.allButtons[a].transform},this));b.extend(!0,this.options,a);this.init()};b.wysibb.prototype={lastid:1,init:function(){b.log("Init",this);/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent||
navigator.vendor||window.opera);this.isMobile=void 0;!0===this.options.onlyBBmode&&(this.options.bbmode=!0);this.controllers=[];this.options.buttons=this.options.buttons.toLowerCase();this.options.buttons=this.options.buttons.split(",");this.options.allButtons._systr={};this.options.allButtons._systr.transform=this.options.systr;this.smileFind();this.initTransforms();this.build();this.initModal();!0!==this.options.hotkeys||this.isMobile||this.initHotkeys();this.options.smileList&&0<this.options.smileList.length&&
this.options.smileList.sort(function(b,a){return a.bbcode.length-b.bbcode.length});this.$txtArea.parents("form").bind("submit",b.proxy(function(){this.sync();return!0},this));this.$txtArea.parents("form").find("input[id*='preview'],input[id*='submit'],input[class*='preview'],input[class*='submit'],input[name*='preview'],input[name*='submit']").bind("mousedown",b.proxy(function(){this.sync();setTimeout(b.proxy(function(){!1===this.options.bbmode&&this.$txtArea.removeAttr("wbbsync").val("")},this),
1E3)},this));this.options.initCallback&&this.options.initCallback.call(this);b.log(this)},initTransforms:function(){b.log("Create rules for transform HTML=>BB");var c=this.options;c.rules||(c.rules={});c.groups||(c.groups={});var a=c.buttons.slice();a.push("_systr");for(var d=0;d<a.length;d++){var e=c.allButtons[a[d]];if(e){e.en=!0;e.simplebbcode&&b.isArray(e.simplebbcode)&&2==e.simplebbcode.length&&(e.bbcode=e.html=e.simplebbcode[0]+"{SELTEXT}"+e.simplebbcode[1],e.transform&&delete e.transform,e.modal&&
delete e.modal);if("select"==e.type&&"string"==typeof e.options){var f=e.options.split(",");b.each(f,function(c,d){-1==b.inArray(d,a)&&a.push(d)})}if(e.transform&&!0!==e.skipRules){var f=b.extend({},e.transform),l;for(l in f){var g=l,h=f[l];e.bbSelector||(e.bbSelector=[]);-1==b.inArray(h,e.bbSelector)&&e.bbSelector.push(h);if(!1===this.options.onlyBBmode){l=this.wrapAttrs(l);var p=b(document.createElement("DIV")).append(b(this.elFromString(l,document))),n=this.filterByNode(p.children());if("div"==
n||"undefined"!=typeof c.rules[n])b.log("create unique selector: "+n),this.setUID(p.children()),n=this.filterByNode(p.children()),b.log("New rootSelector: "+n),g=p.html(),g=this.unwrapAttrs(g),l=this.unwrapAttrs(l),e.transform[g]=h,delete e.transform[l],l=g;e.excmd||(e.rootSelector||(e.rootSelector=[]),e.rootSelector.push(n));"undefined"==typeof c.rules[n]&&(c.rules[n]=[]);var r={};l.match(/\{\S+?\}/)&&(p.find("*").each(b.proxy(function(a,c){a=this.getAttributeList(c);b.each(a,b.proxy(function(a,
d){a=b(c).attr(d);"_"==d.substr(0,1)&&(d=d.substr(1));var e=a.match(/\{\S+?\}/g);if(e)for(var g=0;g<e.length;g++){var h=e[g].substr(1,e[g].length-2),h=h.replace(this.getValidationRGX(h),""),f=this.relFilterByNode(c,n),l=a!=e[g]?this.getRegexpReplace(a,e[g]):!1;r[h.toLowerCase()]={sel:f?b.trim(f):!1,attr:d,rgx:l}}},this));var d=[];b(c).is("iframe")||b(c).contents().filter(function(){return 3===this.nodeType}).each(b.proxy(function(a,e){a=e.textContent||e.data;if("undefined"==typeof a)return!0;var g=
a.match(/\{\S+?\}/g);if(g)for(var h=0;h<g.length;h++){var f=g[h].substr(1,g[h].length-2),f=f.replace(this.getValidationRGX(f),""),l=this.relFilterByNode(c,n),p=a!=g[h]?this.getRegexpReplace(a,g[h]):!1,l=l?b.trim(l):!1;if(-1<b.inArray(l,d)||1<b(e).parent().contents().size()){p=b("<span>").html("{"+f+"}");this.setUID(p,"wbb");var v=a.indexOf(f)+f.length+1,v=a.substr(v,a.length-v);e.data=a.substr(0,a.indexOf(f)-1);b(e).after(this.elFromString(v,document)).after(p);l=(l?l+" ":"")+this.filterByNode(p);
p=!1}r[f.toLowerCase()]={sel:l,attr:!1,rgx:p};d[d.length]=l}},this));d=null},this)),p=p.html(),p=this.unwrapAttrs(p),g!=p&&(delete e.transform[g],e.transform[p]=h,l=p));c.rules[n].push([h,r]);!0===e.onlyClearText&&(this.cleartext||(this.cleartext={}),this.cleartext[n]=a[d]);e.groupkey&&(c.groups[e.groupkey]||(c.groups[e.groupkey]=[]),c.groups[e.groupkey].push(n))}}e.rootSelector&&this.sortArray(e.rootSelector,-1);f=b.map(e.transform,function(a,b){return b}).sort(function(a,b){return(b[0]||"").length-
(a[0]||"").length});e.bbcode=e.transform[f[0]];e.html=f[0]}}}this.options.btnlist=a;b.extend(c.rules,this.options.customRules);c.srules={};this.options.smileList&&b.each(c.smileList,b.proxy(function(a,d){a=b(this.strf(d.img,c));a=this.filterByNode(a);c.srules[a]=[d.bbcode,d.img]},this));for(var v in c.rules)this.options.rules[v].sort(function(a,b){return b[0].length-a[0].length});this.rsellist=[];for(v in this.options.rules)this.rsellist.push(v);this.sortArray(this.rsellist,-1)},build:function(){b.log("Build editor");
this.$editor=b("<div>").addClass("wysibb");this.isMobile&&this.$editor.addClass("wysibb-mobile");this.options.direction&&this.$editor.css("direction",this.options.direction);this.$editor.insertAfter(this.txtArea).append(this.txtArea);this.startHeight=this.$txtArea.outerHeight();this.$txtArea.addClass("wysibb-texarea");this.buildToolbar();this.$txtArea.wrap('<div class="wysibb-text">');if(!1===this.options.onlyBBmode){var c=this.options.minheight||this.$txtArea.outerHeight();this.$body=b(this.strf('<div class="wysibb-text-editor" style="max-height:{maxheight}px;min-height:{height}px"></div>',
{maxheight:!0===this.options.autoresize?this.options.resize_maxheight:c,height:c})).insertAfter(this.$txtArea);this.body=this.$body[0];this.$txtArea.hide();32<c&&this.$toolbar.css("max-height",c);b.log("WysiBB loaded");this.$body.addClass("wysibb-body").addClass(this.options.bodyClass);this.options.direction&&this.$body.css("direction",this.options.direction);if("contentEditable"in this.body){this.body.contentEditable=!0;try{document.execCommand("StyleWithCSS",!1,!1),this.$body.append("<span></span>")}catch(a){}}else this.options.onlyBBmode=
this.options.bbmode=!0;0<this.txtArea.value.length&&this.txtAreaInitContent();this.$body.bind("keydown",b.proxy(function(a){if(86==a.which&&(1==a.ctrlKey||1==a.metaKey)||45==a.which&&(1==a.shiftKey||1==a.metaKey))return this.$pasteBlock||(this.saveRange(),this.$pasteBlock=b(this.elFromString('<div style="opacity:0;" contenteditable="true">\ufeff</div>')),this.$pasteBlock.appendTo(this.body),setTimeout(b.proxy(function(){this.clearPaste(this.$pasteBlock);var a="<span>"+this.$pasteBlock.html()+"</span>";
this.$body.attr("contentEditable","true");this.$pasteBlock.blur().remove();this.body.focus();this.cleartext&&(b.log("Check if paste to clearText Block"),this.isInClearTextBlock()&&(a=this.toBB(a).replace(/\n/g,"<br/>").replace(/\s{3}/g,'<span class="wbbtab"></span>')));a=a.replace(/\t/g,'<span class="wbbtab"></span>');this.selectRange(this.lastRange);this.insertAtCursor(a,!1);this.$pasteBlock=this.lastRange=!1},this),1),this.selectNode(this.$pasteBlock[0])),!0},this));this.$body.bind("keydown",b.proxy(function(a){13!=
a.which||this.isContain(this.getSelectNode(),"li")||(a.preventDefault&&a.preventDefault(),this.checkForLastBR(this.getSelectNode()),this.insertAtCursor("<br/>",!1))},this));!0===this.options.tabInsert&&this.$body.bind("keydown",b.proxy(this.pressTab,this));this.$body.bind("mouseup keyup",b.proxy(this.updateUI,this));this.$body.bind("mousedown",b.proxy(function(a){this.clearLastRange();this.checkForLastBR(a.target)},this));!0===this.options.traceTextarea&&(b(document).bind("mousedown",b.proxy(this.traceTextareaEvent,
this)),this.$txtArea.val(""));!0===this.options.hotkeys&&this.$body.bind("keydown",b.proxy(this.presskey,this));!0===this.options.smileConversion&&this.$body.bind("keyup",b.proxy(this.smileConversion,this));this.inited=!0;!0===this.options.autoresize&&(this.$bresize=b(this.elFromString('<div class="bottom-resize-line"></div>')).appendTo(this.$editor).wdrag({scope:this,axisY:!0,height:c}));this.imgListeners()}this.$txtArea.bind("mouseup keyup",b.proxy(function(){clearTimeout(this.uitimer);this.uitimer=
setTimeout(b.proxy(this.updateUI,this),100)},this));!0===this.options.hotkeys&&b(document).bind("keydown",b.proxy(this.presskey,this))},buildToolbar:function(){if(!1===this.options.toolbar)return!1;this.$toolbar=b("<div>").addClass("wysibb-toolbar").prependTo(this.$editor);var c;b.each(this.options.buttons,b.proxy(function(a,e){var f=this.options.allButtons[e];if(0==a||"|"==e||"-"==e)"-"==e&&this.$toolbar.append("<div>"),c=b('<div class="wysibb-toolbar-container">').appendTo(this.$toolbar);f&&("colorpicker"==
f.type?this.buildColorpicker(c,e,f):"table"==f.type?this.buildTablepicker(c,e,f):"select"==f.type?this.buildSelect(c,e,f):"smilebox"==f.type?this.buildSmilebox(c,e,f):this.buildButton(c,e,f))},this));this.$toolbar.find(".btn-tooltip").hover(function(){b(this).parent().css("overflow","hidden")},function(){b(this).parent().css("overflow","visible")});var a=b(document.createElement("div")).addClass("wysibb-toolbar-container modeSwitch").html('<div class="wysibb-toolbar-btn mswitch" unselectable="on"><span class="btn-inner modesw" unselectable="on">code</span></div>').appendTo(this.$toolbar);
1==this.options.bbmode&&a.children(".wysibb-toolbar-btn").addClass("on");!1===this.options.onlyBBmode&&a.children(".wysibb-toolbar-btn").click(b.proxy(function(a){b(a.currentTarget).toggleClass("on");this.modeSwitch()},this))},buildButton:function(c,a,d){"object"!=typeof c&&(c=this.$toolbar);var e=d.buttonHTML?b(this.strf(d.buttonHTML,this.options)).addClass("btn-inner"):this.strf('<span class="btn-inner btn-text">{text}</span>',{text:d.buttonText.replace(/</g,"&lt;")}),f=!0===this.options.hotkeys&&
!0===this.options.showHotkeys&&d.hotkey?' <span class="tthotkey">['+d.hotkey+"]</span>":"";c=b('<div class="wysibb-toolbar-btn wbb-'+a+'">').appendTo(c).append(e).append(this.strf('<span class="btn-tooltip">{title}<ins/>{hotkey}</span>',{title:d.title,hotkey:f}));this.controllers.push(c);c.bind("queryState",b.proxy(function(c){this.queryState(a)?b(c.currentTarget).addClass("on"):b(c.currentTarget).removeClass("on")},this));c.mousedown(b.proxy(function(c){c.preventDefault();this.execCommand(a,d.exvalue||
!1);b(c.currentTarget).trigger("queryState")},this))},buildColorpicker:function(c,a,d){var e=b('<div class="wysibb-toolbar-btn wbb-dropdown wbb-cp">').appendTo(c).append('<div class="ve-tlb-colorpick"><span class="fonticon">\ue010</span><span class="cp-line"></span></div><ins class="fonticon ar">\ue011</ins>').append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:d.title})),f=e.find(".cp-line");c=b('<div class="wbb-list">').appendTo(e);c.append('<div class="nc">'+CURLANG.auto+"</div>");
d=d.colors?d.colors.split(","):[];for(var l=0;l<d.length;l++)d[l]=b.trim(d[l]),"-"==d[l]?c.append('<span class="pl"></span>'):c.append(this.strf('<div class="sc" style="background:{color}" title="{color}"></div>',{color:d[l]}));var g=b(document.body).css("color");this.controllers.push(e);e.bind("queryState",b.proxy(function(b){f.css("background-color",g);if(b=this.queryState(a,!0))f.css("background-color",this.options.bbmode?b.color:b),e.find(".ve-tlb-colorpick span.fonticon").css("color",this.options.bbmode?
b.color:b)},this));e.mousedown(b.proxy(function(a){a.preventDefault();this.dropdownclick(".wbb-cp",".wbb-list",a)},this));e.find(".sc").mousedown(b.proxy(function(c){c.preventDefault();this.selectLastRange();c=b(c.currentTarget).attr("title");this.execCommand(a,c);e.trigger("queryState")},this));e.find(".nc").mousedown(b.proxy(function(b){b.preventDefault();this.selectLastRange();this.execCommand(a,g);e.trigger("queryState")},this));e.mousedown(function(a){a.preventDefault&&a.preventDefault()})},
buildTablepicker:function(c,a,d){c=b('<div class="wysibb-toolbar-btn wbb-dropdown wbb-tbl">').appendTo(c).append('<span class="btn-inner fonticon ve-tlb-table1">\ue00e</span><ins class="fonticon ar">\ue011</ins>').append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:d.title}));a=b('<div class="wbb-list">').appendTo(c);a=b("<div>").css({position:"relative","box-sizing":"border-box"}).appendTo(a);var e=d.rows||10,f=d.cols||10,l=e*f;a.css("height",e*d.cellwidth+2+"px");for(d=1;d<=
f;d++)for(var g=1;g<=e;g++){var h='<div class="tbl-sel" style="width:'+100*d/f+"%;height:"+100*g/e+"%;z-index:"+--l+'" title="'+g+","+d+'"></div>';a.append(h)}c.find(".tbl-sel").mousedown(b.proxy(function(a){a.preventDefault();a=b(a.currentTarget).attr("title").split(",");for(var c=this.options.bbmode?"[table]":'<table class="wbb-table" cellspacing="5" cellpadding="0">',d=1;d<=a[0];d++){for(var c=c+(this.options.bbmode?" [tr]\n":"<tr>"),e=1;e<=a[1];e++)c+=this.options.bbmode?"  [td][/td]\n":"<td>\ufeff</td>";
c+=this.options.bbmode?"[/tr]\n":"</tr>"}c+=this.options.bbmode?"[/table]":"</table>";this.insertAtCursor(c)},this));c.mousedown(b.proxy(function(a){a.preventDefault();this.dropdownclick(".wbb-tbl",".wbb-list",a)},this))},buildSelect:function(c,a,d){for(var e=b('<div class="wysibb-toolbar-btn wbb-select wbb-'+a+'">').appendTo(c).append(this.strf('<span class="val">{title}</span><ins class="fonticon sar">\ue012</ins>',d)).append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:d.title})),
f=b('<div class="wbb-list">').appendTo(e),l=e.find("span.val"),g=b.isArray(d.options)?d.options:d.options.split(","),h=this.isMobile?b("<select>").addClass("wbb-selectbox"):"",p=0;p<g.length;p++){var n=g[p];if("string"==typeof n){var r=this.options.allButtons[n];r&&(r.html?b("<span>").addClass("option").attr("oid",n).attr("cmdvalue",r.exvalue).appendTo(f).append(this.strf(r.html,{seltext:r.title})):f.append(this.strf('<span class="option" oid="'+n+'" cmdvalue="'+r.exvalue+'">{title}</span>',r)),this.isMobile&&
h.append(b("<option>").attr("oid",n).attr("cmdvalue",r.exvalue).append(r.title)))}else r={seltext:n.title},r[d.valueBBname]=n.exvalue,b("<span>").addClass("option").attr("oid",a).attr("cmdvalue",n.exvalue).appendTo(f).append(this.strf(d.html,r)),this.isMobile&&h.append(b("<option>").attr("oid",a).attr("cmdvalue",n.exvalue).append(n.exvalue))}this.isMobile&&(h.appendTo(c),this.controllers.push(h),h.bind("queryState",b.proxy(function(a){h.find("option").each(b.proxy(function(a,c){a=b(c);c=this.queryState(a.attr("oid"),
!0);var d=a.attr("cmdvalue");if(d&&c==a.attr("cmdvalue")||!d&&c)return a.prop("selected",!0),!1},this))},this)),h.change(b.proxy(function(a){a.preventDefault();var c=b(a.currentTarget).find(":selected"),d=c.attr("oid"),c=c.attr("cmdvalue");this.execCommand(d,this.options.allButtons[d].exvalue||c||!1);b(a.currentTarget).trigger("queryState")},this)));this.controllers.push(e);e.bind("queryState",b.proxy(function(a){l.text(d.title);e.find(".option.selected").removeClass("selected");e.find(".option").each(b.proxy(function(a,
c){a=b(c);c=this.queryState(a.attr("oid"),!0);var d=a.attr("cmdvalue");if(d&&c==a.attr("cmdvalue")||!d&&c)return l.text(a.text()),a.addClass("selected"),!1},this))},this));e.mousedown(b.proxy(function(a){a.preventDefault();this.dropdownclick(".wbb-select",".wbb-list",a)},this));e.find(".option").mousedown(b.proxy(function(a){a.preventDefault();var c=b(a.currentTarget).attr("oid"),d=b(a.currentTarget).attr("cmdvalue");this.execCommand(c,this.options.allButtons[c].exvalue||d||!1);b(a.currentTarget).trigger("queryState")},
this))},buildSmilebox:function(c,a,d){if(this.options.smileList&&0<this.options.smileList.length){var e=b(this.strf(d.buttonHTML,d)).addClass("btn-inner");c=b('<div class="wysibb-toolbar-btn wbb-smilebox wbb-'+a+'">').appendTo(c).append(e).append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:d.title}));var f=b('<div class="wbb-list">').appendTo(c);b.isArray(this.options.smileList)&&b.each(this.options.smileList,b.proxy(function(a,c){b("<span>").addClass("smile").appendTo(f).append(b(this.strf(c.img,
this.options)).attr("title",c.title))},this));c.mousedown(b.proxy(function(a){a.preventDefault();this.dropdownclick(".wbb-smilebox",".wbb-list",a)},this));c.find(".smile").mousedown(b.proxy(function(a){a.preventDefault();this.insertAtCursor(this.options.bbmode?this.toBB(b(a.currentTarget).html()):b(b(a.currentTarget).html()))},this))}},updateUI:function(c){(!c||8<=c.which&&46>=c.which||90<c.which||"mouseup"==c.type)&&b.each(this.controllers,b.proxy(function(a,b){b.trigger("queryState")},this));this.disNonActiveButtons()},
initModal:function(){this.$modal=b("#wbbmodal");0==this.$modal.size()&&(b.log("Init modal"),this.$modal=b("<div>").attr("id","wbbmodal").prependTo(document.body).html('<div class="wbbm"><div class="wbbm-title"><span class="wbbm-title-text"></span><span class="wbbclose" title="'+CURLANG.close+'">\u00d7</span></div><div class="wbbm-content"></div><div class="wbbm-bottom"><button id="wbbm-submit" class="wbb-button">'+CURLANG.save+'</button><button id="wbbm-cancel" class="wbb-cancel-button">'+CURLANG.cancel+
'</button><button id="wbbm-remove" class="wbb-remove-button">'+CURLANG.remove+"</button></div></div>").hide(),this.$modal.find("#wbbm-cancel,.wbbclose").click(b.proxy(this.closeModal,this)),this.$modal.bind("click",b.proxy(function(c){0==b(c.target).parents(".wbbm").size()&&this.closeModal()},this)),b(document).bind("keydown",b.proxy(this.escModal,this)))},initHotkeys:function(){b.log("initHotkeys");this.hotkeys=[];b.each(this.options.allButtons,b.proxy(function(c,a){if(a.hotkey&&(a=a.hotkey.split("+"))&&
2<=a.length){var d=0,e=a.pop();b.each(a,function(a,c){switch(b.trim(c.toLowerCase())){case "ctrl":d+=1;break;case "shift":d+=4;break;case "alt":d+=7}});0<d&&(this.hotkeys["m"+d]||(this.hotkeys["m"+d]=[]),this.hotkeys["m"+d]["k"+("0123456789       abcdefghijklmnopqrstuvwxyz".indexOf(e)+48)]=c)}},this))},presskey:function(b){if(1==b.ctrlKey||1==b.shiftKey||1==b.altKey){var a=(1==b.ctrlKey?1:0)+(1==b.shiftKey?4:0)+(1==b.altKey?7:0);if(this.hotkeys["m"+a]&&this.hotkeys["m"+a]["k"+b.which])return this.execCommand(this.hotkeys["m"+
a]["k"+b.which],!1),b.preventDefault(),!1}},execCommand:function(c,a){b.log("execCommand: "+c);var d=this.options.allButtons[c];if(!0!==d.en)return!1;var e=this.queryState(c,a),f=this.isInClearTextBlock();f&&f!=c||(d.excmd?this.options.bbmode?(b.log("Native command in bbmode: "+c),e&&1!=d.subInsert?this.wbbRemoveCallback(c,a):(e={},d.valueBBname&&a&&(e[d.valueBBname]=a),this.insertAtCursor(this.getBBCodeByCommand(c,e)))):this.execNativeCommand(d.excmd,a||!1):d.cmd?d.cmd.call(this,c,a,e):this.wbbExecCommand.call(this,
c,a,e),this.updateUI())},queryState:function(c,a){c=this.options.allButtons[c];if(!0!==c.en)return!1;if(this.options.bbmode){if(c.bbSelector)for(a=0;a<c.bbSelector.length;a++){var d=this.isBBContain(c.bbSelector[a]);if(d)return this.getParams(d,c.bbSelector[a],d[1])}return!1}if(c.excmd)if(a)try{return d=(document.queryCommandValue(c.excmd)+"").replace(/\'/g,""),"foreColor"==c.excmd&&(d=this.rgbToHex(d)),d}catch(e){return!1}else try{return("bold"==c.excmd||"italic"==c.excmd||"underline"==c.excmd||
"strikeThrough"==c.excmd)&&b(this.getSelectNode()).is("img")||"underline"==c.excmd&&0<b(this.getSelectNode()).closest("a").size()?!1:document.queryCommandState(c.excmd)}catch(e){return!1}else{if(b.isArray(c.rootSelector))for(a=0;a<c.rootSelector.length;a++)if(d=this.isContain(this.getSelectNode(),c.rootSelector[a]))return this.getParams(d,c.rootSelector[a]);return!1}},wbbExecCommand:function(c,a,d){b.log("wbbExecCommand");var e=this.options.allButtons[c];if(e)if(e.modal)b.isFunction(e.modal)?e.modal.call(this,
c,e.modal,d):this.showModal.call(this,c,e.modal,d);else if(d&&1!=e.subInsert)this.wbbRemoveCallback(c);else{if(e.groupkey&&(d=this.options.groups[e.groupkey])){var f=this.getSelectNode();b.each(d,b.proxy(function(a,c){if(a=this.isContain(f,c)){c=b("<span>").html(a.innerHTML);var d=this.setUID(c);b(a).replaceWith(c);this.selectNode(this.$editor.find("#"+d)[0]);return!1}},this))}this.wbbInsertCallback(c,a)}},wbbInsertCallback:function(c,a){"object"!=typeof a&&(a={});b.log("wbbInsertCallback: "+c);c=
this.getCodeByCommand(c,a);this.insertAtCursor(c);this.seltextID&&-1!=c.indexOf(this.seltextID)&&(c=this.$body.find("#"+this.seltextID)[0],this.selectNode(c),b(c).removeAttr("id"),this.seltextID=!1)},wbbRemoveCallback:function(c,a){b.log("wbbRemoveCallback: "+c);var d=this.options.allButtons[c];if(this.options.bbmode){this.getCursorPosBB();var e=0;b.each(d.bbSelector,b.proxy(function(c,d){c=d.match(/\{[\s\S]+?\}/g);b.each(c,function(a,b){if("{seltext}"==b.toLowerCase())return e=a,!1});if(d=this.isBBContain(d))return this.txtArea.value=
this.txtArea.value.substr(0,d[1])+this.txtArea.value.substr(d[1],this.txtArea.value.length-d[1]).replace(d[0][0],!0===a?"":d[0][e+1]),this.setCursorPosBB(d[1]),!1},this))}else{var f=this.getSelectNode();b.each(d.rootSelector,b.proxy(function(e,g){var h=this.isContain(f,g);if(!h)return!0;e=b(h);g=this.options.rules[g][0][1];if(e.is("span[wbb]")||!e.is("span,font"))!0!==a&&g&&g.seltext?(g&&g.seltext&&g.seltext.sel?(h=e.find(g.seltext.sel).html(),!0===d.onlyClearText&&(h=this.getHTML(h,!0,!0),h=h.replace(/\&#123;/g,
"{").replace(/\&#125;/g,"}"))):(h=e.html(),!0===d.onlyClearText&&(h=this.getHTML(h,!0),h=h.replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&#123;/g,"{").replace(/\&#125;/g,"}"))),e.replaceWith(h)):(this.setCursorByEl(e),e.remove());else{var p=this.getRange();g=this.getSelectText();this.getSelectNode();g=""==g?"\ufeff":this.clearFromSubInsert(g,c);g=this.elFromString(g);var n=window.getSelection?p.cloneRange():this.body.createTextRange(),r=window.getSelection?p.cloneRange():this.body.createTextRange();
window.getSelection?(this.insertAtCursor('<span id="wbbdivide"></span>'),p=e.find("span#wbbdivide").get(0),n.setStart(h.firstChild,0),n.setEndBefore(p),r.setStartAfter(p),r.setEndAfter(h.lastChild)):(n.moveToElementText(h),r.moveToElementText(h),n.setEndPoint("EndToStart",p),r.setEndPoint("StartToEnd",p));h=this.getSelectText(!1,n);r=this.getSelectText(!1,r);""!=r&&(r=e.clone().html(r),e.after(r));!0!==a&&e.after(g);window.getSelection?(e.html(h),!0!==a&&this.selectNode(g)):e.replaceWith(h)}return!1},
this))}},execNativeCommand:function(c,a){this.body.focus();if("insertHTML"!=c||window.getSelection)if("insertHTML"==c){c=this.getSelection();a=this.elFromString(a);var d=this.lastRange?this.lastRange:this.getRange();d.deleteContents();d.insertNode(a);d.collapse(!1);c.removeAllRanges();c.addRange(d)}else"undefined"==typeof a&&(a=!1),this.lastRange&&(b.log("Last range select"),this.selectLastRange()),document.execCommand(c,!1,a);else c=this.lastRange?this.lastRange:document.selection.createRange(),
c.pasteHTML(a),a=b("<div>").html(a).text(),d=a.indexOf("\ufeff"),-1<d&&(c.moveStart("character",-1*(a.length-d)),c.select()),this.lastRange=!1},getCodeByCommand:function(b,a){return this.options.bbmode?this.getBBCodeByCommand(b,a):this.getHTMLByCommand(b,a)},getBBCodeByCommand:function(c,a){if(!this.options.allButtons[c])return"";"undefined"==typeof a&&(a={});a=this.keysToLower(a);a.seltext||(a.seltext=this.getSelectText(!0));var d=this.options.allButtons[c].bbcode,d=d.replace(/\{(.*?)(\[.*?\])*\}/g,
function(b,c,d){if(d){var e;d&&(e=new RegExp(d+"+","i"));if("undefined"!=typeof a[c.toLowerCase()]&&null===a[c.toLowerCase()].toString().match(e))return""}return"undefined"==typeof a[c.toLowerCase()]?"":a[c.toLowerCase()]}),e=null,f=0;if(this.options.allButtons[c].transform){var l=[];b.each(this.options.allButtons[c].transform,function(a,b){l.push(b)});l=this.sortArray(l,-1);b.each(l,function(b,c){var d=!0,l=0,r={};c=c.replace(/\{(.*?)(\[.*?\])*\}/g,function(b,c,e){var g;c=c.toLowerCase();e&&(g=new RegExp(e+
"+","i"));if("undefined"==typeof a[c.toLowerCase()]||e&&null===a[c.toLowerCase()].toString().match(g))d=!1;"undefined"==typeof a[c]||r[c]||(r[c]=1,l++);return"undefined"==typeof a[c.toLowerCase()]?"":a[c.toLowerCase()]});d&&l>f&&(e=c,f=l)})}return e||d},getHTMLByCommand:function(c,a){if(!this.options.allButtons[c])return"";a=this.keysToLower(a);"undefined"==typeof a&&(a={});a.seltext||(a.seltext=this.getSelectText(!1),""==a.seltext?a.seltext="\ufeff":(a.seltext=this.clearFromSubInsert(a.seltext,c),
!0===this.options.allButtons[c].onlyClearText&&(a.seltext=this.toBB(a.seltext).replace(/\</g,"&lt;").replace(/\n/g,"<br/>").replace(/\s{3}/g,'<span class="wbbtab"></span>'))));var d="";this.seltextID="wbbid_"+ ++this.lastid;"link"!=c&&"img"!=c?a.seltext='<span id="'+this.seltextID+'">'+a.seltext+"</span>":d='<span id="'+this.seltextID+'">\ufeff</span>';var e=this.options.allButtons[c].html,e=e.replace(/\{(.*?)(\[.*?\])*\}/g,function(b,c,d){return d&&(b=new RegExp(d+"+","i"),"undefined"!=typeof a[c.toLowerCase()]&&
null===a[c.toLowerCase()].toString().match(b))?"":"undefined"==typeof a[c.toLowerCase()]?"":a[c.toLowerCase()]}),f=null,l=0;if(this.options.allButtons[c].transform){var g=[];b.each(this.options.allButtons[c].transform,function(a,b){g.push(a)});g=this.sortArray(g,-1);b.each(g,function(b,c){var d=!0,e=0,g={};c=c.replace(/\{(.*?)(\[.*?\])*\}/g,function(b,c,h){var f;c=c.toLowerCase();h&&(f=new RegExp(h+"+","i"));if("undefined"==typeof a[c]||h&&null===a[c].toString().match(f))d=!1;"undefined"==typeof a[c]||
g[c]||(g[c]=1,e++);return"undefined"==typeof a[c]?"":a[c]});d&&e>l&&(f=c,l=e)})}return(f||e)+d},getSelection:function(){if(window.getSelection)return window.getSelection();if(document.selection)return document.selection.createRange()},getSelectText:function(c,a){if(c)return this.txtArea.focus(),"selectionStart"in this.txtArea?this.txtArea.value.substr(this.txtArea.selectionStart,this.txtArea.selectionEnd-this.txtArea.selectionStart):document.selection.createRange().text;this.body.focus();a||(a=this.getRange());
if(window.getSelection){if(a)return b("<div>").append(a.cloneContents()).html()}else return a.htmlText;return""},getRange:function(){if(window.getSelection){var b=this.getSelection();if(b.getRangeAt&&0<b.rangeCount)return b.getRangeAt(0);if(b.anchorNode){var a=document.createRange();a.setStart(b.anchorNode,b.anchorOffset);a.setEnd(b.focusNode,b.focusOffset);return a}}else return document.selection.createRange()},insertAtCursor:function(c,a){"string"!=typeof c&&(c=b("<div>").append(c).html());if(this.options.bbmode&&
"undefined"==typeof a||!0===a){a=c.replace(/.*(\[\/\S+?\])$/,"$1");a=this.getCursorPosBB()+(-1!=c.indexOf(a)&&c.match(/\[.*\]/)?c.indexOf(a):c.length);if(document.selection)this.txtArea.focus(),this.getSelection().text=c;else if(this.txtArea.selectionStart||"0"==this.txtArea.selectionStart)this.txtArea.value=this.txtArea.value.substring(0,this.txtArea.selectionStart)+c+this.txtArea.value.substring(this.txtArea.selectionEnd,this.txtArea.value.length);0>a&&(a=0);this.setCursorPosBB(a)}else this.execNativeCommand("insertHTML",
c),c=this.getSelectNode(),b(c).closest("table,tr,td")||this.splitPrevNext(c)},getSelectNode:function(c){this.body.focus();c||(c=this.getRange());if(!c)return this.$body;c=window.getSelection?c.commonAncestorContainer:c.parentElement();b(c).is(".imgWrap")&&(c=b(c).children("img")[0]);return c},getCursorPosBB:function(){var b;if("selectionStart"in this.txtArea)b=this.txtArea.selectionStart;else{this.txtArea.focus();b=this.getRange();var a=document.body.createTextRange();a.moveToElementText(this.txtArea);
a.setEndPoint("EndToStart",b);b=a.text.length}return b},setCursorPosBB:function(b){if(this.options.bbmode)if(window.getSelection)this.txtArea.selectionStart=b,this.txtArea.selectionEnd=b;else{var a=this.txtArea.createTextRange();a.collapse(!0);a.move("character",b);a.select()}},selectNode:function(b,a){a||(a=this.getRange());if(a)if(window.getSelection){var d=this.getSelection();a.selectNodeContents(b);d.removeAllRanges();d.addRange(a)}else a.moveToElementText(b),a.select()},selectRange:function(b){if(b)if(window.getSelection){var a=
this.getSelection();a.removeAllRanges();a.addRange(b)}else b.select()},cloneRange:function(b){if(b)return window.getSelection?b.cloneRange():b.duplicate()},getRangeClone:function(){return this.cloneRange(this.getRange())},saveRange:function(){this.setBodyFocus();this.lastRange=this.getRangeClone()},selectLastRange:function(){this.lastRange&&(this.body.focus(),this.selectRange(this.lastRange),this.lastRange=!1)},setBodyFocus:function(){b.log("Set focus to WysiBB editor");this.options.bbmode?this.$txtArea.is(":focus")||
this.$txtArea.focus():this.$body.is(":focus")||this.$body.focus()},clearLastRange:function(){this.lastRange=!1},filterByNode:function(c){var a=b(c),d=a.get(0).tagName.toLowerCase();c=this.getAttributeList(a.get(0));b.each(c,b.proxy(function(c,f){c=a.attr(f);"_"==f.substr(0,1)&&(f=f.substr(1,f.length));if(c&&!c.match(/\{.*?\}/))"style"==f?(c=a.attr(f),c=c.split(";"),b.each(c,function(a,c){c&&0<c.length&&(d+="["+f+'*="'+b.trim(c)+'"]')})):d+="["+f+'="'+c+'"]';else if(c&&"style"==f){var l=c.substr(0,
c.indexOf("{"));l&&""!=l&&(c=c.substr(0,c.indexOf("{")),c=c.split(";"),b.each(c,function(a,b){d+="["+f+'*="'+b+'"]'}))}else d+="["+f+"]"},this));0<a.parent().children(d).index(a)&&(d+=":eq("+a.index()+")");return d},relFilterByNode:function(c,a){var d="";for(b.each(this.options.attrWrap,function(b,c){a=a.replace("["+c,"[_"+c)});c&&"BODY"!=c.tagName&&!b(c).is(a);)d=this.filterByNode(c)+" "+d,c&&(c=c.parentNode);return d},getRegexpReplace:function(b,a){return b=b.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\)/g,
"\\$1").replace(/\s+/g,"\\s+").replace(a.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\)/g,"\\$1"),"(.+)").replace(/\{\S+?\}/g,".*")},getBBCode:function(){if(!this.options.rules||this.options.bbmode)return this.$txtArea.val();this.clearEmpty();this.removeLastBodyBR();return this.toBB(this.$body.html())},toBB:function(c){if(!c)return"";var a="string"==typeof c?b("<span>").html(c):b(c);a.find("div,blockquote,p").each(function(){3!=this.nodeType&&this.lastChild&&"BR"==this.lastChild.tagName&&b(this.lastChild).remove()});
a.is("div,blockquote,p")&&3!=a[0].nodeType&&a[0].lastChild&&"BR"==a[0].lastChild.tagName&&b(a[0].lastChild).remove();a.find("ul > br, table > br, tr > br").remove();var d="";b.each(this.options.srules,b.proxy(function(b,c){a.find(b).replaceWith(c[0])},this));a.contents().each(b.proxy(function(a,c){var l=b(c);if(3===c.nodeType)d+=c.data.replace(/\n+/,"").replace(/\t/g,"   ");else{for(var g=0;g<this.rsellist.length;g++)if(a=this.rsellist[g],l&&l.is(a)){var h=this.options.rules[a];for(a=0;a<h.length;a++){var p=
h[a][0],n=h[a][1],r=!1,v=!1;l.is("br")||(p=p.replace(/\n/g,"<br>"));p=p.replace(/\{(.*?)(\[.*?\])*\}/g,b.proxy(function(a,d,e){a=n[d.toLowerCase()];"undefined"==typeof a&&(b.log("Param: {"+d+"} not found in HTML representation."),r=!0);e=a.sel?b(c).find(a.sel):b(c);if(a.attr&&!e.attr(a.attr))return r=!0,d;var g=a.attr?e.attr(a.attr):e.html();if("undefined"==typeof g||null==g)return r=!0,d;(d=a.rgx)&&"style"==a.attr&&";"!=d.substr(d.length-1,1)&&(d+=";");"style"==a.attr&&g&&";"!=g.substr(g.length-
1,1)&&(g+=";");if(d=d?new RegExp(d,""):!1)g.match(d)?(d=g.match(d))&&2==d.length&&(g=d[1]):g="";if(a.attr&&!1===r)if("style"==a.attr){v=!0;var h="",p=a.rgx.replace(/^\.\*\?/,"").replace(/\.\*$/,"").replace(/;$/,"");b(e.attr("style").split(";")).each(function(a,b){b&&""!=b&&(b.match(p)||(h+=b+";"))});""==h?e.removeAttr("style"):e.attr("style",h)}else!1===a.rgx&&(v=!0,e.removeAttr(a.attr));l.is("table,tr,td,font")&&(v=!0);return g||""},this));if(!r)if(l.is("img,br,hr")){d+=p;l=null;break}else if(v&&
!l.attr("notkeep"))l.is("table,tr,td")?(p=this.fixTableTransform(p),d+=this.toBB(b("<span>").html(p)),l=null):l.empty().html("<span>"+p+"</span>");else{l.is("iframe")?d+=p:(l.empty().html(p),d+=this.toBB(l),l=null);break}}}if(!l||l.is("iframe,img"))return!0;d+=this.toBB(l)}},this));d.replace(/\uFEFF/g,"");return d},getHTML:function(c,a,d){if(!this.options.bbmode&&!a)return this.$body.html();d||(c=c.replace(/</g,"&lt;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;"));c=c.replace(/\[code\]([\s\S]*?)\[\/code\]/g,
function(a){a=a.substr(6,a.length-6-7).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;");return"[code]"+a+"[/code]"});b.each(this.options.btnlist,b.proxy(function(a,d){if("|"!=d&&"-"!=d){if(!this.options.allButtons[d]||!this.options.allButtons[d].transform)return!0;b.each(this.options.allButtons[d].transform,b.proxy(function(a,d){a=a.replace(/\n/g,"");var e=[];d=d.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\|\\)/g,"\\$1");d=d.replace(/\{(.*?)(\\\[.*?\\\])*\}/gi,b.proxy(function(a,b,c){e.push(b);return c?(c=c.replace(/\\/g,
""),"("+c+"*?)"):"([\\s\\S]*?)"},this));for(var f;null!=(f=(new RegExp(d,"mgi")).exec(c));)if(f){var n={};b.each(e,b.proxy(function(a,b){n[b]=f[a+1]},this));var r=a,r=r.replace(/\{(.*?)(\[.*?\])\}/g,"{$1}"),r=this.strf(r,n);c=c.replace(f[0],r)}},this))}},this));b.each(this.options.systr,function(a,b){b=b.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\|\\)/g,"\\$1").replace(" ","\\s");c=c.replace(new RegExp(b,"g"),a)});a=b(this.elFromString("<div>"+c+"</div>"));this.getHTMLSmiles(a);return a.html()},getHTMLSmiles:function(c){b(c).contents().filter(function(){return 3==
this.nodeType}).each(b.proxy(this.smileRPL,this))},smileRPL:function(c,a){var d=a.data;b.each(this.options.smileList,b.proxy(function(c,f){c=d.indexOf(f.bbcode);if(-1!=c){var l=d.substring(c+f.bbcode.length,d.length),l=document.createTextNode(l);a.data=d=a.data.substr(0,c);b(a).after(l).after(this.strf(f.img,this.options));this.getHTMLSmiles(a.parentNode);return!1}this.getHTMLSmiles(a)},this))},setUID:function(c,a){var d="wbbid_"+ ++this.lastid;c&&b(c).attr(a||"id",d);return d},keysToLower:function(c){b.each(c,
function(a,b){a!=a.toLowerCase()&&(delete c[a],c[a.toLowerCase()]=b)});return c},strf:function(c,a){a=this.keysToLower(b.extend({},a));return c.replace(/\{([\w\.]*)\}/g,function(c,e){e=e.toLowerCase();c=e.split(".");var f=a[c.shift().toLowerCase()];b.each(c,function(){f=f[this]});return null===f||void 0===f?"":f})},elFromString:function(c){if(-1!=c.indexOf("<")&&-1!=c.indexOf(">")){var a=document.createElement("SPAN");b(a).html(c);this.setUID(a,"wbb");return 1<b(a).contents().size()?a:a.firstChild}return document.createTextNode(c)},
isContain:function(c,a){for(;c&&!b(c).hasClass("wysibb");){if(b(c).is(a))return c;if(c)c=c.parentNode;else return null}},isBBContain:function(b){var a=this.getCursorPosBB();b=this.prepareRGX(b);b=new RegExp(b,"g");for(var d,e=0;null!=(d=b.exec(this.txtArea.value));){e=this.txtArea.value.indexOf(d[0],e);if(a>e&&a<e+d[0].length)return[d,e];e+=1}},prepareRGX:function(b){return b.replace(/(\[|\]|\)|\(|\.|\*|\?|\:|\||\\)/g,"\\$1").replace(/\{.*?\}/g,"([\\s\\S]*?)")},checkForLastBR:function(c){3==c.nodeType&&
(c=c.parentNode);c=b(c);c.is("span[id*='wbbid']")&&(c=c.parent());if(!1===this.options.bbmode&&c.is("div,blockquote,code")&&0<c.contents().size()){var a=c[0].lastChild;(!a||a&&"BR"!=a.tagName)&&c.append("<br/>")}0<this.$body.contents().size()&&"BR"!=this.body.lastChild.tagName&&this.$body.append("<br/>")},getAttributeList:function(c){var a=[];b.each(c.attributes,function(b,c){c.specified&&a.push(c.name)});return a},clearFromSubInsert:function(c,a){if(this.options.allButtons[a]&&this.options.allButtons[a].rootSelector){var d=
b("<div>").html(c);b.each(this.options.allButtons[a].rootSelector,b.proxy(function(a,c){var l=!1;"undefined"!=typeof this.options.rules[c][0][1].seltext&&(l=this.options.rules[c][0][1].seltext.sel);var g=!0;d.find("*").each(function(){b(this).is(c)&&(l&&l.sel?b(this).replaceWith(b(this).find(l.sel.toLowerCase()).html()):b(this).replaceWith(b(this).html()),g=!1)});return g},this));return d.html()}return c},splitPrevNext:function(c){3==c.nodeType&&(c=c.parentNode);var a=this.filterByNode(c).replace(/\:eq.*$/g,
"");b(c.nextSibling).is(a)&&(b(c).append(b(c.nextSibling).html()),b(c.nextSibling).remove());b(c.previousSibling).is(a)&&(b(c).prepend(b(c.previousSibling).html()),b(c.previousSibling).remove())},modeSwitch:function(){this.options.bbmode?(this.$body.html(this.getHTML(this.$txtArea.val())),this.$txtArea.hide().removeAttr("wbbsync").val(""),this.$body.css("min-height",this.$txtArea.height()).show().focus()):(this.$txtArea.val(this.getBBCode()).css("min-height",this.$body.height()),this.$body.hide(),
this.$txtArea.show().focus());this.options.bbmode=!this.options.bbmode},clearEmpty:function(){function c(){if(!b(this).is("span,font,a,b,i,u,s"))return!1;if(!b(this).hasClass("wbbtab")&&0==b.trim(b(this).html()).length||0<b(this).children().size()&&(b(this).children().filter(c).remove(),0==b(this).html().length&&"BODY"!=this.tagName))return!0}this.$body.children().filter(c).remove()},dropdownclick:function(c,a,d){var e=b(d.currentTarget).closest(c);e.hasClass("dis")||(e.attr("wbbshow")?(e.removeAttr("wbbshow"),
b(document).unbind("mousedown",this.dropdownhandler),document&&b(document).unbind("mousedown",this.dropdownhandler),this.lastRange=!1):(this.saveRange(),this.$editor.find("*[wbbshow]").each(function(a,c){b(c).removeClass("on").find(b(c).attr("wbbshow")).hide().end().removeAttr("wbbshow")}),e.attr("wbbshow",a),b(document.body).bind("mousedown",b.proxy(function(b){this.dropdownhandler(e,c,a,b)},this)),this.$body&&this.$body.bind("mousedown",b.proxy(function(b){this.dropdownhandler(e,c,a,b)},this))),
e.find(a).toggle(),e.toggleClass("on"))},dropdownhandler:function(c,a,d,e){0==b(e.target).parents(a).size()&&(c.removeClass("on").find(d).hide(),b(document).unbind("mousedown",this.dropdownhandler),this.$body&&this.$body.unbind("mousedown",this.dropdownhandler))},rgbToHex:function(b){if("#"==b.substr(0,1))return b;if(-1==b.indexOf("rgb"))return b=parseInt(b),"#"+((b&255)<<16|b&65280|(b&16711680)>>>16).toString(16);b=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(b);return"#"+this.dec2hex(parseInt(b[2]))+
this.dec2hex(parseInt(b[3]))+this.dec2hex(parseInt(b[4]))},dec2hex:function(b){return 15<b?b.toString(16):"0"+b.toString(16)},sync:function(){this.options.bbmode?this.$body.html(this.getHTML(this.txtArea.value,!0)):this.$txtArea.attr("wbbsync",1).val(this.getBBCode())},clearPaste:function(c){var a=b(c);b.each(this.options.rules,b.proxy(function(c,e){var f=a.find(c).attr("wbbkeep",1);0<f.size()&&b.each(e[0][1],function(a,b){b.sel&&f.find(b.sel).attr("wbbkeep",1)})},this));a.find("*[wbbkeep!='1']").each(b.proxy(function(a,
c){a=b(c);!a.is("div,p")||0!=a.children().size()&&"BR"==c.lastChild.tagName||a.after("<br/>")},this));a.find("*[wbbkeep]").removeAttr("wbbkeep").removeAttr("style");b.log(a.html());a.html(this.getHTML(this.toBB(a),!0));b.log(a.html())},sortArray:function(b,a){b.sort(function(b,c){return(b.length-c.length)*(a||1)});return b},smileFind:function(){if(this.options.smilefind){var c=b(this.options.smilefind).find("img[alt]");0<c.size()&&(this.options.smileList=[],c.each(b.proxy(function(a,c){a=b(c);this.options.smileList.push({title:a.attr("title"),
bbcode:a.attr("alt"),img:a.removeAttr("alt").removeAttr("title")[0].outerHTML})},this)))}},destroy:function(){this.$editor.replaceWith(this.$txtArea);this.$txtArea.removeClass("wysibb-texarea").show();this.$modal.remove();this.$txtArea.data("wbb",null)},pressTab:function(b){b&&9==b.which&&(b.preventDefault&&b.preventDefault(),this.options.bbmode?this.insertAtCursor("   ",!1):this.insertAtCursor('<span class="wbbtab">\ufeff</span>',!1))},removeLastBodyBR:function(){this.body.lastChild&&3!=this.body.lastChild.nodeType&&
"BR"==this.body.lastChild.tagName&&(this.body.removeChild(this.body.lastChild),this.removeLastBodyBR())},traceTextareaEvent:function(c){0==b(c.target).closest("div.wysibb").size()&&(b(document.activeElement).is("div.wysibb-body")&&this.saveRange(),setTimeout(b.proxy(function(){var a=this.$txtArea.val();!1!==this.options.bbmode||""==a||0!=b(c.target).closest("div.wysibb").size()||this.$txtArea.attr("wbbsync")||(this.selectLastRange(),this.insertAtCursor(this.getHTML(a,!0)),this.$txtArea.val(""));b(document.activeElement).is("div.wysibb-body")&&
(this.lastRange=!1)},this),100))},txtAreaInitContent:function(){this.$body.html(this.getHTML(this.txtArea.value,!0))},getValidationRGX:function(b){return b.match(/\[\S+\]/)?b.replace(/.*(\\*\[\S+\]).*/,"$1"):""},smileConversion:function(){if(this.options.smileList&&0<this.options.smileList.length){var c=this.getSelectNode();if(3==c.nodeType){var a=c.data;2<=a.length&&!this.isInClearTextBlock(c)&&0==b(c).parents("a").size()&&b.each(this.options.srules,b.proxy(function(d,e){var f=e[0];d=a.indexOf(f);
if(-1!=d){var f=a.substring(d+f.length,a.length),f=document.createTextNode(f),l=document.createElement("SPAN");c.data=c.data.substr(0,d);b(c).after(f).after(l).after(this.strf(e[1],this.options));this.selectNode(l);return!1}},this))}}},isInClearTextBlock:function(){if(this.cleartext){var c=!1;b.each(this.cleartext,b.proxy(function(a,b){if(this.queryState(b))return c=b,!1},this));return c}return!1},wrapAttrs:function(c){b.each(this.options.attrWrap,function(a,b){c=c.replace(b+'="',"_"+b+'="')});return c},
unwrapAttrs:function(c){b.each(this.options.attrWrap,function(a,b){c=c.replace("_"+b+'="',b+'="')});return c},disNonActiveButtons:function(){this.isInClearTextBlock()?this.$toolbar.find(".wysibb-toolbar-btn:not(.on,.mswitch)").addClass("dis"):this.$toolbar.find(".wysibb-toolbar-btn.dis").removeClass("dis")},setCursorByEl:function(c){var a=document.createTextNode("\ufeff");b(c).after(a);this.selectNode(a)},imgListeners:function(){b(document).on("mousedown",b.proxy(this.imgEventHandler,this))},imgEventHandler:function(c){c=
b(c.target);this.hasWrapedImage&&(0==c.closest(".wbb-img,#wbbmodal").size()||c.hasClass("wbb-cancel-button"))&&(this.$body.find(".imgWrap ").each(function(){b.log("Removed imgWrap block");b(this).replaceWith(b(this).find("img"))}),this.hasWrapedImage=!1,this.updateUI());c.is("img")&&0<c.closest(".wysibb-body").size()&&(c.wrap("<span class='imgWrap'></span>"),this.hasWrapedImage=c,this.$body.focus(),this.selectNode(c.parent()[0]))},showModal:function(c,a,d){b.log("showModal: "+c);this.saveRange();
var e=this.$modal.find(".wbbm-content").html(""),f=this.$modal.find(".wbbm").removeClass("hastabs");this.$modal.find("span.wbbm-title-text").html(a.title);if(a.tabs&&1<a.tabs.length){f.addClass("hastabs");var l=b('<div class="wbbm-tablist">').appendTo(e).append("<ul>").children("ul");b.each(a.tabs,b.proxy(function(a,b){0==a&&(b.on="on");l.append(this.strf("<li class=\"{on}\" onClick=\"$(this).parent().find('.on').removeClass('on');$(this).addClass('on');$(this).parents('.wbbm-content').find('.tab-cont').hide();$(this).parents('.wbbm-content').find('.tab"+
a+"').show()\">{title}</li>",b))},this))}a.width&&f.css("width",a.width);var g=b('<div class="wbbm-cont">').appendTo(e);d?f.find("#wbbm-remove").show():f.find("#wbbm-remove").hide();b.each(a.tabs,b.proxy(function(a,c){var e=b("<div>").addClass("tab-cont tab"+a).attr("tid",a).appendTo(g);0<a&&e.hide();c.html?e.html(this.strf(c.html,this.options)):b.each(c.input,b.proxy(function(a,c){c.value=d[c.param.toLowerCase()];"seltext"!=c.param.toLowerCase()||c.value&&""!=c.value||(c.value=this.getSelectText(this.options.bbmode));
c.value&&0==c.value.indexOf("<span id='wbbid")&&b(c.value).is("span[id*='wbbid']")&&(c.value=b(c.value).html());c.type&&"div"==c.type?e.append(this.strf('<div class="wbbm-inp-row"><label>{title}</label><div class="inp-text div-modal-text" contenteditable="true" name="{param}">{value}</div></div>',c)):e.append(this.strf('<div class="wbbm-inp-row"><label>{title}</label><input class="inp-text modal-text" type="text" name="{param}" value="{value}"/></div>',c))},this))},this));b.isFunction(a.onLoad)&&
a.onLoad.call(this,c,a,d);f.find("#wbbm-submit").click(b.proxy(function(){if(!b.isFunction(a.onSubmit)||!1!==a.onSubmit.call(this,c,a,d)){var e={},g=!0;this.$modal.find(".wbbm-inperr").remove();this.$modal.find(".wbbm-brdred").removeClass("wbbm-brdred");b.each(this.$modal.find(".tab-cont:visible .inp-text"),b.proxy(function(c,d){var f=b(d).parents(".tab-cont").attr("tid"),l=b(d).attr("name").toLowerCase(),z;z=b(d).is("input,textrea,select")?b(d).val():b(d).html();c=a.tabs[f].input[c].validation;"undefined"==
typeof c||z.match(new RegExp(c,"i"))||(g=!1,b(d).after('<span class="wbbm-inperr">'+CURLANG.validation_err+"</span>").addClass("wbbm-brdred"));e[l]=z},this));g&&(b.log("Last range: "+this.lastRange),this.selectLastRange(),d&&this.wbbRemoveCallback(c,!0),this.wbbInsertCallback(c,e),this.closeModal(),this.updateUI())}},this));f.find("#wbbm-remove").click(b.proxy(function(){this.selectLastRange();this.wbbRemoveCallback(c);this.closeModal();this.updateUI()},this));b(document.body).css("overflow","hidden");
b("body").height()>b(window).height()&&b(document.body).css("padding-right","18px");this.$modal.show();this.isMobile?f.css("margin-top","10px"):f.css("margin-top",(b(window).height()-f.outerHeight())/3+"px");setTimeout(b.proxy(function(){this.$modal.find(".inp-text:visible")[0].focus()},this),10)},escModal:function(b){27==b.which&&this.closeModal()},closeModal:function(){b(document.body).css("overflow","auto").css("padding-right","0").unbind("keyup",this.escModal);this.$modal.find("#wbbm-submit,#wbbm-remove").unbind("click");
this.$modal.hide();this.lastRange=!1;return this},getParams:function(c,a,d){var e={};if(this.options.bbmode){var f=a.match(/\{[\s\S]+?\}/g);a=this.prepareRGX(a);a=new RegExp(a,"g");var l=this.txtArea.value;0<d&&(l=l.substr(d,l.length-d));var g=a.exec(l);g&&b.each(f,function(a,b){e[b.replace(/\{|\}/g,"").replace(/"/g,"'").toLowerCase()]=g[a+1]})}else b.each(this.options.rules[a][0][1],b.proxy(function(a,d){var g;g=!1!==d.sel?b(c).find(d.sel):b(c);if(g=!1!==d.attr?g.attr(d.attr):g.html())!1!==d.rgx&&
(d=g.match(new RegExp(d.rgx)))&&2==d.length&&(g=d[1]),e[a]=g.replace(/"/g,"'")},this));return e},imgLoadModal:function(){b.log("imgLoadModal");!0===this.options.imgupload?(this.$modal.find("#imguploader").dragfileupload({url:this.strf(this.options.img_uploadurl,this.options),extraParams:{maxwidth:this.options.img_maxwidth,maxheight:this.options.img_maxheight},themePrefix:this.options.themePrefix,themeName:this.options.themeName,success:b.proxy(function(b){this.$txtArea.insertImage(b.image_link,b.thumb_link);
this.closeModal();this.updateUI()},this)}),this.$modal.find("#fileupl").bind("change",function(){b("#fupform").submit()}),this.$modal.find("#fupform").bind("submit",b.proxy(function(c){b(c.target).parents("#imguploader").hide().after('<div class="loader"><img src="'+this.options.themePrefix+"/"+this.options.themeName+'/img/loader.gif" /><br/><span>'+CURLANG.loading+"</span></div>").parent().css("text-align","center")},this))):(this.$modal.find(".hastabs").removeClass("hastabs"),this.$modal.find("#imguploader").parents(".tab-cont").remove(),
this.$modal.find(".wbbm-tablist").remove())},imgSubmitModal:function(){b.log("imgSubmitModal")},printObjectInIE:function(c){try{b.log(JSON.stringify(c))}catch(a){}},checkFilter:function(c,a){b.log("node: "+b(c).get(0).outerHTML+" filter: "+a+" res: "+b(c).is(a.toLowerCase()))},debug:function(c){if(!0===this.options.debug){var a=(new Date).getTime();"undefined"!=typeof console?console.log(a-this.startTime+" ms: "+c):b("#exlog").append("<p>"+(a-this.startTime)+" ms: "+c+"</p>");this.startTime=a}},isChrome:function(){return window.chrome?
!0:!1},fixTableTransform:function(c){return c?-1==b.inArray("table",this.options.buttons)?c.replace(/\<(\/*?(table|tr|td|tbody))[^>]*\>/ig,""):c.replace(/\<(\/*?(table|tr|td))[^>]*\>/ig,"[$1]").replace(/\<\/*tbody[^>]*\>/ig,""):""}};b.log=function(c){"undefined"!=typeof wbbdebug&&!0===wbbdebug&&("undefined"!=typeof console?console.log(c):b("#exlog").append("<p>"+c+"</p>"))};b.fn.wysibb=function(c){return this.each(function(){b(this).data("wbb")||new b.wysibb(this,c)})};b.fn.wdrag=function(c){c.scope||
(c.scope=this);var a=0,d=0,e,f;c.scope.drag_mousedown=function(l){l.preventDefault();a=l.pageY;d=c.height;e=c.scope.$body.height();f=!0;b(document).bind("mousemove",b.proxy(c.scope.drag_mousemove,this));b(this).addClass("drag")};c.scope.drag_mouseup=function(a){!0===f&&(a.preventDefault(),b(document).unbind("mousemove",c.scope.drag_mousemove),b(this).removeClass("drag"),f=!1)};c.scope.drag_mousemove=function(b){b.preventDefault();var g=0;c.axisY&&(g=b.pageY-a);0!=g&&(b=e+g,b>d&&b<=c.scope.options.resize_maxheight&&
(1==c.scope.options.bbmode?c.scope.$txtArea.css(!0===c.scope.options.autoresize?"min-height":"height",b+"px"):c.scope.$body.css(!0===c.scope.options.autoresize?"min-height":"height",b+"px")))};b(this).bind("mousedown",c.scope.drag_mousedown);b(document).bind("mouseup",b.proxy(c.scope.drag_mouseup,this))};b.fn.getDoc=function(){return this.data("wbb").doc};b.fn.getSelectText=function(b){return this.data("wbb").getSelectText(b)};b.fn.bbcode=function(b){return"undefined"!=typeof b?(this.data("wbb").options.bbmode?
this.data("wbb").$txtArea.val(b):this.data("wbb").$body.html(this.data("wbb").getHTML(b)),this):this.data("wbb").getBBCode()};b.fn.htmlcode=function(b){if(!this.data("wbb").options.onlyBBMode&&!0===this.data("wbb").inited)return"undefined"!=typeof b?(this.data("wbb").$body.html(b),this):this.data("wbb").getHTML(this.data("wbb").$txtArea.val())};b.fn.getBBCode=function(){return this.data("wbb").getBBCode()};b.fn.getHTML=function(){var b=this.data("wbb");return b.getHTML(b.$txtArea.val())};b.fn.getHTMLByCommand=
function(b,a){return this.data("wbb").getHTMLByCommand(b,a)};b.fn.getBBCodeByCommand=function(b,a){return this.data("wbb").getBBCodeByCommand(b,a)};b.fn.insertAtCursor=function(b,a){this.data("wbb").insertAtCursor(b,a);return this.data("wbb")};b.fn.execCommand=function(b,a){this.data("wbb").execCommand(b,a);return this.data("wbb")};b.fn.insertImage=function(b,a){var d=this.data("wbb");b=a?d.getCodeByCommand("link",{url:b,seltext:d.getCodeByCommand("img",{src:a})}):d.getCodeByCommand("img",{src:b});
this.insertAtCursor(b);return d};b.fn.sync=function(){this.data("wbb").sync();return this.data("wbb")};b.fn.destroy=function(){this.data("wbb").destroy()};b.fn.queryState=function(b){return this.data("wbb").queryState(b)}})(jQuery);
(function(b){function c(a,c){this.$block=b(a);this.opt=b.extend({url:!1,success:!1,extraParams:!1,fileParam:"img",validation:".(jpg|png|gif|jpeg)$",t1:CURLANG.fileupload_text1,t2:CURLANG.fileupload_text2},c)}b.fn.dragfileupload=function(a){return this.each(function(){(new c(this,a)).init()})};c.prototype={init:function(){if(null!=window.FormData){this.$block.addClass("drag");this.$block.prepend('<div class="p2">'+this.opt.t2+"</div>");this.$block.prepend('<div class="p">'+this.opt.t1+"</div>");this.$block.bind("dragover",
function(){b(this).addClass("dragover");return!1});this.$block.bind("dragleave",function(){b(this).removeClass("dragover");return!1});var a=b.proxy(function(a){a=parseInt(a.loaded/a.total*100,10);this.$loader.children("span").text(CURLANG.loading+": "+a+"%")},this),c=jQuery.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",a,!1);this.$block[0].ondrop=b.proxy(function(a){a.preventDefault();this.$block.removeClass("dragover");a=a.dataTransfer.files[0];if(this.opt.validation&&!a.name.match(new RegExp(this.opt.validation)))return this.error(CURLANG.validation_err),
!1;var f=new FormData;f.append(this.opt.fileParam,a);this.opt.extraParams&&b.each(this.opt.extraParams,function(a,b){f.append(a,b)});this.$loader=b('<div class="loader"><img src="'+this.opt.themePrefix+"/"+this.opt.themeName+'/img/loader.gif" /><br/><span>'+CURLANG.loading+"</span></div>");this.$block.html(this.$loader);b.ajax({type:"POST",url:this.opt.url,data:f,processData:!1,contentType:!1,xhr:function(){return c},dataType:"json",success:b.proxy(function(a){a&&1==a.status?this.opt.success(a):this.error(a.msg||
CURLANG.error_onupload)},this),error:b.proxy(function(a,b,c){this.error(CURLANG.error_onupload)},this)})},this)}},error:function(a){this.$block.find(".upl-error").remove().end().append('<span class="upl-error">'+a+"</span>").addClass("wbbm-brdred")}}})(jQuery);"undefined"==typeof WBBLANG&&(WBBLANG={});
WBBLANG.ru=CURLANG={bold:"\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439",italic:"\u041a\u0443\u0440\u0441\u0438\u0432",underline:"\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439",strike:"\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439",link:"\u0421\u0441\u044b\u043b\u043a\u0430",img:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",sup:"\u041d\u0430\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",
sub:"\u041f\u043e\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",justifyleft:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e \u043b\u0435\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",justifycenter:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",justifyright:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",table:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443",
bullist:"\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",numlist:"\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",quote:"\u0426\u0438\u0442\u0430\u0442\u0430",offtop:"\u041e\u0444\u0444\u0442\u043e\u043f",code:"\u041a\u043e\u0434",spoiler:"\u0421\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",fontcolor:"\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430",
fontsize:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430",fontfamily:"\u0428\u0440\u0438\u0444\u0442 \u0442\u0435\u043a\u0441\u0442\u0430",fs_verysmall:"\u041e\u0447\u0435\u043d\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439",fs_small:"\u041c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439",fs_normal:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439",fs_big:"\u0411\u043e\u043b\u044c\u0448\u043e\u0439",fs_verybig:"\u041e\u0447\u0435\u043d\u044c \u0431\u043e\u043b\u044c\u0448\u043e\u0439",
smilebox:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043c\u0430\u0439\u043b",video:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e",removeFormat:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",modal_link_title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",modal_link_text:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",
modal_link_url:"URL \u0441\u0441\u044b\u043b\u043a\u0438",modal_email_text:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u0439 \u044d\u043b.\u0430\u0434\u0440\u0435\u0441",modal_email_url:"Email",modal_link_tab1:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c URL",modal_img_title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",modal_img_tab1:"\u0412\u0432\u0435\u0441\u0442\u0438 URL",modal_img_tab2:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b",
modal_imgsrc_text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",modal_img_btn:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438",add_attach:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435",modal_video_text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0432\u0438\u0434\u0435\u043e",
close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",validation_err:"\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b",error_onupload:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u0442\u0430\u043a\u043e\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f",
fileupload_text1:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441\u044e\u0434\u0430",fileupload_text2:"\u0438\u043b\u0438",loading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",auto:"\u0410\u0432\u0442\u043e",views:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432",downloads:"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0439",sm1:"\u0423\u043b\u044b\u0431\u043a\u0430",sm2:"\u0421\u043c\u0435\u0445",sm3:"\u041f\u043e\u0434\u043c\u0438\u0433\u0438\u0432\u0430\u043d\u0438\u0435",
sm4:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u043a\u043b\u0430\u0441\u0441",sm5:"\u0420\u0443\u0433\u0430\u044e",sm6:"\u0428\u043e\u043a",sm7:"\u0417\u043b\u043e\u0439",sm8:"\u041e\u0433\u043e\u0440\u0447\u0435\u043d\u0438\u0435",sm9:"\u0422\u043e\u0448\u043d\u0438\u0442"};
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"undefined"!==typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){var c=window.Slick||{},c=function(){var a=0;return function(c,e){this.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:b(c),appendDots:b(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',
autoplay:!1,autoplaySpeed:3E3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,c){return b('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,
slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1E3};this.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,
touchObject:{},transformsEnabled:!1,unslicked:!1};b.extend(this,this.initials);this.animProp=this.animType=this.activeBreakpoint=null;this.breakpoints=[];this.breakpointSettings=[];this.interrupted=this.focussed=this.cssTransitions=!1;this.hidden="hidden";this.paused=!0;this.respondTo=this.positionProp=null;this.rowCount=1;this.shouldClick=!0;this.$slider=b(c);this.transitionType=this.transformType=this.$slidesCache=null;this.visibilityChange="visibilitychange";this.windowWidth=0;this.windowTimer=
null;c=b(c).data("slick")||{};this.options=b.extend({},this.defaults,e,c);this.currentSlide=this.options.initialSlide;this.originalSettings=this.options;"undefined"!==typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange");this.autoPlay=b.proxy(this.autoPlay,this);this.autoPlayClear=b.proxy(this.autoPlayClear,this);this.autoPlayIterator=b.proxy(this.autoPlayIterator,
this);this.changeSlide=b.proxy(this.changeSlide,this);this.clickHandler=b.proxy(this.clickHandler,this);this.selectHandler=b.proxy(this.selectHandler,this);this.setPosition=b.proxy(this.setPosition,this);this.swipeHandler=b.proxy(this.swipeHandler,this);this.dragHandler=b.proxy(this.dragHandler,this);this.keyHandler=b.proxy(this.keyHandler,this);this.instanceUid=a++;this.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;this.registerBreakpoints();this.init(!0)}}();c.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};
c.prototype.addSlide=c.prototype.slickAdd=function(a,c,e){if("boolean"===typeof c)e=c,c=null;else if(0>c||c>=this.slideCount)return!1;this.unload();"number"===typeof c?0===c&&0===this.$slides.length?b(a).appendTo(this.$slideTrack):e?b(a).insertBefore(this.$slides.eq(c)):b(a).insertAfter(this.$slides.eq(c)):!0===e?b(a).prependTo(this.$slideTrack):b(a).appendTo(this.$slideTrack);this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);
this.$slides.each(function(a,c){b(c).attr("data-slick-index",a)});this.$slidesCache=this.$slides;this.reinit()};c.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var a=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:a},this.options.speed)}};c.prototype.animateSlide=function(a,c){var e={},f=this;f.animateHeight();!0===f.options.rtl&&!1===f.options.vertical&&(a=-a);!1===f.transformsEnabled?
!1===f.options.vertical?f.$slideTrack.animate({left:a},f.options.speed,f.options.easing,c):f.$slideTrack.animate({top:a},f.options.speed,f.options.easing,c):!1===f.cssTransitions?(!0===f.options.rtl&&(f.currentLeft=-f.currentLeft),b({animStart:f.currentLeft}).animate({animStart:a},{duration:f.options.speed,easing:f.options.easing,step:function(a){a=Math.ceil(a);e[f.animType]=!1===f.options.vertical?"translate("+a+"px, 0px)":"translate(0px,"+a+"px)";f.$slideTrack.css(e)},complete:function(){c&&c.call()}})):
(f.applyTransition(),a=Math.ceil(a),e[f.animType]=!1===f.options.vertical?"translate3d("+a+"px, 0px, 0px)":"translate3d(0px,"+a+"px, 0px)",f.$slideTrack.css(e),c&&setTimeout(function(){f.disableTransition();c.call()},f.options.speed))};c.prototype.getNavTarget=function(){var a=this.options.asNavFor;a&&null!==a&&(a=b(a).not(this.$slider));return a};c.prototype.asNavFor=function(a){var c=this.getNavTarget();null!==c&&"object"===typeof c&&c.each(function(){var c=b(this).slick("getSlick");c.unslicked||
c.slideHandler(a,!0)})};c.prototype.applyTransition=function(a){var b={};b[this.transitionType]=!1===this.options.fade?this.transformType+" "+this.options.speed+"ms "+this.options.cssEase:"opacity "+this.options.speed+"ms "+this.options.cssEase;!1===this.options.fade?this.$slideTrack.css(b):this.$slides.eq(a).css(b)};c.prototype.autoPlay=function(){this.autoPlayClear();this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))};c.prototype.autoPlayClear=
function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)};c.prototype.autoPlayIterator=function(){var a=this.currentSlide+this.options.slidesToScroll;this.paused||this.interrupted||this.focussed||(!1===this.options.infinite&&(1===this.direction&&this.currentSlide+1===this.slideCount-1?this.direction=0:0===this.direction&&(a=this.currentSlide-this.options.slidesToScroll,0===this.currentSlide-1&&(this.direction=1))),this.slideHandler(a))};c.prototype.buildArrows=function(){!0===this.options.arrows&&
(this.$prevArrow=b(this.options.prevArrow).addClass("slick-arrow"),this.$nextArrow=b(this.options.nextArrow).addClass("slick-arrow"),this.slideCount>this.options.slidesToShow?(this.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.prependTo(this.options.appendArrows),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.appendTo(this.options.appendArrows),
!0!==this.options.infinite&&this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):this.$prevArrow.add(this.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))};c.prototype.buildDots=function(){var a,c;if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow){this.$slider.addClass("slick-dotted");c=b("<ul />").addClass(this.options.dotsClass);for(a=0;a<=this.getDotCount();a+=1)c.append(b("<li />").append(this.options.customPaging.call(this,
this,a)));this.$dots=c.appendTo(this.options.appendDots);this.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}};c.prototype.buildOut=function(){this.$slides=this.$slider.children(this.options.slide+":not(.slick-cloned)").addClass("slick-slide");this.slideCount=this.$slides.length;this.$slides.each(function(a,c){b(c).attr("data-slick-index",a).data("originalStyling",b(c).attr("style")||"")});this.$slider.addClass("slick-slider");this.$slideTrack=0===this.slideCount?b('<div class="slick-track"/>').appendTo(this.$slider):
this.$slides.wrapAll('<div class="slick-track"/>').parent();this.$list=this.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();this.$slideTrack.css("opacity",0);if(!0===this.options.centerMode||!0===this.options.swipeToSlide)this.options.slidesToScroll=1;b("img[data-lazy]",this.$slider).not("[src]").addClass("slick-loading");this.setupInfinite();this.buildArrows();this.buildDots();this.updateDots();this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);
!0===this.options.draggable&&this.$list.addClass("draggable")};c.prototype.buildRows=function(){var a,b,c,f,l,g,h;f=document.createDocumentFragment();g=this.$slider.children();if(1<this.options.rows){h=this.options.slidesPerRow*this.options.rows;l=Math.ceil(g.length/h);for(a=0;a<l;a++){var p=document.createElement("div");for(b=0;b<this.options.rows;b++){var n=document.createElement("div");for(c=0;c<this.options.slidesPerRow;c++){var r=a*h+(b*this.options.slidesPerRow+c);g.get(r)&&n.appendChild(g.get(r))}p.appendChild(n)}f.appendChild(p)}this.$slider.empty().append(f);
this.$slider.children().children().children().css({width:100/this.options.slidesPerRow+"%",display:"inline-block"})}};c.prototype.checkResponsive=function(a,c){var e,f,l,g=!1;f=this.$slider.width();var h=window.innerWidth||b(window).width();"window"===this.respondTo?l=h:"slider"===this.respondTo?l=f:"min"===this.respondTo&&(l=Math.min(h,f));if(this.options.responsive&&this.options.responsive.length&&null!==this.options.responsive){f=null;for(e in this.breakpoints)this.breakpoints.hasOwnProperty(e)&&
(!1===this.originalSettings.mobileFirst?l<this.breakpoints[e]&&(f=this.breakpoints[e]):l>this.breakpoints[e]&&(f=this.breakpoints[e]));if(null!==f)if(null!==this.activeBreakpoint){if(f!==this.activeBreakpoint||c)this.activeBreakpoint=f,"unslick"===this.breakpointSettings[f]?this.unslick(f):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[f]),!0===a&&(this.currentSlide=this.options.initialSlide),this.refresh(a)),g=f}else this.activeBreakpoint=f,"unslick"===this.breakpointSettings[f]?
this.unslick(f):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[f]),!0===a&&(this.currentSlide=this.options.initialSlide),this.refresh(a)),g=f;else null!==this.activeBreakpoint&&(this.activeBreakpoint=null,this.options=this.originalSettings,!0===a&&(this.currentSlide=this.options.initialSlide),this.refresh(a),g=f);a||!1===g||this.$slider.trigger("breakpoint",[this,g])}};c.prototype.changeSlide=function(a,c){var e=b(a.currentTarget),f;e.is("a")&&a.preventDefault();e.is("li")||
(e=e.closest("li"));f=0!==this.slideCount%this.options.slidesToScroll?0:(this.slideCount-this.currentSlide)%this.options.slidesToScroll;switch(a.data.message){case "previous":e=0===f?this.options.slidesToScroll:this.options.slidesToShow-f;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide-e,!1,c);break;case "next":e=0===f?this.options.slidesToScroll:f;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide+e,!1,c);break;case "index":a=0===a.data.index?
0:a.data.index||e.index()*this.options.slidesToScroll,this.slideHandler(this.checkNavigable(a),!1,c),e.children().trigger("focus")}};c.prototype.checkNavigable=function(a){var b,c;b=this.getNavigableIndexes();c=0;if(a>b[b.length-1])a=b[b.length-1];else for(var f in b){if(a<b[f]){a=c;break}c=b[f]}return a};c.prototype.cleanUpEvents=function(){this.options.dots&&null!==this.$dots&&b("li",this.$dots).off("click.slick",this.changeSlide).off("mouseenter.slick",b.proxy(this.interrupt,this,!0)).off("mouseleave.slick",
b.proxy(this.interrupt,this,!1));this.$slider.off("focus.slick blur.slick");!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow&&this.$prevArrow.off("click.slick",this.changeSlide),this.$nextArrow&&this.$nextArrow.off("click.slick",this.changeSlide));this.$list.off("touchstart.slick mousedown.slick",this.swipeHandler);this.$list.off("touchmove.slick mousemove.slick",this.swipeHandler);this.$list.off("touchend.slick mouseup.slick",this.swipeHandler);this.$list.off("touchcancel.slick mouseleave.slick",
this.swipeHandler);this.$list.off("click.slick",this.clickHandler);b(document).off(this.visibilityChange,this.visibility);this.cleanUpSlideEvents();!0===this.options.accessibility&&this.$list.off("keydown.slick",this.keyHandler);!0===this.options.focusOnSelect&&b(this.$slideTrack).children().off("click.slick",this.selectHandler);b(window).off("orientationchange.slick.slick-"+this.instanceUid,this.orientationChange);b(window).off("resize.slick.slick-"+this.instanceUid,this.resize);b("[draggable!=true]",
this.$slideTrack).off("dragstart",this.preventDefault);b(window).off("load.slick.slick-"+this.instanceUid,this.setPosition)};c.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",b.proxy(this.interrupt,this,!0));this.$list.off("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.cleanUpRows=function(){var a;1<this.options.rows&&(a=this.$slides.children().children(),a.removeAttr("style"),this.$slider.empty().append(a))};c.prototype.clickHandler=function(a){!1===this.shouldClick&&
(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())};c.prototype.destroy=function(a){this.autoPlayClear();this.touchObject={};this.cleanUpEvents();b(".slick-cloned",this.$slider).detach();this.$dots&&this.$dots.remove();this.$prevArrow&&this.$prevArrow.length&&(this.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove());this.$nextArrow&&
this.$nextArrow.length&&(this.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove());this.$slides&&(this.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){b(this).attr("style",b(this).data("originalStyling"))}),this.$slideTrack.children(this.options.slide).detach(),
this.$slideTrack.detach(),this.$list.detach(),this.$slider.append(this.$slides));this.cleanUpRows();this.$slider.removeClass("slick-slider");this.$slider.removeClass("slick-initialized");this.$slider.removeClass("slick-dotted");this.unslicked=!0;a||this.$slider.trigger("destroy",[this])};c.prototype.disableTransition=function(a){var b={};b[this.transitionType]="";!1===this.options.fade?this.$slideTrack.css(b):this.$slides.eq(a).css(b)};c.prototype.fadeSlide=function(a,b){var c=this;!1===c.cssTransitions?
(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a);b.call()},c.options.speed))};c.prototype.fadeSlideOut=function(a){!1===this.cssTransitions?this.$slides.eq(a).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(a),this.$slides.eq(a).css({opacity:0,
zIndex:this.options.zIndex-2}))};c.prototype.filterSlides=c.prototype.slickFilter=function(a){null!==a&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(a).appendTo(this.$slideTrack),this.reinit())};c.prototype.focusHandler=function(){var a=this;a.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var e=b(this);setTimeout(function(){a.options.pauseOnFocus&&
(a.focussed=e.is(":focus"),a.autoPlay())},0)})};c.prototype.getCurrent=c.prototype.slickCurrentSlide=function(){return this.currentSlide};c.prototype.getDotCount=function(){var a=0,b=0,c=0;if(!0===this.options.infinite)for(;a<this.slideCount;)++c,a=b+this.options.slidesToScroll,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;else if(!0===this.options.centerMode)c=this.slideCount;else if(this.options.asNavFor)for(;a<this.slideCount;)++c,
a=b+this.options.slidesToScroll,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;else c=1+Math.ceil((this.slideCount-this.options.slidesToShow)/this.options.slidesToScroll);return c-1};c.prototype.getLeft=function(a){var b,c=0;this.slideOffset=0;b=this.$slides.first().outerHeight(!0);!0===this.options.infinite?(this.slideCount>this.options.slidesToShow&&(this.slideOffset=this.slideWidth*this.options.slidesToShow*-1,c=b*this.options.slidesToShow*
-1),0!==this.slideCount%this.options.slidesToScroll&&a+this.options.slidesToScroll>this.slideCount&&this.slideCount>this.options.slidesToShow&&(a>this.slideCount?(this.slideOffset=(this.options.slidesToShow-(a-this.slideCount))*this.slideWidth*-1,c=(this.options.slidesToShow-(a-this.slideCount))*b*-1):(this.slideOffset=this.slideCount%this.options.slidesToScroll*this.slideWidth*-1,c=this.slideCount%this.options.slidesToScroll*b*-1))):a+this.options.slidesToShow>this.slideCount&&(this.slideOffset=
(a+this.options.slidesToShow-this.slideCount)*this.slideWidth,c=(a+this.options.slidesToShow-this.slideCount)*b);this.slideCount<=this.options.slidesToShow&&(c=this.slideOffset=0);!0===this.options.centerMode&&this.slideCount<=this.options.slidesToShow?this.slideOffset=this.slideWidth*Math.floor(this.options.slidesToShow)/2-this.slideWidth*this.slideCount/2:!0===this.options.centerMode&&!0===this.options.infinite?this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2)-this.slideWidth:
!0===this.options.centerMode&&(this.slideOffset=0,this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2));b=!1===this.options.vertical?a*this.slideWidth*-1+this.slideOffset:a*b*-1+c;!0===this.options.variableWidth&&(c=this.slideCount<=this.options.slidesToShow||!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(a):this.$slideTrack.children(".slick-slide").eq(a+this.options.slidesToShow),b=!0===this.options.rtl?c[0]?-1*(this.$slideTrack.width()-c[0].offsetLeft-
c.width()):0:c[0]?-1*c[0].offsetLeft:0,!0===this.options.centerMode&&(c=this.slideCount<=this.options.slidesToShow||!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(a):this.$slideTrack.children(".slick-slide").eq(a+this.options.slidesToShow+1),b=!0===this.options.rtl?c[0]?-1*(this.$slideTrack.width()-c[0].offsetLeft-c.width()):0:c[0]?-1*c[0].offsetLeft:0,b+=(this.$list.width()-c.outerWidth())/2));return b};c.prototype.getOption=c.prototype.slickGetOption=function(a){return this.options[a]};
c.prototype.getNavigableIndexes=function(){var a=0,b=0,c=[],f;!1===this.options.infinite?f=this.slideCount:(a=-1*this.options.slidesToScroll,b=-1*this.options.slidesToScroll,f=2*this.slideCount);for(;a<f;)c.push(a),a=b+this.options.slidesToScroll,b+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return c};c.prototype.getSlick=function(){return this};c.prototype.getSlideCount=function(){var a=this,c,e,f;f=!0===a.options.centerMode?a.slideWidth*
Math.floor(a.options.slidesToShow/2):0;return!0===a.options.swipeToSlide?(a.$slideTrack.find(".slick-slide").each(function(c,d){if(d.offsetLeft-f+b(d).outerWidth()/2>-1*a.swipeLeft)return e=d,!1}),c=Math.abs(b(e).attr("data-slick-index")-a.currentSlide)||1):a.options.slidesToScroll};c.prototype.goTo=c.prototype.slickGoTo=function(a,b){this.changeSlide({data:{message:"index",index:parseInt(a)}},b)};c.prototype.init=function(a){b(this.$slider).hasClass("slick-initialized")||(b(this.$slider).addClass("slick-initialized"),
this.buildRows(),this.buildOut(),this.setProps(),this.startLoad(),this.loadSlider(),this.initializeEvents(),this.updateArrows(),this.updateDots(),this.checkResponsive(!0),this.focusHandler());a&&this.$slider.trigger("init",[this]);!0===this.options.accessibility&&this.initADA();this.options.autoplay&&(this.paused=!1,this.autoPlay())};c.prototype.initADA=function(){var a=this;a.$slides.add(a.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});
a.$slideTrack.attr("role","listbox");a.$slides.not(a.$slideTrack.find(".slick-cloned")).each(function(c){b(this).attr("role","option");c=a.options.centerMode?c:Math.floor(c/a.options.slidesToShow);!0===a.options.dots&&b(this).attr("aria-describedby","slick-slide"+a.instanceUid+c+"")});null!==a.$dots&&a.$dots.attr("role","tablist").find("li").each(function(c){b(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+a.instanceUid+c+"",id:"slick-slide"+a.instanceUid+c+""})}).first().attr("aria-selected",
"true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar");a.activateADA()};c.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.off("click.slick").on("click.slick",{message:"next"},this.changeSlide))};c.prototype.initDotEvents=function(){if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow)b("li",
this.$dots).on("click.slick",{message:"index"},this.changeSlide);if(!0===this.options.dots&&!0===this.options.pauseOnDotsHover)b("li",this.$dots).on("mouseenter.slick",b.proxy(this.interrupt,this,!0)).on("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",b.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",b.proxy(this.interrupt,this,!1)))};c.prototype.initializeEvents=function(){this.initArrowEvents();
this.initDotEvents();this.initSlideEvents();this.$list.on("touchstart.slick mousedown.slick",{action:"start"},this.swipeHandler);this.$list.on("touchmove.slick mousemove.slick",{action:"move"},this.swipeHandler);this.$list.on("touchend.slick mouseup.slick",{action:"end"},this.swipeHandler);this.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},this.swipeHandler);this.$list.on("click.slick",this.clickHandler);b(document).on(this.visibilityChange,b.proxy(this.visibility,this));if(!0===this.options.accessibility)this.$list.on("keydown.slick",
this.keyHandler);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",this.selectHandler);b(window).on("orientationchange.slick.slick-"+this.instanceUid,b.proxy(this.orientationChange,this));b(window).on("resize.slick.slick-"+this.instanceUid,b.proxy(this.resize,this));b("[draggable!=true]",this.$slideTrack).on("dragstart",this.preventDefault);b(window).on("load.slick.slick-"+this.instanceUid,this.setPosition);b(document).ready(this.setPosition)};c.prototype.initUI=function(){!0===
this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()};c.prototype.keyHandler=function(a){a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===a.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?
"previous":"next"}}))};c.prototype.lazyLoad=function(){function a(a){b("img[data-lazy]",a).each(function(){var a=b(this),e=b(this).attr("data-lazy"),g=b(this).attr("data-srcset"),h=b(this).attr("data-sizes")||c.$slider.attr("data-sizes"),f=document.createElement("img");f.onload=function(){a.animate({opacity:0},100,function(){g&&(a.attr("srcset",g),h&&a.attr("sizes",h));a.attr("src",e).animate({opacity:1},200,function(){a.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")});
c.$slider.trigger("lazyLoaded",[c,a,e])})};f.onerror=function(){a.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");c.$slider.trigger("lazyLoadError",[c,a,e])};f.src=e})}var c=this,e,f,l;!0===c.options.centerMode?!0===c.options.infinite?(f=c.currentSlide+(c.options.slidesToShow/2+1),l=f+c.options.slidesToShow+2):(f=Math.max(0,c.currentSlide-(c.options.slidesToShow/2+1)),l=2+(c.options.slidesToShow/2+1)+c.currentSlide):(f=c.options.infinite?c.options.slidesToShow+
c.currentSlide:c.currentSlide,l=Math.ceil(f+c.options.slidesToShow),!0===c.options.fade&&(0<f&&f--,l<=c.slideCount&&l++));e=c.$slider.find(".slick-slide").slice(f,l);if("anticipated"===c.options.lazyLoad){--f;for(var g=c.$slider.find(".slick-slide"),h=0;h<c.options.slidesToScroll;h++)0>f&&(f=c.slideCount-1),e=e.add(g.eq(f)),e=e.add(g.eq(l)),f--,l++}a(e);c.slideCount<=c.options.slidesToShow?(e=c.$slider.find(".slick-slide"),a(e)):c.currentSlide>=c.slideCount-c.options.slidesToShow?(e=c.$slider.find(".slick-cloned").slice(0,
c.options.slidesToShow),a(e)):0===c.currentSlide&&(e=c.$slider.find(".slick-cloned").slice(-1*c.options.slidesToShow),a(e))};c.prototype.loadSlider=function(){this.setPosition();this.$slideTrack.css({opacity:1});this.$slider.removeClass("slick-loading");this.initUI();"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()};c.prototype.next=c.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})};c.prototype.orientationChange=function(){this.checkResponsive();this.setPosition()};
c.prototype.pause=c.prototype.slickPause=function(){this.autoPlayClear();this.paused=!0};c.prototype.play=c.prototype.slickPlay=function(){this.autoPlay();this.options.autoplay=!0;this.interrupted=this.focussed=this.paused=!1};c.prototype.postSlide=function(a){this.unslicked||(this.$slider.trigger("afterChange",[this,a]),this.animating=!1,this.setPosition(),this.swipeLeft=null,this.options.autoplay&&this.autoPlay(),!0===this.options.accessibility&&this.initADA())};c.prototype.prev=c.prototype.slickPrev=
function(){this.changeSlide({data:{message:"previous"}})};c.prototype.preventDefault=function(a){a.preventDefault()};c.prototype.progressiveLazyLoad=function(a){a=a||1;var c=this,e=b("img[data-lazy]",c.$slider),f,l,g,h;e.length?(f=e.first(),l=f.attr("data-lazy"),g=f.attr("data-srcset"),h=f.attr("data-sizes")||c.$slider.attr("data-sizes"),e=document.createElement("img"),e.onload=function(){g&&(f.attr("srcset",g),h&&f.attr("sizes",h));f.attr("src",l).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading");
!0===c.options.adaptiveHeight&&c.setPosition();c.$slider.trigger("lazyLoaded",[c,f,l]);c.progressiveLazyLoad()},e.onerror=function(){3>a?setTimeout(function(){c.progressiveLazyLoad(a+1)},500):(f.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),c.$slider.trigger("lazyLoadError",[c,f,l]),c.progressiveLazyLoad())},e.src=l):c.$slider.trigger("allImagesLoaded",[c])};c.prototype.refresh=function(a){var c;c=this.slideCount-this.options.slidesToShow;!this.options.infinite&&
this.currentSlide>c&&(this.currentSlide=c);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);c=this.currentSlide;this.destroy(!0);b.extend(this,this.initials,{currentSlide:c});this.init();a||this.changeSlide({data:{message:"index",index:c}},!1)};c.prototype.registerBreakpoints=function(){var a=this,c,e,f,l=a.options.responsive||null;if("array"===b.type(l)&&l.length){a.respondTo=a.options.respondTo||"window";for(c in l)if(f=a.breakpoints.length-1,l.hasOwnProperty(c)){for(e=l[c].breakpoint;0<=
f;)a.breakpoints[f]&&a.breakpoints[f]===e&&a.breakpoints.splice(f,1),f--;a.breakpoints.push(e);a.breakpointSettings[e]=l[c].settings}a.breakpoints.sort(function(b,c){return a.options.mobileFirst?b-c:c-b})}};c.prototype.reinit=function(){this.$slides=this.$slideTrack.children(this.options.slide).addClass("slick-slide");this.slideCount=this.$slides.length;this.currentSlide>=this.slideCount&&0!==this.currentSlide&&(this.currentSlide-=this.options.slidesToScroll);this.slideCount<=this.options.slidesToShow&&
(this.currentSlide=0);this.registerBreakpoints();this.setProps();this.setupInfinite();this.buildArrows();this.updateArrows();this.initArrowEvents();this.buildDots();this.updateDots();this.initDotEvents();this.cleanUpSlideEvents();this.initSlideEvents();this.checkResponsive(!1,!0);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",this.selectHandler);this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);this.setPosition();this.focusHandler();
this.paused=!this.options.autoplay;this.autoPlay();this.$slider.trigger("reInit",[this])};c.prototype.resize=function(){var a=this;b(window).width()!==a.windowWidth&&(clearTimeout(a.windowDelay),a.windowDelay=window.setTimeout(function(){a.windowWidth=b(window).width();a.checkResponsive();a.unslicked||a.setPosition()},50))};c.prototype.removeSlide=c.prototype.slickRemove=function(a,b,c){a="boolean"===typeof a?!0===a?0:this.slideCount-1:!0===b?--a:a;if(1>this.slideCount||0>a||a>this.slideCount-1)return!1;
this.unload();!0===c?this.$slideTrack.children().remove():this.$slideTrack.children(this.options.slide).eq(a).remove();this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slidesCache=this.$slides;this.reinit()};c.prototype.setCSS=function(a){var b={},c,f;!0===this.options.rtl&&(a=-a);c="left"==this.positionProp?Math.ceil(a)+"px":"0px";f="top"==this.positionProp?Math.ceil(a)+"px":"0px";b[this.positionProp]=
a;!1!==this.transformsEnabled&&(b={},b[this.animType]=!1===this.cssTransitions?"translate("+c+", "+f+")":"translate3d("+c+", "+f+", 0px)");this.$slideTrack.css(b)};c.prototype.setDimensions=function(){!1===this.options.vertical?!0===this.options.centerMode&&this.$list.css({padding:"0px "+this.options.centerPadding}):(this.$list.height(this.$slides.first().outerHeight(!0)*this.options.slidesToShow),!0===this.options.centerMode&&this.$list.css({padding:this.options.centerPadding+" 0px"}));this.listWidth=
this.$list.width();this.listHeight=this.$list.height();!1===this.options.vertical&&!1===this.options.variableWidth?(this.slideWidth=Math.ceil(this.listWidth/this.options.slidesToShow),this.$slideTrack.width(Math.ceil(this.slideWidth*this.$slideTrack.children(".slick-slide").length))):!0===this.options.variableWidth?this.$slideTrack.width(5E3*this.slideCount):(this.slideWidth=Math.ceil(this.listWidth),this.$slideTrack.height(Math.ceil(this.$slides.first().outerHeight(!0)*this.$slideTrack.children(".slick-slide").length)));
var a=this.$slides.first().outerWidth(!0)-this.$slides.first().width();!1===this.options.variableWidth&&this.$slideTrack.children(".slick-slide").width(this.slideWidth-a)};c.prototype.setFade=function(){var a=this,c;a.$slides.each(function(e,f){c=a.slideWidth*e*-1;!0===a.options.rtl?b(f).css({position:"relative",right:c,top:0,zIndex:a.options.zIndex-2,opacity:0}):b(f).css({position:"relative",left:c,top:0,zIndex:a.options.zIndex-2,opacity:0})});a.$slides.eq(a.currentSlide).css({zIndex:a.options.zIndex-
1,opacity:1})};c.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var a=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",a)}};c.prototype.setOption=c.prototype.slickSetOption=function(a,c,e){var f=this,l,g,h,p=!1,n;"object"===b.type(a)?(g=a,p=c,n="multiple"):"string"===b.type(a)&&(g=a,h=c,p=e,"responsive"===a&&"array"===b.type(c)?n="responsive":"undefined"!==typeof c&&(n="single"));if("single"===
n)f.options[g]=h;else if("multiple"===n)b.each(g,function(a,b){f.options[a]=b});else if("responsive"===n)for(l in h)if("array"!==b.type(f.options.responsive))f.options.responsive=[h[l]];else{for(a=f.options.responsive.length-1;0<=a;)f.options.responsive[a].breakpoint===h[l].breakpoint&&f.options.responsive.splice(a,1),a--;f.options.responsive.push(h[l])}p&&(f.unload(),f.reinit())};c.prototype.setPosition=function(){this.setDimensions();this.setHeight();!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):
this.setFade();this.$slider.trigger("setPosition",[this])};c.prototype.setProps=function(){var a=document.body.style;this.positionProp=!0===this.options.vertical?"top":"left";"top"===this.positionProp?this.$slider.addClass("slick-vertical"):this.$slider.removeClass("slick-vertical");void 0===a.WebkitTransition&&void 0===a.MozTransition&&void 0===a.msTransition||!0!==this.options.useCSS||(this.cssTransitions=!0);this.options.fade&&("number"===typeof this.options.zIndex?3>this.options.zIndex&&(this.options.zIndex=
3):this.options.zIndex=this.defaults.zIndex);void 0!==a.OTransform&&(this.animType="OTransform",this.transformType="-o-transform",this.transitionType="OTransition",void 0===a.perspectiveProperty&&void 0===a.webkitPerspective&&(this.animType=!1));void 0!==a.MozTransform&&(this.animType="MozTransform",this.transformType="-moz-transform",this.transitionType="MozTransition",void 0===a.perspectiveProperty&&void 0===a.MozPerspective&&(this.animType=!1));void 0!==a.webkitTransform&&(this.animType="webkitTransform",
this.transformType="-webkit-transform",this.transitionType="webkitTransition",void 0===a.perspectiveProperty&&void 0===a.webkitPerspective&&(this.animType=!1));void 0!==a.msTransform&&(this.animType="msTransform",this.transformType="-ms-transform",this.transitionType="msTransition",void 0===a.msTransform&&(this.animType=!1));void 0!==a.transform&&!1!==this.animType&&(this.transformType=this.animType="transform",this.transitionType="transition");this.transformsEnabled=this.options.useTransform&&null!==
this.animType&&!1!==this.animType};c.prototype.setSlideClasses=function(a){var b,c,f;c=this.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");this.$slides.eq(a).addClass("slick-current");!0===this.options.centerMode?(b=Math.floor(this.options.slidesToShow/2),!0===this.options.infinite&&(a>=b&&a<=this.slideCount-1-b?this.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(f=this.options.slidesToShow+a,c.slice(f-
b+1,f+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?c.eq(c.length-1-this.options.slidesToShow).addClass("slick-center"):a===this.slideCount-1&&c.eq(this.options.slidesToShow).addClass("slick-center")),this.$slides.eq(a).addClass("slick-center")):0<=a&&a<=this.slideCount-this.options.slidesToShow?this.$slides.slice(a,a+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):c.length<=this.options.slidesToShow?c.addClass("slick-active").attr("aria-hidden",
"false"):(b=this.slideCount%this.options.slidesToShow,f=!0===this.options.infinite?this.options.slidesToShow+a:a,this.options.slidesToShow==this.options.slidesToScroll&&this.slideCount-a<this.options.slidesToShow?c.slice(f-(this.options.slidesToShow-b),f+b).addClass("slick-active").attr("aria-hidden","false"):c.slice(f,f+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==this.options.lazyLoad&&"anticipated"!==this.options.lazyLoad||this.lazyLoad()};c.prototype.setupInfinite=
function(){var a,c,e;!0===this.options.fade&&(this.options.centerMode=!1);if(!0===this.options.infinite&&!1===this.options.fade&&(c=null,this.slideCount>this.options.slidesToShow)){e=!0===this.options.centerMode?this.options.slidesToShow+1:this.options.slidesToShow;for(a=this.slideCount;a>this.slideCount-e;--a)c=a-1,b(this.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c-this.slideCount).prependTo(this.$slideTrack).addClass("slick-cloned");for(a=0;a<e;a+=1)c=a,b(this.$slides[c]).clone(!0).attr("id",
"").attr("data-slick-index",c+this.slideCount).appendTo(this.$slideTrack).addClass("slick-cloned");this.$slideTrack.find(".slick-cloned").find("[id]").each(function(){b(this).attr("id","")})}};c.prototype.interrupt=function(a){a||this.autoPlay();this.interrupted=a};c.prototype.selectHandler=function(a){a=b(a.target).is(".slick-slide")?b(a.target):b(a.target).parents(".slick-slide");(a=parseInt(a.attr("data-slick-index")))||(a=0);this.slideCount<=this.options.slidesToShow?(this.setSlideClasses(a),
this.asNavFor(a)):this.slideHandler(a)};c.prototype.slideHandler=function(a,b,c){var f,l,g=null,h=this;!0===h.animating&&!0===h.options.waitForAnimate||!0===h.options.fade&&h.currentSlide===a||h.slideCount<=h.options.slidesToShow||(!1===(b||!1)&&h.asNavFor(a),f=a,g=h.getLeft(f),b=h.getLeft(h.currentSlide),h.currentLeft=null===h.swipeLeft?b:h.swipeLeft,!1===h.options.infinite&&!1===h.options.centerMode&&(0>a||a>h.getDotCount()*h.options.slidesToScroll)?!1===h.options.fade&&(f=h.currentSlide,!0!==c?
h.animateSlide(b,function(){h.postSlide(f)}):h.postSlide(f)):!1===h.options.infinite&&!0===h.options.centerMode&&(0>a||a>h.slideCount-h.options.slidesToScroll)?!1===h.options.fade&&(f=h.currentSlide,!0!==c?h.animateSlide(b,function(){h.postSlide(f)}):h.postSlide(f)):(h.options.autoplay&&clearInterval(h.autoPlayTimer),l=0>f?0!==h.slideCount%h.options.slidesToScroll?h.slideCount-h.slideCount%h.options.slidesToScroll:h.slideCount+f:f>=h.slideCount?0!==h.slideCount%h.options.slidesToScroll?0:f-h.slideCount:
f,h.animating=!0,h.$slider.trigger("beforeChange",[h,h.currentSlide,l]),a=h.currentSlide,h.currentSlide=l,h.setSlideClasses(h.currentSlide),h.options.asNavFor&&(b=h.getNavTarget(),b=b.slick("getSlick"),b.slideCount<=b.options.slidesToShow&&b.setSlideClasses(h.currentSlide)),h.updateDots(),h.updateArrows(),!0===h.options.fade?(!0!==c?(h.fadeSlideOut(a),h.fadeSlide(l,function(){h.postSlide(l)})):h.postSlide(l),h.animateHeight()):!0!==c?h.animateSlide(g,function(){h.postSlide(l)}):h.postSlide(l)))};
c.prototype.startLoad=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.hide(),this.$nextArrow.hide());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.hide();this.$slider.addClass("slick-loading")};c.prototype.swipeDirection=function(){var a;a=Math.round(180*Math.atan2(this.touchObject.startY-this.touchObject.curY,this.touchObject.startX-this.touchObject.curX)/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a||360>=a&&
315<=a?!1===this.options.rtl?"left":"right":135<=a&&225>=a?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=a&&135>=a?"down":"up":"vertical"};c.prototype.swipeEnd=function(a){var b;this.interrupted=this.dragging=!1;this.shouldClick=10<this.touchObject.swipeLength?!1:!0;if(void 0===this.touchObject.curX)return!1;!0===this.touchObject.edgeHit&&this.$slider.trigger("edge",[this,this.swipeDirection()]);if(this.touchObject.swipeLength>=this.touchObject.minSwipe){a=this.swipeDirection();
switch(a){case "left":case "down":b=this.options.swipeToSlide?this.checkNavigable(this.currentSlide+this.getSlideCount()):this.currentSlide+this.getSlideCount();this.currentDirection=0;break;case "right":case "up":b=this.options.swipeToSlide?this.checkNavigable(this.currentSlide-this.getSlideCount()):this.currentSlide-this.getSlideCount(),this.currentDirection=1}"vertical"!=a&&(this.slideHandler(b),this.touchObject={},this.$slider.trigger("swipe",[this,a]))}else this.touchObject.startX!==this.touchObject.curX&&
(this.slideHandler(this.currentSlide),this.touchObject={})};c.prototype.swipeHandler=function(a){if(!(!1===this.options.swipe||"ontouchend"in document&&!1===this.options.swipe||!1===this.options.draggable&&-1!==a.type.indexOf("mouse")))switch(this.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,this.touchObject.minSwipe=this.listWidth/this.options.touchThreshold,!0===this.options.verticalSwiping&&(this.touchObject.minSwipe=this.listHeight/
this.options.touchThreshold),a.data.action){case "start":this.swipeStart(a);break;case "move":this.swipeMove(a);break;case "end":this.swipeEnd(a)}};c.prototype.swipeMove=function(a){var b,c,f;c=void 0!==a.originalEvent?a.originalEvent.touches:null;if(!this.dragging||c&&1!==c.length)return!1;b=this.getLeft(this.currentSlide);this.touchObject.curX=void 0!==c?c[0].pageX:a.clientX;this.touchObject.curY=void 0!==c?c[0].pageY:a.clientY;this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-
this.touchObject.startX,2)));!0===this.options.verticalSwiping&&(this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curY-this.touchObject.startY,2))));c=this.swipeDirection();if("vertical"!==c){void 0!==a.originalEvent&&4<this.touchObject.swipeLength&&a.preventDefault();f=(!1===this.options.rtl?1:-1)*(this.touchObject.curX>this.touchObject.startX?1:-1);!0===this.options.verticalSwiping&&(f=this.touchObject.curY>this.touchObject.startY?1:-1);a=this.touchObject.swipeLength;
this.touchObject.edgeHit=!1;!1===this.options.infinite&&(0===this.currentSlide&&"right"===c||this.currentSlide>=this.getDotCount()&&"left"===c)&&(a=this.touchObject.swipeLength*this.options.edgeFriction,this.touchObject.edgeHit=!0);this.swipeLeft=!1===this.options.vertical?b+a*f:b+a*(this.$list.height()/this.listWidth)*f;!0===this.options.verticalSwiping&&(this.swipeLeft=b+a*f);if(!0===this.options.fade||!1===this.options.touchMove)return!1;if(!0===this.animating)return this.swipeLeft=null,!1;this.setCSS(this.swipeLeft)}};
c.prototype.swipeStart=function(a){var b;this.interrupted=!0;if(1!==this.touchObject.fingerCount||this.slideCount<=this.options.slidesToShow)return this.touchObject={},!1;void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]);this.touchObject.startX=this.touchObject.curX=void 0!==b?b.pageX:a.clientX;this.touchObject.startY=this.touchObject.curY=void 0!==b?b.pageY:a.clientY;this.dragging=!0};c.prototype.unfilterSlides=c.prototype.slickUnfilter=function(){null!==
this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())};c.prototype.unload=function(){b(".slick-cloned",this.$slider).remove();this.$dots&&this.$dots.remove();this.$prevArrow&&this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove();this.$nextArrow&&this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove();this.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden",
"true").css("width","")};c.prototype.unslick=function(a){this.$slider.trigger("unslick",[this,a]);this.destroy()};c.prototype.updateArrows=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&!this.options.infinite&&(this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===this.currentSlide?(this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled",
"false")):this.currentSlide>=this.slideCount-this.options.slidesToShow&&!1===this.options.centerMode?(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):this.currentSlide>=this.slideCount-1&&!0===this.options.centerMode&&(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))};c.prototype.updateDots=function(){null!==
this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))};c.prototype.visibility=function(){this.options.autoplay&&(this.interrupted=document[this.hidden]?!0:!1)};b.fn.slick=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),e=this.length,f,l;for(f=0;f<e;f++)if("object"==typeof a||"undefined"==typeof a?this[f].slick=
new c(this[f],a):l=this[f].slick[a].apply(this[f].slick,b),"undefined"!=typeof l)return l;return this}});
(function(b,c){"object"===typeof exports&&"undefined"!==typeof module?c(require("jquery")):"function"===typeof define&&define.amd?define(["jquery"],c):(b=b||self,c(b.jQuery))})(this,function(b){function c(a){return a[a.length-1]}function a(a){return a.slice(1)}function d(a,b){return a&&a.length&&b?-1!==a.indexOf(b):!1}function e(a){return a&&b(a).hasClass("note-editable")}function f(a){a=a.toUpperCase();return function(b){return b&&b.nodeName.toUpperCase()===a}}function l(a){return a&&3===a.nodeType}
function g(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(a.nodeName.toUpperCase())}function h(a){return e(a)?!1:a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase())}function p(a){return!v(a)&&!n(a)&&!Ta(a)&&!h(a)&&!Fa(a)&&!Da(a)&&!Ga(a)}function n(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())}function r(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())}function v(a){return r(a)||Da(a)||e(a)}function x(a){return l(a)?a.nodeValue.length:a?a.childNodes.length:
0}function z(a){var b=x(a);return 0===b||!l(a)&&1===b&&a.innerHTML===ta||w.all(a.childNodes,l)&&""===a.innerHTML?!0:!1}function B(a,b){for(;a;){if(b(a))return a;if(e(a))break;a=a.parentNode}return null}function t(a,b){b=b||F.fail;var c=[];B(a,function(a){e(a)||c.push(a);return b(a)});return c}function y(a,b){b=b||F.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c}function u(a,b){var c=b.nextSibling;b=b.parentNode;c?b.insertBefore(a,c):b.appendChild(a);return a}function A(a,c){b.each(c,
function(b,c){a.appendChild(c)});return a}function N(a){return 0===a.offset}function Q(a){return a.offset===x(a.node)}function W(a){return N(a)||Q(a)}function Y(a,b){for(;a&&a!==b;){if(0!==O(a))return!1;a=a.parentNode}return!0}function G(a,b){if(!b)return!1;for(;a&&a!==b;){if(O(a)!==x(a.parentNode)-1)return!1;a=a.parentNode}return!0}function O(a){for(var b=0;a=a.previousSibling;)b+=1;return b}function C(a){return!!(a&&a.childNodes&&a.childNodes.length)}function ga(a,b){var c;if(0===a.offset){if(e(a.node))return null;
c=a.node.parentNode;a=O(a.node)}else C(a.node)?(c=a.node.childNodes[a.offset-1],a=x(c)):(c=a.node,a=b?0:a.offset-1);return{node:c,offset:a}}function V(a,b){var c;if(x(a.node)===a.offset){if(e(a.node))return null;c=a.node.parentNode;a=O(a.node)+1}else C(a.node)?(c=a.node.childNodes[a.offset],a=0):(c=a.node,a=b?x(a.node):a.offset+1);return{node:c,offset:a}}function ja(a,b){return a.node===b.node&&a.offset===b.offset}function ca(a,b){var c=b&&b.isSkipPaddingBlankHTML,d=b&&b.isNotSplitEdgePoint;(b=b&&
b.isDiscardEmptySplits)&&(c=!0);if(W(a)&&(l(a.node)||d)){if(N(a))return a.node;if(Q(a))return a.node.nextSibling}if(l(a.node))return a.node.splitText(a.offset);var e=a.node.childNodes[a.offset],d=u(a.node.cloneNode(!1),a.node);A(d,y(e));c||(c=a.node,g(c)||x(c)||(c.innerHTML=ta),g(d)||x(d)||(d.innerHTML=ta));return b&&(z(a.node)&&L(a.node),z(d))?(L(d),a.node.nextSibling):d}function T(a,b,c){a=t(b.node,F.eq(a));return a.length?1===a.length?ca(b,c):a.reduce(function(a,d){a===b.node&&(a=ca(b,c));return ca({node:d,
offset:a?O(a):x(d)},c)}):null}function da(a){return document.createElement(a)}function L(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){b=[];for(var d=0,e=a.childNodes.length;d<e;d++)b.push(a.childNodes[d]);d=0;for(e=b.length;d<e;d++)c.insertBefore(b[d],a)}c.removeChild(a)}}function U(a,b){a=Ha(a[0])?a.val():a.html();return b?a.replace(/[\n\r]/g,""):a}function na(a,b){var c=a.parentElement(),d,e=document.body.createTextRange(),g,h=w.from(c.childNodes);for(d=
0;d<h.length;d++)if(!m.isText(h[d])){e.moveToElementText(h[d]);if(0<=e.compareEndPoints("StartToStart",a))break;g=h[d]}if(0!==d&&m.isText(h[d-1])){d=document.body.createTextRange();d.moveToElementText(g||c);d.collapse(!g);c=g?g.nextSibling:c.firstChild;a=a.duplicate();a.setEndPoint("StartToStart",d);for(a=a.text.replace(/[\r\n]/g,"").length;a>c.nodeValue.length&&c.nextSibling;)a-=c.nodeValue.length,c=c.nextSibling;b&&c.nextSibling&&m.isText(c.nextSibling)&&a===c.nodeValue.length&&(a-=c.nodeValue.length,
c=c.nextSibling);d=a}return{cont:c,offset:d}}function X(a){var b=function(a,c){var d;if(m.isText(a)){d=m.listPrev(a,F.not(m.isText));var e=w.last(d).previousSibling;a=e||a.parentNode;c+=w.sum(w.tail(d),m.nodeLength);d=!e}else{a=a.childNodes[c]||a;if(m.isText(a))return b(a,0);c=0;d=!1}return{node:a,collapseToStart:d,offset:c}},c=document.body.createTextRange();a=b(a.node,a.offset);c.moveToElementText(a.node);c.collapse(a.collapseToStart);c.moveStart("character",a.offset);return c}function q(a){return b.Deferred(function(c){b.extend(new FileReader,
{onload:function(a){c.resolve(a.target.result)},onerror:function(a){c.reject(a)}}).readAsDataURL(a)}).promise()}function Z(a){return b.Deferred(function(c){var d=b("<img>");d.one("load",function(){d.off("error abort");c.resolve(d)}).one("error abort",function(){d.off("load").detach();c.reject(d)}).css({display:"none"}).appendTo(document.body).attr("src",a)}).promise()}b=b&&b.hasOwnProperty("default")?b["default"]:b;var aa=function(){function a(b,c,d,e){this.markup=b;this.children=c;this.options=d;
this.callback=e}a.prototype.render=function(a){var c=b(this.markup);this.options&&this.options.contents&&c.html(this.options.contents);this.options&&this.options.className&&c.addClass(this.options.className);this.options&&this.options.data&&b.each(this.options.data,function(a,b){c.attr("data-"+a,b)});if(this.options&&this.options.click)c.on("click",this.options.click);if(this.children){var d=c.find(".note-children-container");this.children.forEach(function(a){a.render(d.length?d:c)})}this.callback&&
this.callback(c,this.options);this.options&&this.options.callback&&this.options.callback(c);a&&a.append(c);return c};return a}(),J={create:function(a,b){return function(c,d){d="object"===typeof d?d:c;c=Array.isArray(c)?c:[];d&&d.children&&(c=d.children);return new aa(a,c,d,b)}}},fa=J.create('<div class="note-editor note-frame panel panel-default"/>'),R=J.create('<div class="note-toolbar panel-heading" role="toolbar"></div></div>'),P=J.create('<div class="note-editing-area"/>'),E=J.create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),
ba=J.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),ka=J.create('<output class="note-status-output" aria-live="polite"/><div class="note-statusbar" role="status">  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>  </div></div>'),la=J.create('<div class="note-editor"/>'),va=J.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/><output class="note-status-output" aria-live="polite"/>'),
H=J.create('<div class="note-btn-group btn-group">'),qa=J.create('<ul class="dropdown-menu" role="list">',function(a,b){var c=Array.isArray(b.items)?b.items.map(function(a){var c="string"===typeof a?a:a.value||"",d=b.template?b.template(a):a;a="object"===typeof a?a.option:void 0;return'<li role="listitem" aria-label="'+c+'"><a href="#" '+('data-value="'+c+'"'+(void 0!==a?' data-option="'+a+'"':""))+">"+d+"</a></li>"}).join(""):b.items;a.html(c).attr({"aria-label":b.title})}),sa=J.create('<ul class="dropdown-menu note-check" role="list">',
function(a,b){var c=Array.isArray(b.items)?b.items.map(function(a){var c="string"===typeof a?a:a.value||"",d=b.template?b.template(a):a;return'<li role="listitem" aria-label="'+a+'"><a href="#" data-value="'+c+'">'+za(b.checkClassName)+" "+d+"</a></li>"}).join(""):b.items;a.html(c).attr({"aria-label":b.title})}),wa=J.create('<div class="note-color-palette"/>',function(a,b){for(var c=[],d=0,e=b.colors.length;d<e;d++){for(var g=b.eventName,h=b.colors[d],f=b.colorsName[d],l=[],n=0,p=h.length;n<p;n++){var m=
h[n],r=f[n];l.push(['<button type="button" class="note-color-btn"style="background-color:',m,'" data-event="',g,'" data-value="',m,'" title="',r,'" aria-label="',r,'" data-toggle="button" tabindex="-1"></button>'].join(""))}c.push('<div class="note-color-row">'+l.join("")+"</div>")}a.html(c.join(""));b.tooltip&&a.find(".note-color-btn").tooltip({container:b.container,trigger:"hover",placement:"bottom"})}),ra=J.create('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(a,
b){b.fade&&a.addClass("fade");a.attr({"aria-label":b.title});a.html(['<div class="modal-dialog">  <div class="modal-content">',b.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+b.title+"</h4>    </div>":"",'    <div class="modal-body">'+b.body+"</div>",b.footer?'    <div class="modal-footer">'+b.footer+"</div>":"","  </div></div>"].join(""))}),Ca=J.create('<div class="note-popover popover in">  <div class="arrow"/>  <div class="popover-content note-children-container"/></div>',
function(a,b){a.addClass("undefined"!==typeof b.direction?b.direction:"bottom");b.hideArrow&&a.find(".arrow").hide()}),Oa=J.create('<div class="checkbox"></div>',function(a,b){a.html(["<label"+(b.id?' for="'+b.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(b.id?' id="'+b.id+'"':""),b.checked?" checked":"",' aria-checked="'+(b.checked?"true":"false")+'"/>',b.text?b.text:"","</label>"].join(""))}),za=function(a,b){return"<"+(b||"i")+' class="'+a+'"/>'},ha={editor:fa,toolbar:R,editingArea:P,
codable:E,editable:ba,statusbar:ka,airEditor:la,airEditable:va,buttonGroup:H,dropdown:qa,dropdownButtonContents:function(a,b){return a+" "+za(b.icons.caret,"span")},dropdownCheck:sa,palette:wa,dialog:ra,popover:Ca,checkbox:Oa,icon:za,options:{},button:function(a,c){return J.create('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(a,c){if(c&&c.tooltip)a.attr({title:c.tooltip,"aria-label":c.tooltip}).tooltip({container:void 0!==c.container?c.container:
"body",trigger:"hover",placement:"bottom"}).on("click",function(a){b(a.currentTarget).tooltip("hide")})})(a,c)},toggleBtn:function(a,b){a.toggleClass("disabled",!b);a.attr("disabled",!b)},toggleBtnActive:function(a,b){a.toggleClass("active",b)},onDialogShown:function(a,b){a.one("shown.bs.modal",b)},onDialogHidden:function(a,b){a.one("hidden.bs.modal",b)},showDialog:function(a){a.modal("show")},hideDialog:function(a){a.modal("hide")},createLayout:function(a,b){b=(b.airMode?ha.airEditor([ha.editingArea([ha.airEditable()])]):
ha.editor([ha.toolbar(),ha.editingArea([ha.codable(),ha.editable()]),ha.statusbar()])).render();b.insertAfter(a);return{note:a,editor:b,toolbar:b.find(".note-toolbar"),editingArea:b.find(".note-editing-area"),editable:b.find(".note-editable"),codable:b.find(".note-codable"),statusbar:b.find(".note-statusbar")}},removeLayout:function(a,b){a.html(b.editable.html());b.editor.remove();a.show()}};b.summernote=b.summernote||{lang:{}};b.extend(b.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",
underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",
shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",
url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},
options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",
textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",
justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",
insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var Pa="function"===typeof define&&define.amd,ia=navigator.userAgent,Aa=/MSIE|Trident/i.test(ia),Ba;if(Aa){var xa=/MSIE (\d+[.]\d+)/.exec(ia);xa&&(Ba=parseFloat(xa[1]));(xa=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(ia))&&(Ba=parseFloat(xa[1]))}var oa=/Edge\/\d+/.test(ia),Qa=!!window.CodeMirror,Ra=
"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,Sa=Aa||oa?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",M={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:Aa,isEdge:oa,isFF:!oa&&/firefox/i.test(ia),isPhantom:/PhantomJS/i.test(ia),isWebkit:!oa&&/webkit/i.test(ia),isChrome:!oa&&/chrome/i.test(ia),isSafari:!oa&&/safari/i.test(ia),browserVersion:Ba,jqueryVersion:parseFloat(b.fn.jquery),isSupportAmd:Pa,isSupportTouch:Ra,hasCodeMirror:Qa,isFontInstalled:function(a){var b=
"Comic Sans MS"===a?"Courier New":"Comic Sans MS",c=document.createElement("canvas").getContext("2d");c.font="200px '"+b+"'";var d=c.measureText("mmmmmmmmmmwwwww").width;c.font="200px '"+a+"', '"+b+"'";a=c.measureText("mmmmmmmmmmwwwww").width;return d!==a},isW3CRangeSupport:!!document.createRange,inputEventName:Sa},Va=0,F={eq:function(a){return function(b){return a===b}},eq2:function(a,b){return a===b},peq2:function(a){return function(b,c){return b[a]===c[a]}},ok:function(){return!0},fail:function(){return!1},
self:function(a){return a},not:function(a){return function(){return!a.apply(a,arguments)}},and:function(a,b){return function(c){return a(c)&&b(c)}},invoke:function(a,b){return function(){return a[b].apply(a,arguments)}},uniqueId:function(a){var b=++Va+"";return a?a+b:b},rect2bnd:function(a){var b=$(document);return{top:a.top+b.scrollTop(),left:a.left+b.scrollLeft(),width:a.right-a.left,height:a.bottom-a.top}},invertObject:function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b},
namespaceToCamel:function(a,b){return(b||"")+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")},debounce:function(a,b,c){var d;return function(){var e=this,g=arguments,h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,g)},b);h&&a.apply(e,g)}},isValidUrl:function(a){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(a)}},w={head:function(a){return a[0]},last:c,initial:function(a){return a.slice(0,a.length-
1)},tail:a,prev:function(a,b){return a&&a.length&&b?(b=a.indexOf(b),-1===b?null:a[b-1]):null},next:function(a,b){return a&&a.length&&b?(b=a.indexOf(b),-1===b?null:a[b+1]):null},find:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e))return e}},contains:d,all:function(a,b){for(var c=0,d=a.length;c<d;c++)if(!b(a[c]))return!1;return!0},sum:function(a,b){b=b||F.self;return a.reduce(function(a,c){return a+b(c)},0)},from:function(a){for(var b=[],c=a.length,d=-1;++d<c;)b[d]=a[d];return b},
isEmpty:function(a){return!a||!a.length},clusterBy:function(b,S){return b.length?a(b).reduce(function(a,b){var d=c(a);S(c(d),b)?d[d.length]=b:a[a.length]=[b];return a},[[b[0]]]):[]},compact:function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},unique:function(a){for(var b=[],c=0,e=a.length;c<e;c++)d(b,a[c])||b.push(a[c]);return b}},Ka=String.fromCharCode(160),Wa=f("PRE"),La=f("LI"),Fa=f("TABLE"),Ga=f("DATA"),Ta=f("HR"),Da=f("BLOCKQUOTE"),Ma=f("A"),Xa=f("BODY"),ta=M.isMSIE&&
11>M.browserVersion?"&nbsp;":"<br>",Ha=f("TEXTAREA"),m={NBSP_CHAR:Ka,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:ta,emptyPara:"<p>"+ta+"</p>",makePredByNodeName:f,isEditable:e,isControlSizing:function(a){return a&&b(a).hasClass("note-control-sizing")},isText:l,isElement:function(a){return a&&1===a.nodeType},isVoid:g,isPara:h,isPurePara:function(a){return h(a)&&!La(a)},isHeading:function(a){return a&&/^H[1-7]/.test(a.nodeName.toUpperCase())},isInline:p,isBlock:F.not(p),isBodyInline:function(a){return p(a)&&
!B(a,h)},isBody:Xa,isParaInline:function(a){return p(a)&&!!B(a,h)},isPre:Wa,isList:n,isTable:Fa,isData:Ga,isCell:r,isBlockquote:Da,isBodyContainer:v,isAnchor:Ma,isDiv:f("DIV"),isLi:La,isBR:f("BR"),isSpan:f("SPAN"),isB:f("B"),isU:f("U"),isS:f("S"),isI:f("I"),isImg:f("IMG"),isTextarea:Ha,isEmpty:z,isEmptyAnchor:F.and(Ma,z),isClosestSibling:function(a,b){return a.nextSibling===b||a.previousSibling===b},withClosestSiblings:function(a,b){b=b||F.ok;var c=[];a.previousSibling&&b(a.previousSibling)&&c.push(a.previousSibling);
c.push(a);a.nextSibling&&b(a.nextSibling)&&c.push(a.nextSibling);return c},nodeLength:x,isLeftEdgePoint:N,isRightEdgePoint:Q,isEdgePoint:W,isLeftEdgeOf:Y,isRightEdgeOf:G,isLeftEdgePointOf:function(a,b){return N(a)&&Y(a.node,b)},isRightEdgePointOf:function(a,b){return Q(a)&&G(a.node,b)},prevPoint:ga,nextPoint:V,isSamePoint:ja,isVisiblePoint:function(a){if(l(a.node)||!C(a.node)||z(a.node))return!0;var b=a.node.childNodes[a.offset-1];a=a.node.childNodes[a.offset];return b&&!g(b)||a&&!g(a)?!1:!0},prevPointUntil:function(a,
b){for(;a;){if(b(a))return a;a=ga(a)}return null},nextPointUntil:function(a,b){for(;a;){if(b(a))return a;a=V(a)}return null},isCharPoint:function(a){return l(a.node)?(a=a.node.nodeValue.charAt(a.offset-1))&&" "!==a&&a!==Ka:!1},walkPoint:function(a,b,c,d){for(var e=a;e;){c(e);if(ja(e,b))break;e=V(e,d&&a.node!==e.node&&b.node!==e.node)}},ancestor:B,singleChildAncestor:function(a,b){for(a=a.parentNode;a&&1===x(a);){if(b(a))return a;if(e(a))break;a=a.parentNode}return null},listAncestor:t,lastAncestor:function(a,
b){a=t(a);return w.last(a.filter(b))},listNext:y,listPrev:function(a,b){b=b||F.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.previousSibling;return c},listDescendant:function(a,b){var c=[];b=b||F.ok;(function Ua(d){a!==d&&b(d)&&c.push(d);for(var e=0,g=d.childNodes.length;e<g;e++)Ua(d.childNodes[e])})(a);return c},commonAncestor:function(a,b){for(a=t(a);b;b=b.parentNode)if(-1<a.indexOf(b))return b;return null},wrap:function(a,c){var d=a.parentNode;c=b("<"+c+">")[0];d.insertBefore(c,a);c.appendChild(a);
return c},insertAfter:u,appendChildNodes:A,position:O,hasChildren:C,makeOffsetPath:function(a,b){return t(b,F.eq(a)).map(O).reverse()},fromOffsetPath:function(a,b){for(var c=0,d=b.length;c<d;c++)a=a.childNodes.length<=b[c]?a.childNodes[a.childNodes.length-1]:a.childNodes[b[c]];return a},splitTree:T,splitPoint:function(a,b){var c=b?h:v,d=t(a.node,c),e=w.last(d)||a.node;c(e)?c=d[d.length-2]:(c=e,e=c.parentNode);(b=c&&T(c,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b}))||e!==a.node||(b=a.node.childNodes[a.offset]);
return{rightNode:b,container:e}},create:da,createText:function(a){return document.createTextNode(a)},remove:L,removeWhile:function(a,b){for(;a&&!e(a)&&b(a);){var c=a.parentNode;L(a);a=c}},replace:function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;b=da(b);a.style.cssText&&(b.style.cssText=a.style.cssText);A(b,w.from(a.childNodes));u(b,a);L(a);return b},html:function(a,b){a=U(a);b&&(a=a.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(a,b,c){c=c.toUpperCase();b=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&
!!b;c=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(b||c?"\n":"")}),a=a.trim());return a},value:U,posFromPlaceholder:function(a){var c=b(a);a=c.offset();c=c.outerHeight(!0);return{left:a.left,top:a.top+c}},attachEvents:function(a,b){Object.keys(b).forEach(function(c){a.on(c,b[c])})},detachEvents:function(a,b){Object.keys(b).forEach(function(c){a.off(c,b[c])})},isCustomStyleTag:function(a){return a&&!l(a)&&w.contains(a.classList,"note-styletag")}},Ya=function(){function a(c,d){this.ui=
b.summernote.ui;this.$note=c;this.memos={};this.modules={};this.layoutInfo={};this.options=d;this.initialize()}a.prototype.initialize=function(){this.layoutInfo=this.ui.createLayout(this.$note,this.options);this._initialize();this.$note.hide();return this};a.prototype.destroy=function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)};a.prototype.reset=function(){var a=this.isDisabled();this.code(m.emptyPara);this._destroy();this._initialize();
a&&this.disable()};a.prototype._initialize=function(){var a=this,c=b.extend({},this.options.buttons);Object.keys(c).forEach(function(b){a.memo("button."+b,c[b])});var d=b.extend({},this.options.modules,b.summernote.plugins||{});Object.keys(d).forEach(function(b){a.module(b,d[b],!0)});Object.keys(this.modules).forEach(function(b){a.initializeModule(b)})};a.prototype._destroy=function(){var a=this;Object.keys(this.modules).reverse().forEach(function(b){a.removeModule(b)});Object.keys(this.memos).forEach(function(b){a.removeMemo(b)});
this.triggerEvent("destroy",this)};a.prototype.code=function(a){var b=this.invoke("codeview.isActivated");if(void 0===a)return this.invoke("codeview.sync"),b?this.layoutInfo.codable.val():this.layoutInfo.editable.html();b?this.layoutInfo.codable.val(a):this.layoutInfo.editable.html(a);this.$note.val(a);this.triggerEvent("change",a,this.layoutInfo.editable)};a.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")};a.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",
!0);this.invoke("toolbar.activate",!0);this.triggerEvent("disable",!1)};a.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.invoke("toolbar.deactivate",!0);this.triggerEvent("disable",!0)};a.prototype.triggerEvent=function(){var a=w.head(arguments),b=w.tail(w.from(arguments)),c=this.options.callbacks[F.namespaceToCamel(a,"on")];c&&c.apply(this.$note[0],b);this.$note.trigger("summernote."+a,
b)};a.prototype.initializeModule=function(a){a=this.modules[a];a.shouldInitialize=a.shouldInitialize||F.ok;a.shouldInitialize()&&(a.initialize&&a.initialize(),a.events&&m.attachEvents(this.$note,a.events))};a.prototype.module=function(a,b,c){if(1===arguments.length)return this.modules[a];this.modules[a]=new b(this);c||this.initializeModule(a)};a.prototype.removeModule=function(a){var b=this.modules[a];b.shouldInitialize()&&(b.events&&m.detachEvents(this.$note,b.events),b.destroy&&b.destroy());delete this.modules[a]};
a.prototype.memo=function(a,b){if(1===arguments.length)return this.memos[a];this.memos[a]=b};a.prototype.removeMemo=function(a){this.memos[a]&&this.memos[a].destroy&&this.memos[a].destroy();delete this.memos[a]};a.prototype.createInvokeHandlerAndUpdateState=function(a,b){var c=this;return function(d){c.createInvokeHandler(a,b)(d);c.invoke("buttons.updateCurrentStyle")}};a.prototype.createInvokeHandler=function(a,c){var d=this;return function(e){e.preventDefault();e=b(e.target);d.invoke(a,c||e.closest("[data-value]").data("value"),
e)}};a.prototype.invoke=function(){var a=w.head(arguments),b=w.tail(w.from(arguments)),c=a.split("."),d=1<c.length,a=d&&w.head(c),c=d?w.last(c):w.head(c),d=this.modules[a||"editor"];if(!a&&this[c])return this[c].apply(this,b);if(d&&d[c]&&d.shouldInitialize())return d[c].apply(d,b)};return a}();b.fn.extend({summernote:function(){var a=b.type(w.head(arguments)),c="string"===a,d=b.extend({},b.summernote.options,"object"===a?w.head(arguments):{});d.langInfo=b.extend(!0,{},b.summernote.lang["en-US"],b.summernote.lang[d.lang]);
d.icons=b.extend(!0,{},b.summernote.options.icons,d.icons);d.tooltip="auto"===d.tooltip?!M.isSupportTouch:d.tooltip;this.each(function(a,c){a=b(c);a.data("summernote")||(c=new Ya(a,d),a.data("summernote",c),a.data("summernote").triggerEvent("init",c.layoutInfo))});a=this.first();if(a.length){a=a.data("summernote");if(c)return a.invoke.apply(a,w.from(arguments));d.focus&&a.invoke("editor.focus")}return this}});var ua=function(){function a(b,c,d,e){this.sc=b;this.so=c;this.ec=d;this.eo=e;this.isOnEditable=
this.makeIsOn(m.isEditable);this.isOnList=this.makeIsOn(m.isList);this.isOnAnchor=this.makeIsOn(m.isAnchor);this.isOnCell=this.makeIsOn(m.isCell);this.isOnData=this.makeIsOn(m.isData)}a.prototype.nativeRange=function(){if(M.isW3CRangeSupport){var a=document.createRange();a.setStart(this.sc,this.sc.data&&this.so>this.sc.data.length?0:this.so);a.setEnd(this.ec,this.sc.data?Math.min(this.eo,this.sc.data.length):this.eo);return a}a=X({node:this.sc,offset:this.so});a.setEndPoint("EndToEnd",X({node:this.ec,
offset:this.eo}));return a};a.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}};a.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}};a.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}};a.prototype.select=function(){var a=this.nativeRange();if(M.isW3CRangeSupport){var b=document.getSelection();0<b.rangeCount&&b.removeAllRanges();b.addRange(a)}else a.select();return this};a.prototype.scrollIntoView=function(a){var c=b(a).height();
a.scrollTop+c<this.sc.offsetTop&&(a.scrollTop+=Math.abs(a.scrollTop+c-this.sc.offsetTop));return this};a.prototype.normalize=function(){var b=function(a,b){if(m.isVisiblePoint(a)&&(!m.isEdgePoint(a)||m.isRightEdgePoint(a)&&!b||m.isLeftEdgePoint(a)&&b||m.isRightEdgePoint(a)&&b&&m.isVoid(a.node.nextSibling)||m.isLeftEdgePoint(a)&&!b&&m.isVoid(a.node.previousSibling)||m.isBlock(a.node)&&m.isEmpty(a.node)))return a;var c=m.ancestor(a.node,m.isBlock);if((m.isLeftEdgePointOf(a,c)||m.isVoid(m.prevPoint(a).node))&&
!b||(m.isRightEdgePointOf(a,c)||m.isVoid(m.nextPoint(a).node))&&b){if(m.isVisiblePoint(a))return a;b=!b}return(b?m.nextPointUntil(m.nextPoint(a),m.isVisiblePoint):m.prevPointUntil(m.prevPoint(a),m.isVisiblePoint))||a},c=b(this.getEndPoint(),!1),b=this.isCollapsed()?c:b(this.getStartPoint(),!0);return new a(b.node,b.offset,c.node,c.offset)};a.prototype.nodes=function(a,b){a=a||F.ok;var c=b&&b.includeAncestor,d=b&&b.fullyContains;b=this.getStartPoint();var e=this.getEndPoint(),g=[],h=[];m.walkPoint(b,
e,function(b){if(!m.isEditable(b.node)){var e;d?(m.isLeftEdgePoint(b)&&h.push(b.node),m.isRightEdgePoint(b)&&w.contains(h,b.node)&&(e=b.node)):e=c?m.ancestor(b.node,a):b.node;e&&a(e)&&g.push(e)}},!0);return w.unique(g)};a.prototype.commonAncestor=function(){return m.commonAncestor(this.sc,this.ec)};a.prototype.expand=function(b){var c=m.ancestor(this.sc,b);b=m.ancestor(this.ec,b);if(!c&&!b)return new a(this.sc,this.so,this.ec,this.eo);var d=this.getPoints();c&&(d.sc=c,d.so=0);b&&(d.ec=b,d.eo=m.nodeLength(b));
return new a(d.sc,d.so,d.ec,d.eo)};a.prototype.collapse=function(b){return b?new a(this.sc,this.so,this.sc,this.so):new a(this.ec,this.eo,this.ec,this.eo)};a.prototype.splitText=function(){var b=this.sc===this.ec,c=this.getPoints();m.isText(this.ec)&&!m.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo);m.isText(this.sc)&&!m.isEdgePoint(this.getStartPoint())&&(c.sc=this.sc.splitText(this.so),c.so=0,b&&(c.ec=c.sc,c.eo=this.eo-this.so));return new a(c.sc,c.so,c.ec,c.eo)};a.prototype.deleteContents=
function(){if(this.isCollapsed())return this;var c=this.splitText(),d=c.nodes(null,{fullyContains:!0}),e=m.prevPointUntil(c.getStartPoint(),function(a){return!w.contains(d,a.node)}),g=[];b.each(d,function(a,b){a=b.parentNode;e.node!==a&&1===m.nodeLength(a)&&g.push(a);m.remove(b,!1)});b.each(g,function(a,b){m.remove(b,!1)});return(new a(e.node,e.offset,e.node,e.offset)).normalize()};a.prototype.makeIsOn=function(a){return function(){var b=m.ancestor(this.sc,a);return!!b&&b===m.ancestor(this.ec,a)}};
a.prototype.isLeftEdgeOf=function(a){return m.isLeftEdgePoint(this.getStartPoint())?(a=m.ancestor(this.sc,a))&&m.isLeftEdgeOf(this.sc,a):!1};a.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo};a.prototype.wrapBodyInlineWithPara=function(){if(m.isBodyContainer(this.sc)&&m.isEmpty(this.sc))return this.sc.innerHTML=m.emptyPara,new a(this.sc.firstChild,0,this.sc.firstChild,0);var b=this.normalize();if(m.isParaInline(this.sc)||m.isPara(this.sc))return b;var c;if(m.isInline(b.sc)){var d=
m.listAncestor(b.sc,F.not(m.isInline));c=w.last(d);m.isInline(c)||(c=d[d.length-2]||b.sc.childNodes[b.so])}else c=b.sc.childNodes[0<b.so?b.so-1:0];b=m.listPrev(c,m.isParaInline).reverse();b=b.concat(m.listNext(c.nextSibling,m.isParaInline));b.length&&(c=m.wrap(w.head(b),"p"),m.appendChildNodes(c,w.tail(b)));return this.normalize()};a.prototype.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents(),b=m.splitPoint(b.getStartPoint(),m.isInline(a));b.rightNode?b.rightNode.parentNode.insertBefore(a,
b.rightNode):b.container.appendChild(a);return a};a.prototype.pasteHTML=function(a){a=b("<div></div>").html(a)[0];a=w.from(a.childNodes);var c=this.wrapBodyInlineWithPara().deleteContents();0<c.so&&(a=a.reverse());a=a.map(function(a){return c.insertNode(a)});0<c.so&&(a=a.reverse());return a};a.prototype.toString=function(){var a=this.nativeRange();return M.isW3CRangeSupport?a.toString():a.text};a.prototype.getWordRange=function(b){var c=this.getEndPoint();if(!m.isCharPoint(c))return this;var d=m.prevPointUntil(c,
function(a){return!m.isCharPoint(a)});b&&(c=m.nextPointUntil(c,function(a){return!m.isCharPoint(a)}));return new a(d.node,d.offset,c.node,c.offset)};a.prototype.bookmark=function(a){return{s:{path:m.makeOffsetPath(a,this.sc),offset:this.so},e:{path:m.makeOffsetPath(a,this.ec),offset:this.eo}}};a.prototype.paraBookmark=function(a){return{s:{path:w.tail(m.makeOffsetPath(w.head(a),this.sc)),offset:this.so},e:{path:w.tail(m.makeOffsetPath(w.last(a),this.ec)),offset:this.eo}}};a.prototype.getClientRects=
function(){return this.nativeRange().getClientRects()};return a}(),I={create:function(a,b,c,d){if(4===arguments.length)return new ua(a,b,c,d);if(2===arguments.length)return new ua(a,b,a,b);var e=this.createFromSelection();return e||1!==arguments.length?e:(e=this.createFromNode(arguments[0]),e.collapse(m.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var a,b,c,d;if(M.isW3CRangeSupport){a=document.getSelection();if(!a||0===a.rangeCount||m.isBody(a.anchorNode))return null;d=a.getRangeAt(0);
a=d.startContainer;b=d.startOffset;c=d.endContainer;d=d.endOffset}else b=document.selection.createRange(),a=b.duplicate(),a.collapse(!1),b.collapse(!0),b=na(b,!0),d=na(a,!1),m.isText(b.node)&&m.isLeftEdgePoint(b)&&m.isTextNode(d.node)&&m.isRightEdgePoint(d)&&d.node.nextSibling===b.node&&(b=d),a=b.cont,b=b.offset,c=d.cont,d=d.offset;return new ua(a,b,c,d)},createFromNode:function(a){var b=a,c=0,d=m.nodeLength(a);m.isVoid(b)&&(c=m.listPrev(b).length-1,b=b.parentNode);m.isBR(a)?(d=m.listPrev(a).length-
1,a=a.parentNode):m.isVoid(a)&&(d=m.listPrev(a).length,a=a.parentNode);return this.create(b,c,a,d)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,b){var c=m.fromOffsetPath(a,b.s.path),d=b.s.offset;a=m.fromOffsetPath(a,b.e.path);return new ua(c,d,a,b.e.offset)},createFromParaBookmark:function(a,b){var c=a.s.offset,d=a.e.offset,e=m.fromOffsetPath(w.head(b),a.s.path);
a=m.fromOffsetPath(w.last(b),a.e.path);return new ua(e,c,a,d)}},ea={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},K={isEdit:function(a){return w.contains([ea.BACKSPACE,ea.TAB,ea.ENTER,ea.SPACE,ea.DELETE],a)},isMove:function(a){return w.contains([ea.LEFT,ea.UP,ea.RIGHT,ea.DOWN],a)},
nameFromCode:F.invertObject(ea),code:ea},Za=function(){function a(b){this.stack=[];this.stackOffset=-1;this.$editable=b;this.editable=b[0]}a.prototype.makeSnapshot=function(){var a=I.create(this.editable),b={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:a&&a.isOnEditable()?a.bookmark(this.editable):b}};a.prototype.applySnapshot=function(a){null!==a.contents&&this.$editable.html(a.contents);null!==a.bookmark&&I.createFromBookmark(this.editable,a.bookmark).select()};
a.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])};a.prototype.commit=function(){this.stack=[];this.stackOffset=-1;this.recordUndo()};a.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()};a.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo();0<this.stackOffset&&(this.stackOffset--,
this.applySnapshot(this.stack[this.stackOffset]))};a.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))};a.prototype.recordUndo=function(){this.stackOffset++;this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset));this.stack.push(this.makeSnapshot())};return a}(),$a=function(){function a(){}a.prototype.jQueryCSS=function(a,c){if(1.9>M.jqueryVersion){var d={};b.each(c,function(b,c){d[c]=
a.css(c)});return d}return a.css(c)};a.prototype.fromNode=function(a){a=this.jQueryCSS(a,["font-family","font-size","text-align","list-style-type","line-height"])||{};a["font-size"]=parseInt(a["font-size"],10);return a};a.prototype.stylePara=function(a,c){b.each(a.nodes(m.isPara,{includeAncestor:!0}),function(a,d){b(d).css(c)})};a.prototype.styleNodes=function(a,c){a=a.splitText();var d=c&&c.nodeName||"SPAN",e=!(!c||!c.expandClosestSibling);c=!(!c||!c.onlyPartialContains);if(a.isCollapsed())return[a.insertNode(m.create(d))];
var g=m.makePredByNodeName(d),h=a.nodes(m.isText,{fullyContains:!0}).map(function(a){return m.singleChildAncestor(a,g)||m.wrap(a,d)});if(e){if(c)var f=a.nodes(),g=F.and(g,function(a){return w.contains(f,a)});return h.map(function(a){a=m.withClosestSiblings(a,g);var c=w.head(a),d=w.tail(a);b.each(d,function(a,b){m.appendChildNodes(c,b.childNodes);m.remove(b)});return w.head(a)})}return h};a.prototype.current=function(a){var c=b(m.isElement(a.sc)?a.sc:a.sc.parentNode),c=this.fromNode(c);try{c=b.extend(c,
{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||
c["font-family"]})}catch(d){}if(a.isOnList()){var e=-1<["circle","disc","disc-leading-zero","square"].indexOf(c["list-style-type"]);c["list-style"]=e?"unordered":"ordered"}else c["list-style"]="none";(e=m.ancestor(a.sc,m.isPara))&&e.style["line-height"]?c["line-height"]=e.style.lineHeight:(e=parseInt(c["line-height"],10)/parseInt(c["font-size"],10),c["line-height"]=e.toFixed(1));c.anchor=a.isOnAnchor()&&m.ancestor(a.sc,m.isAnchor);c.ancestors=m.listAncestor(a.sc,m.isEditable);c.range=a;return c};
return a}(),Na=function(){function a(){}a.prototype.insertOrderedList=function(a){this.toggleList("OL",a)};a.prototype.insertUnorderedList=function(a){this.toggleList("UL",a)};a.prototype.indent=function(a){var c=this;a=I.create(a).wrapBodyInlineWithPara();var d=a.nodes(m.isPara,{includeAncestor:!0}),d=w.clusterBy(d,F.peq2("parentNode"));b.each(d,function(a,d){a=w.head(d);if(m.isLi(a)){var e=c.findList(a.previousSibling);e?d.map(function(a){return e.appendChild(a)}):(c.wrapList(d,a.parentNode.nodeName),
d.map(function(a){return a.parentNode}).map(function(a){return c.appendToPrevious(a)}))}else b.each(d,function(a,c){b(c).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})});a.select()};a.prototype.outdent=function(a){var c=this;a=I.create(a).wrapBodyInlineWithPara();var d=a.nodes(m.isPara,{includeAncestor:!0}),d=w.clusterBy(d,F.peq2("parentNode"));b.each(d,function(a,d){a=w.head(d);m.isLi(a)?c.releaseList([d]):b.each(d,function(a,c){b(c).css("marginLeft",function(a,b){b=parseInt(b,10)||
0;return 25<b?b-25:""})})});a.select()};a.prototype.toggleList=function(a,c){var d=this,e=I.create(c).wrapBodyInlineWithPara();c=e.nodes(m.isPara,{includeAncestor:!0});var g=e.paraBookmark(c),h=w.clusterBy(c,F.peq2("parentNode"));if(w.find(c,m.isPurePara)){var f=[];b.each(h,function(b,c){f=f.concat(d.wrapList(c,a))});c=f}else e=e.nodes(m.isList,{includeAncestor:!0}).filter(function(c){return!b.nodeName(c,a)}),e.length?b.each(e,function(b,c){m.replace(c,a)}):c=this.releaseList(h,!0);I.createFromParaBookmark(g,
c).select()};a.prototype.wrapList=function(a,b){var c=w.head(a),d=w.last(a),e=m.isList(c.previousSibling)&&c.previousSibling,c=m.isList(d.nextSibling)&&d.nextSibling;b=e||m.insertAfter(m.create(b||"UL"),d);a=a.map(function(a){return m.isPurePara(a)?m.replace(a,"LI"):a});m.appendChildNodes(b,a);c&&(m.appendChildNodes(b,w.from(c.childNodes)),m.remove(c));return a};a.prototype.releaseList=function(a,c){var d=this,e=[];b.each(a,function(a,S){a=w.head(S);var g=w.last(S),h=c?m.lastAncestor(a,m.isList):
a.parentNode,f=h.parentNode;if("LI"===h.parentNode.nodeName)S.map(function(a){var b=d.findNextSiblings(a);f.nextSibling?f.parentNode.insertBefore(a,f.nextSibling):f.parentNode.appendChild(a);b.length&&(d.wrapList(b,h.nodeName),a.appendChild(b[0].parentNode))}),0===h.children.length&&f.removeChild(h),0===f.childNodes.length&&f.parentNode.removeChild(f);else{g=1<h.childNodes.length?m.splitTree(h,{node:g.parentNode,offset:m.position(g)+1},{isSkipPaddingBlankHTML:!0}):null;a=m.splitTree(h,{node:a.parentNode,
offset:m.position(a)},{isSkipPaddingBlankHTML:!0});S=c?m.listDescendant(a,m.isLi):w.from(a.childNodes).filter(m.isLi);if(c||!m.isList(h.parentNode))S=S.map(function(a){return m.replace(a,"P")});b.each(w.from(S).reverse(),function(a,b){m.insertAfter(b,h)});a=w.compact([h,a,g]);b.each(a,function(a,c){a=[c].concat(m.listDescendant(c,m.isList));b.each(a.reverse(),function(a,b){m.nodeLength(b)||m.remove(b,!0)})})}e=e.concat(S)});return e};a.prototype.appendToPrevious=function(a){return a.previousSibling?
m.appendChildNodes(a.previousSibling,[a]):this.wrapList([a],"LI")};a.prototype.findList=function(a){return a?w.find(a.children,function(a){return-1<["OL","UL"].indexOf(a.nodeName)}):null};a.prototype.findNextSiblings=function(a){for(var b=[];a.nextSibling;)b.push(a.nextSibling),a=a.nextSibling;return b};return a}(),ab=function(){function a(b){this.bullet=new Na;this.options=b.options}a.prototype.insertTab=function(a,b){var c=m.createText(Array(b+1).join(m.NBSP_CHAR));a=a.deleteContents();a.insertNode(c,
!0);a=I.create(c,b);a.select()};a.prototype.insertParagraph=function(a,c){c=c||I.create(a);c=c.deleteContents();c=c.wrapBodyInlineWithPara();var d=m.ancestor(c.sc,m.isPara),e;if(d){if(m.isEmpty(d)&&m.isLi(d)){this.bullet.toggleList(d.parentNode.nodeName);return}var g=null;1===this.options.blockquoteBreakingLevel?g=m.ancestor(d,m.isBlockquote):2===this.options.blockquoteBreakingLevel&&(g=m.lastAncestor(d,m.isBlockquote));g?(e=b(m.emptyPara)[0],m.isRightEdgePoint(c.getStartPoint())&&m.isBR(c.sc.nextSibling)&&
b(c.sc.nextSibling).remove(),(c=m.splitTree(g,c.getStartPoint(),{isDiscardEmptySplits:!0}))?c.parentNode.insertBefore(e,c):m.insertAfter(e,g)):(e=m.splitTree(d,c.getStartPoint()),c=m.listDescendant(d,m.isEmptyAnchor),c=c.concat(m.listDescendant(e,m.isEmptyAnchor)),b.each(c,function(a,b){m.remove(b)}),(m.isHeading(e)||m.isPre(e)||m.isCustomStyleTag(e))&&m.isEmpty(e)&&(e=m.replace(e,"p")))}else g=c.sc.childNodes[c.so],e=b(m.emptyPara)[0],g?c.sc.insertBefore(e,g):c.sc.appendChild(e);I.create(e,0).normalize().select().scrollIntoView(a)};
return a}(),D=function(a,b,c,d){function e(a,b,c,d,S,g,h){c={baseRow:c,baseCell:d,isRowSpan:S,isColSpan:g,isVirtual:h};p[a]||(p[a]=[]);p[a][b]=c}function g(a,b){if(!p[a]||!p[a][b])return b;for(;p[a][b];)if(b++,!p[a][b])return b}function h(a){switch(b){case D.where.Column:if(a.isColSpan)return D.resultAction.SubtractSpanCount;break;case D.where.Row:if(!a.isVirtual&&a.isRowSpan)return D.resultAction.AddCell;if(a.isRowSpan)return D.resultAction.SubtractSpanCount}return D.resultAction.RemoveCell}function f(a){switch(b){case D.where.Column:if(a.isColSpan)return D.resultAction.SumSpanCount;
if(a.isRowSpan&&a.isVirtual)return D.resultAction.Ignore;break;case D.where.Row:if(a.isRowSpan)return D.resultAction.SumSpanCount;if(a.isColSpan&&a.isVirtual)return D.resultAction.Ignore}return D.resultAction.AddCell}var l=0,n=0,p=[],m=[];this.getActionList=function(){for(var a=b===D.where.Row?n:-1,d=b===D.where.Column?l:-1,e=0;;){var g=0<=a?a:e,Ia=0<=d?d:e,ma=p[g];if(!ma)break;ma=ma[Ia];if(!ma)break;var pa=D.resultAction.Ignore;switch(c){case D.requestAction.Add:pa=f(ma);break;case D.requestAction.Delete:pa=
h(ma)}m.push({baseCell:ma.baseCell,action:pa,virtualTable:{rowIndex:g,cellIndex:Ia}});e++}return m};!a||!a.tagName||"td"!==a.tagName.toLowerCase()&&"th"!==a.tagName.toLowerCase()?console.error("Impossible to identify start Cell point.",a):(l=a.cellIndex,a.parentElement&&a.parentElement.tagName&&"tr"===a.parentElement.tagName.toLowerCase()?n=a.parentElement.rowIndex:console.error("Impossible to identify start Row point.",a));(function(){for(var a=d.rows,b=0;b<a.length;b++)for(var c=a[b].cells,S=0;S<
c.length;S++){var h=a[b],f=c[S],ya=g(h.rowIndex,f.cellIndex),p=1<f.colSpan,m=1<f.rowSpan,pa=h.rowIndex===n&&f.cellIndex===l;e(h.rowIndex,ya,h,f,m,p,!1);var r=f.attributes.rowSpan?parseInt(f.attributes.rowSpan.value,10):0;if(1<r)for(var q=1;q<r;q++){var Ja=h.rowIndex+q;Ja===n&&l>=f.cellIndex&&f.cellIndex<=ya&&!pa&&l++;e(Ja,ya,h,f,!0,p,!0)}p=f.attributes.colSpan?parseInt(f.attributes.colSpan.value,10):0;if(1<p)for(r=1;r<p;r++)q=g(h.rowIndex,ya+r),h.rowIndex===n&&l>=f.cellIndex&&f.cellIndex<=q&&!pa&&
l++,e(h.rowIndex,q,h,f,m,!0,!0)}})()};D.where={Row:0,Column:1};D.requestAction={Add:0,Delete:1};D.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var bb=function(){function a(){}a.prototype.tab=function(a,b){a=m.ancestor(a.commonAncestor(),m.isCell);var c=m.ancestor(a,m.isTable),c=m.listDescendant(c,m.isCell);(b=w[b?"prev":"next"](c,a))&&I.create(b,0).select()};a.prototype.addRow=function(a,c){var d=m.ancestor(a.commonAncestor(),m.isCell);a=b(d).closest("tr");for(var e=
this.recoverAttributes(a),e=b("<tr"+e+"></tr>"),g=(new D(d,D.where.Row,D.requestAction.Add,b(a).closest("table")[0])).getActionList(),h=0;h<g.length;h++){var f=g[h],l=this.recoverAttributes(f.baseCell);switch(f.action){case D.resultAction.AddCell:e.append("<td"+l+">"+m.blank+"</td>");break;case D.resultAction.SumSpanCount:"top"===c&&(f.baseCell.parent?f.baseCell.closest("tr").rowIndex:0)<=a[0].rowIndex?(f=b("<div></div>").append(b("<td"+l+">"+m.blank+"</td>").removeAttr("rowspan")).html(),e.append(f)):
(l=parseInt(f.baseCell.rowSpan,10),l++,f.baseCell.setAttribute("rowSpan",l))}}"top"===c?a.before(e):1<d.rowSpan?(c=a[0].rowIndex+(d.rowSpan-2),b(b(a).parent().find("tr")[c]).after(b(e))):a.after(e)};a.prototype.addCol=function(a,c){a=m.ancestor(a.commonAncestor(),m.isCell);var d=b(a).closest("tr");b(d).siblings().push(d);a=(new D(a,D.where.Column,D.requestAction.Add,b(d).closest("table")[0])).getActionList();for(d=0;d<a.length;d++){var e=a[d],g=this.recoverAttributes(e.baseCell);switch(e.action){case D.resultAction.AddCell:"right"===
c?b(e.baseCell).after("<td"+g+">"+m.blank+"</td>"):b(e.baseCell).before("<td"+g+">"+m.blank+"</td>");break;case D.resultAction.SumSpanCount:"right"===c?(g=parseInt(e.baseCell.colSpan,10),g++,e.baseCell.setAttribute("colSpan",g)):b(e.baseCell).before("<td"+g+">"+m.blank+"</td>")}}};a.prototype.recoverAttributes=function(a){var b="";if(!a)return b;a=a.attributes||[];for(var c=0;c<a.length;c++)"id"!==a[c].name.toLowerCase()&&a[c].specified&&(b+=" "+a[c].name+"='"+a[c].value+"'");return b};a.prototype.deleteRow=
function(a){var c=m.ancestor(a.commonAncestor(),m.isCell);a=b(c).closest("tr");for(var d=a.children("td, th").index(b(c)),e=a[0].rowIndex,c=(new D(c,D.where.Row,D.requestAction.Delete,b(a).closest("table")[0])).getActionList(),g=0;g<c.length;g++)if(c[g]){var h=c[g].baseCell,f=c[g].virtualTable,l=h.rowSpan&&1<h.rowSpan,n=l?parseInt(h.rowSpan,10):0;switch(c[g].action){case D.resultAction.Ignore:continue;case D.resultAction.AddCell:h=a.next("tr")[0];if(!h)continue;f=a[0].cells[d];l&&(2<n?(n--,h.insertBefore(f,
h.cells[d]),h.cells[d].setAttribute("rowSpan",n),h.cells[d].innerHTML=""):2===n&&(h.insertBefore(f,h.cells[d]),h.cells[d].removeAttribute("rowSpan"),h.cells[d].innerHTML=""));continue;case D.resultAction.SubtractSpanCount:l&&(2<n?(n--,h.setAttribute("rowSpan",n),f.rowIndex!==e&&h.cellIndex===d&&(h.innerHTML="")):2===n&&(h.removeAttribute("rowSpan"),f.rowIndex!==e&&h.cellIndex===d&&(h.innerHTML="")))}}a.remove()};a.prototype.deleteCol=function(a){var c=m.ancestor(a.commonAncestor(),m.isCell),d=b(c).closest("tr");
a=d.children("td, th").index(b(c));c=(new D(c,D.where.Column,D.requestAction.Delete,b(d).closest("table")[0])).getActionList();for(d=0;d<c.length;d++)if(c[d])switch(c[d].action){case D.resultAction.Ignore:continue;case D.resultAction.SubtractSpanCount:var e=c[d].baseCell;if(e.colSpan&&1<e.colSpan){var g=e.colSpan?parseInt(e.colSpan,10):0;2<g?(g--,e.setAttribute("colSpan",g),e.cellIndex===a&&(e.innerHTML="")):2===g&&(e.removeAttribute("colSpan"),e.cellIndex===a&&(e.innerHTML=""))}continue;case D.resultAction.RemoveCell:m.remove(c[d].baseCell,
!0)}};a.prototype.createTable=function(a,c,d){for(var e=[],g=0;g<a;g++)e.push("<td>"+m.blank+"</td>");a=e.join("");e=[];for(g=0;g<c;g++)e.push("<tr>"+a+"</tr>");c=e.join("");c=b("<table>"+c+"</table>");d&&d.tableClassName&&c.addClass(d.tableClassName);return c[0]};a.prototype.deleteTable=function(a){a=m.ancestor(a.commonAncestor(),m.isCell);b(a).closest("table").remove()};return a}(),cb=function(){function a(c){var d=this;this.context=c;this.$note=c.layoutInfo.note;this.$editor=c.layoutInfo.editor;
this.$editable=c.layoutInfo.editable;this.options=c.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.lastRange=null;this.style=new $a;this.table=new bb;this.typing=new ab(c);this.bullet=new Na;this.history=new Za(this.$editable);this.context.memo("help.undo",this.lang.help.undo);this.context.memo("help.redo",this.lang.help.redo);this.context.memo("help.tab",this.lang.help.tab);this.context.memo("help.untab",this.lang.help.untab);this.context.memo("help.insertParagraph",
this.lang.help.insertParagraph);this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList);this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList);this.context.memo("help.indent",this.lang.help.indent);this.context.memo("help.outdent",this.lang.help.outdent);this.context.memo("help.formatPara",this.lang.help.formatPara);this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule);this.context.memo("help.fontName",this.lang.help.fontName);
c="bold italic underline strikethrough superscript subscript justifyLeft justifyCenter justifyRight justifyFull formatBlock removeFormat backColor".split(" ");for(var e=0,g=c.length;e<g;e++)this[c[e]]=function(a){return function(b){d.beforeCommand();document.execCommand(a,!1,b);d.afterCommand(!0)}}(c[e]),this.context.memo("help."+c[e],this.lang.help[c[e]]);this.fontName=this.wrapCommand(function(a){return d.fontStyling("font-family","'"+a+"'")});this.fontSize=this.wrapCommand(function(a){return d.fontStyling("font-size",
a+"px")});for(e=1;6>=e;e++)this["formatH"+e]=function(a){return function(){d.formatBlock("H"+a)}}(e),this.context.memo("help.formatH"+e,this.lang.help["formatH"+e]);this.insertParagraph=this.wrapCommand(function(){d.typing.insertParagraph(d.editable)});this.insertOrderedList=this.wrapCommand(function(){d.bullet.insertOrderedList(d.editable)});this.insertUnorderedList=this.wrapCommand(function(){d.bullet.insertUnorderedList(d.editable)});this.indent=this.wrapCommand(function(){d.bullet.indent(d.editable)});
this.outdent=this.wrapCommand(function(){d.bullet.outdent(d.editable)});this.insertNode=this.wrapCommand(function(a){d.isLimited(b(a).text().length)||(d.getLastRange().insertNode(a),I.createFromNodeAfter(a).select(),d.setLastRange())});this.insertText=this.wrapCommand(function(a){d.isLimited(a.length)||(a=d.getLastRange().insertNode(m.createText(a)),I.create(a,m.nodeLength(a)).select(),d.setLastRange())});this.pasteHTML=this.wrapCommand(function(a){d.isLimited(a.length)||(a=d.context.invoke("codeview.purify",
a),a=d.getLastRange().pasteHTML(a),I.createFromNodeAfter(w.last(a)).select(),d.setLastRange())});this.formatBlock=this.wrapCommand(function(a,b){var c=d.options.callbacks.onApplyCustomStyle;if(c)c.call(d,b,d.context,d.onFormatBlock);else d.onFormatBlock(a,b)});this.insertHorizontalRule=this.wrapCommand(function(){var a=d.getLastRange().insertNode(m.create("HR"));a.nextSibling&&(I.create(a.nextSibling,0).normalize().select(),d.setLastRange())});this.lineHeight=this.wrapCommand(function(a){d.style.stylePara(d.getLastRange(),
{lineHeight:a})});this.createLink=this.wrapCommand(function(a){var c=a.url,e=a.text,S=a.isNewWindow,g=a.range||d.getLastRange();a=e.length-g.toString().length;if(!(0<a&&d.isLimited(a))){var h=g.toString()!==e;"string"===typeof c&&(c=c.trim());c=d.options.onCreateLink?d.options.onCreateLink(c):/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(c)?c:"http://"+c;a=[];h?(g=g.deleteContents(),e=g.insertNode(b("<A>"+e+"</A>")[0]),a.push(e)):a=d.style.styleNodes(g,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});
b.each(a,function(a,d){b(d).attr("href",c);S?b(d).attr("target","_blank"):b(d).removeAttr("target")});e=I.createFromNodeBefore(w.head(a)).getStartPoint();a=I.createFromNodeAfter(w.last(a)).getEndPoint();I.create(e.node,e.offset,a.node,a.offset).select();d.setLastRange()}});this.color=this.wrapCommand(function(a){var b=a.foreColor;a=a.backColor;b&&document.execCommand("foreColor",!1,b);a&&document.execCommand("backColor",!1,a)});this.foreColor=this.wrapCommand(function(a){document.execCommand("styleWithCSS",
!1,!0);document.execCommand("foreColor",!1,a)});this.insertTable=this.wrapCommand(function(a){a=a.split("x");d.getLastRange().deleteContents().insertNode(d.table.createTable(a[0],a[1],d.options))});this.removeMedia=this.wrapCommand(function(){var a=b(d.restoreTarget()).parent();a.parent("figure").length?a.parent("figure").remove():a=b(d.restoreTarget()).detach();d.context.triggerEvent("media.delete",a,d.$editable)});this.floatMe=this.wrapCommand(function(a){var c=b(d.restoreTarget());c.toggleClass("note-float-left",
"left"===a);c.toggleClass("note-float-right","right"===a);c.css("float","none"===a?"":a)});this.resize=this.wrapCommand(function(a){var c=b(d.restoreTarget());a=parseFloat(a);0===a?c.css("width",""):c.css({width:100*a+"%",height:""})})}a.prototype.initialize=function(){var a=this;this.$editable.on("keydown",function(b){b.keyCode===K.code.ENTER&&a.context.triggerEvent("enter",b);a.context.triggerEvent("keydown",b);b.isDefaultPrevented()||(a.options.shortcuts?a.handleKeyMap(b):a.preventDefaultEditableShortCuts(b));
if(a.isLimited(1,b))return!1}).on("keyup",function(b){a.setLastRange();a.context.triggerEvent("keyup",b)}).on("focus",function(b){a.setLastRange();a.context.triggerEvent("focus",b)}).on("blur",function(b){a.context.triggerEvent("blur",b)}).on("mousedown",function(b){a.context.triggerEvent("mousedown",b)}).on("mouseup",function(b){a.setLastRange();a.context.triggerEvent("mouseup",b)}).on("scroll",function(b){a.context.triggerEvent("scroll",b)}).on("paste",function(b){a.setLastRange();a.context.triggerEvent("paste",
b)});this.$editable.attr("spellcheck",this.options.spellCheck);this.$editable.html(m.html(this.$note)||m.emptyPara);this.$editable.on(M.inputEventName,F.debounce(function(){a.context.triggerEvent("change",a.$editable.html(),a.$editable)},10));this.$editor.on("focusin",function(b){a.context.triggerEvent("focusin",b)}).on("focusout",function(b){a.context.triggerEvent("focusout",b)});this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),
this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight));this.history.recordUndo();this.setLastRange()};a.prototype.destroy=function(){this.$editable.off()};a.prototype.handleKeyMap=function(a){var b=this.options.keyMap[M.isMac?"mac":"pc"],c=[];a.metaKey&&c.push("CMD");a.ctrlKey&&!a.altKey&&c.push("CTRL");a.shiftKey&&c.push("SHIFT");var d=K.nameFromCode[a.keyCode];d&&c.push(d);(b=b[c.join("+")])?
!1!==this.context.invoke(b)&&a.preventDefault():K.isEdit(a.keyCode)&&this.afterCommand()};a.prototype.preventDefaultEditableShortCuts=function(a){(a.ctrlKey||a.metaKey)&&w.contains([66,73,85],a.keyCode)&&a.preventDefault()};a.prototype.isLimited=function(a,b){a=a||0;return"undefined"!==typeof b&&(K.isMove(b.keyCode)||b.ctrlKey||b.metaKey||w.contains([K.code.BACKSPACE,K.code.DELETE],b.keyCode))?!1:0<this.options.maxTextLength&&this.$editable.text().length+a>=this.options.maxTextLength?!0:!1};a.prototype.createRange=
function(){this.focus();this.setLastRange();return this.getLastRange()};a.prototype.setLastRange=function(){this.lastRange=I.create(this.editable)};a.prototype.getLastRange=function(){this.lastRange||this.setLastRange();return this.lastRange};a.prototype.saveRange=function(a){a&&this.getLastRange().collapse().select()};a.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())};a.prototype.saveTarget=function(a){this.$editable.data("target",a)};a.prototype.clearTarget=
function(){this.$editable.removeData("target")};a.prototype.restoreTarget=function(){return this.$editable.data("target")};a.prototype.currentStyle=function(){var a=I.create();a&&(a=a.normalize());return a?this.style.current(a):this.style.fromNode(this.$editable)};a.prototype.styleFromNode=function(a){return this.style.fromNode(a)};a.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html(),
this.$editable)};a.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.commit();this.context.triggerEvent("change",this.$editable.html(),this.$editable)};a.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html(),this.$editable)};a.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html());this.focus()};
a.prototype.afterCommand=function(a){this.normalizeContent();this.history.recordUndo();a||this.context.triggerEvent("change",this.$editable.html(),this.$editable)};a.prototype.tab=function(){var a=this.getLastRange();if(a.isCollapsed()&&a.isOnCell())this.table.tab(a);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(a,this.options.tabSize),this.afterCommand())}};a.prototype.untab=function(){var a=this.getLastRange();if(a.isCollapsed()&&
a.isOnCell())this.table.tab(a,!0);else if(0===this.options.tabSize)return!1};a.prototype.wrapCommand=function(a){return function(){this.beforeCommand();a.apply(this,arguments);this.afterCommand()}};a.prototype.insertImage=function(a,b){var c=this;return Z(a,b).then(function(a){c.beforeCommand();"function"===typeof b?b(a):("string"===typeof b&&a.attr("data-filename",b),a.css("width",Math.min(c.$editable.width(),a.width())));a.show();I.create(c.editable).insertNode(a[0]);I.createFromNodeAfter(a[0]).select();
c.setLastRange();c.afterCommand()}).fail(function(a){c.context.triggerEvent("image.upload.error",a)})};a.prototype.insertImagesAsDataURL=function(a){var c=this;b.each(a,function(a,b){var d=b.name;c.options.maximumImageFileSize&&c.options.maximumImageFileSize<b.size?c.context.triggerEvent("image.upload.error",c.lang.image.maximumFileSizeError):q(b).then(function(a){return c.insertImage(a,d)}).fail(function(){c.context.triggerEvent("image.upload.error")})})};a.prototype.insertImagesOrCallback=function(a){this.options.callbacks.onImageUpload?
this.context.triggerEvent("image.upload",a):this.insertImagesAsDataURL(a)};a.prototype.getSelectedText=function(){var a=this.getLastRange();a.isOnAnchor()&&(a=I.createFromNode(m.ancestor(a.sc,m.isAnchor)));return a.toString()};a.prototype.onFormatBlock=function(a,c){document.execCommand("FormatBlock",!1,M.isMSIE?"<"+a+">":a);if(c&&c.length&&(c[0].tagName.toUpperCase()!==a.toUpperCase()&&(c=c.find(a)),c&&c.length&&(c=c[0].className||""))){var d=this.createRange();b([d.sc,d.ec]).closest(a).addClass(c)}};
a.prototype.formatPara=function(){this.formatBlock("P")};a.prototype.fontStyling=function(a,c){var d=this.getLastRange();if(d){var e=this.style.styleNodes(d);b(e).css(a,c);d.isCollapsed()&&(a=w.head(e))&&!m.nodeLength(a)&&(a.innerHTML=m.ZERO_WIDTH_NBSP_CHAR,I.createFromNodeAfter(a.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",a))}};a.prototype.unlink=function(){var a=this.getLastRange();a.isOnAnchor()&&(a=m.ancestor(a.sc,m.isAnchor),a=I.createFromNode(a),a.select(),this.setLastRange(),
this.beforeCommand(),document.execCommand("unlink"),this.afterCommand())};a.prototype.getLinkInfo=function(){var a=this.getLastRange().expand(m.isAnchor),c=b(w.head(a.nodes(m.isAnchor))),a={range:a,text:a.toString(),url:c.length?c.attr("href"):""};c.length&&(a.isNewWindow="_blank"===c.attr("target"));return a};a.prototype.addRow=function(a){var b=this.getLastRange(this.$editable);b.isCollapsed()&&b.isOnCell()&&(this.beforeCommand(),this.table.addRow(b,a),this.afterCommand())};a.prototype.addCol=function(a){var b=
this.getLastRange(this.$editable);b.isCollapsed()&&b.isOnCell()&&(this.beforeCommand(),this.table.addCol(b,a),this.afterCommand())};a.prototype.deleteRow=function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(a),this.afterCommand())};a.prototype.deleteCol=function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(a),this.afterCommand())};a.prototype.deleteTable=function(){var a=
this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(a),this.afterCommand())};a.prototype.resizeTo=function(a,b,c){if(c){c=a.y/a.x;var d=b.data("ratio");a={width:d>c?a.x:a.y/d,height:d>c?a.x*d:a.y}}else a={width:a.x,height:a.y};b.css(a)};a.prototype.hasFocus=function(){return this.$editable.is(":focus")};a.prototype.focus=function(){this.hasFocus()||this.$editable.focus()};a.prototype.isEmpty=function(){return m.isEmpty(this.$editable[0])||
m.emptyPara===this.$editable.html()};a.prototype.empty=function(){this.context.invoke("code",m.emptyPara)};a.prototype.normalizeContent=function(){this.$editable[0].normalize()};return a}(),db=function(){function a(b){this.context=b;this.$editable=b.layoutInfo.editable}a.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))};a.prototype.pasteByEvent=function(a){(a=a.originalEvent.clipboardData)&&a.items&&a.items.length&&(a=1<a.items.length?a.items[1]:w.head(a.items),
"file"===a.kind&&-1!==a.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[a.getAsFile()]),this.context.invoke("editor.afterCommand"))};return a}(),eb=function(){function a(c){this.context=c;this.$eventListener=b(document);this.$editor=c.layoutInfo.editor;this.$editable=c.layoutInfo.editable;this.options=c.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=b('<div class="note-dropzone">  <div class="note-dropzone-message"/></div>').prependTo(this.$editor)}
a.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(a){a.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()};a.prototype.attachDragAndDropEvent=function(){var a=this,c=b(),d=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(b){var e=a.context.invoke("codeview.isActivated"),g=0<a.$editor.width()&&0<a.$editor.height();
e||c.length||!g||(a.$editor.addClass("dragover"),a.$dropzone.width(a.$editor.width()),a.$dropzone.height(a.$editor.height()),d.text(a.lang.image.dragImageHere));c=c.add(b.target)};this.documentEventHandlers.onDragleave=function(b){c=c.not(b.target);c.length||a.$editor.removeClass("dragover")};this.documentEventHandlers.onDrop=function(){c=b();a.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",
this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){a.$dropzone.addClass("hover");d.text(a.lang.image.dropImage)}).on("dragleave",function(){a.$dropzone.removeClass("hover");d.text(a.lang.image.dragImageHere)});this.$dropzone.on("drop",function(c){var d=c.originalEvent.dataTransfer;c.preventDefault();d&&d.files&&d.files.length?(a.$editable.focus(),a.context.invoke("editor.insertImagesOrCallback",d.files)):b.each(d.types,function(c,e){c=d.getData(e);-1<e.toLowerCase().indexOf("text")?
a.context.invoke("editor.pasteHTML",c):b(c).each(function(b,c){a.context.invoke("editor.insertNode",c)})})}).on("dragover",!1)};a.prototype.destroy=function(){var a=this;Object.keys(this.documentEventHandlers).forEach(function(b){a.$eventListener.off(b.substr(2).toLowerCase(),a.documentEventHandlers[b])});this.documentEventHandlers={}};return a}(),Ea;M.hasCodeMirror&&(Ea=window.CodeMirror);var fb=function(){function a(b){this.context=b;this.$editor=b.layoutInfo.editor;this.$editable=b.layoutInfo.editable;
this.$codable=b.layoutInfo.codable;this.options=b.options}a.prototype.sync=function(){this.isActivated()&&M.hasCodeMirror&&this.$codable.data("cmEditor").save()};a.prototype.isActivated=function(){return this.$editor.hasClass("codeview")};a.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate();this.context.triggerEvent("codeview.toggled")};a.prototype.purify=function(a){if(this.options.codeviewFilter&&(a=a.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var b=
this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);a=a.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(a){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(a))return"";for(var c=0;c<b.length;c++)if((new RegExp('src="(https?:)?//'+b[c].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"')).test(a))return a;return""})}return a};a.prototype.activate=function(){var a=this;this.$codable.val(m.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());
this.context.invoke("toolbar.updateCodeview",!0);this.$editor.addClass("codeview");this.$codable.focus();if(M.hasCodeMirror){var b=Ea.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var c=new Ea.TernServer(this.options.codemirror.tern);b.ternServer=c;b.on("cursorActivity",function(a){c.updateArgHints(a)})}b.on("blur",function(c){a.context.triggerEvent("blur.codeview",b.getValue(),c)});b.on("change",function(c){a.context.triggerEvent("change.codeview",b.getValue(),
b)});b.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",b)}else this.$codable.on("blur",function(b){a.context.triggerEvent("blur.codeview",a.$codable.val(),b)}),this.$codable.on("input",function(b){a.context.triggerEvent("change.codeview",a.$codable.val(),a.$codable)})};a.prototype.deactivate=function(){if(M.hasCodeMirror){var a=this.$codable.data("cmEditor");this.$codable.val(a.getValue());a.toTextArea()}var a=this.purify(m.value(this.$codable,this.options.prettifyHtml)||
m.emptyPara),b=this.$editable.html()!==a;this.$editable.html(a);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");b&&this.context.triggerEvent("change",this.$editable.html(),this.$editable);this.$editable.focus();this.context.invoke("toolbar.updateCodeview",!1)};a.prototype.destroy=function(){this.isActivated()&&this.deactivate()};return a}(),gb=function(){function a(c){this.$document=b(document);this.$statusbar=c.layoutInfo.statusbar;this.$editable=
c.layoutInfo.editable;this.options=c.options}a.prototype.initialize=function(){var a=this;if(this.options.airMode||this.options.disableResizeEditor)this.destroy();else this.$statusbar.on("mousedown",function(b){b.preventDefault();b.stopPropagation();var c=a.$editable.offset().top-a.$document.scrollTop(),d=function(b){b=b.clientY-(c+24);b=0<a.options.minheight?Math.max(b,a.options.minheight):b;b=0<a.options.maxHeight?Math.min(b,a.options.maxHeight):b;a.$editable.height(b)};a.$document.on("mousemove",
d).one("mouseup",function(){a.$document.off("mousemove",d)})})};a.prototype.destroy=function(){this.$statusbar.off();this.$statusbar.addClass("locked")};return a}(),hb=function(){function a(c){var d=this;this.context=c;this.$editor=c.layoutInfo.editor;this.$toolbar=c.layoutInfo.toolbar;this.$editable=c.layoutInfo.editable;this.$codable=c.layoutInfo.codable;this.$window=b(window);this.$scrollbar=b("html, body");this.onResize=function(){d.resizeTo({h:d.$window.height()-d.$toolbar.outerHeight()})}}a.prototype.resizeTo=
function(a){this.$editable.css("height",a.h);this.$codable.css("height",a.h);this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,a.h)};a.prototype.toggle=function(){this.$editor.toggleClass("fullscreen");this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow",
"hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible"));this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())};a.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")};return a}(),ib=function(){function a(c){var d=this;this.context=c;this.$document=b(document);this.$editingArea=c.layoutInfo.editingArea;this.options=
c.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(a,b){d.update(b.target,b)&&b.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){d.update()},"summernote.disable":function(){d.hide()},"summernote.codeview.toggled":function(){d.update()}}}a.prototype.initialize=function(){var a=this;this.$handle=b(['<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="',
this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div></div>"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(b){if(m.isControlSizing(b.target)){b.preventDefault();b.stopPropagation();var c=a.$handle.find(".note-control-selection").data("target"),d=c.offset(),e=a.$document.scrollTop(),g=function(b){a.context.invoke("editor.resizeTo",
{x:b.clientX-d.left,y:b.clientY-(d.top-e)},c,!b.shiftKey);a.update(c[0])};a.$document.on("mousemove",g).one("mouseup",function(b){b.preventDefault();a.$document.off("mousemove",g);a.context.invoke("editor.afterCommand")});c.data("ratio")||c.data("ratio",c.height()/c.width())}});this.$handle.on("wheel",function(b){b.preventDefault();a.update()})};a.prototype.destroy=function(){this.$handle.remove()};a.prototype.update=function(a,c){if(this.context.isDisabled())return!1;var d=m.isImg(a),e=this.$handle.find(".note-control-selection");
this.context.invoke("imagePopover.update",a,c);if(d){c=b(a);var g=c.position(),h=g.left+parseInt(c.css("marginLeft"),10),f=g.top+parseInt(c.css("marginTop"),10),g=c.outerWidth(!1),l=c.outerHeight(!1);e.css({display:"block",left:h,top:f,width:g,height:l}).data("target",c);h=new Image;h.src=c.attr("src");c=g+"x"+l+" ("+this.lang.image.original+": "+h.width+"x"+h.height+")";e.find(".note-control-selection-info").text(c);this.context.invoke("editor.saveTarget",a)}else this.hide();return d};a.prototype.hide=
function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()};return a}(),jb=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,kb=function(){function a(b){var c=this;this.context=b;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}a.prototype.initialize=function(){this.lastWordRange=null};a.prototype.destroy=function(){this.lastWordRange=null};a.prototype.replace=
function(){if(this.lastWordRange){var a=this.lastWordRange.toString(),c=a.match(jb);c&&(c[1]||c[2])&&(c=c[1]?a:"http://"+a,a=b("<a />").html(a).attr("href",c)[0],this.context.options.linkTargetBlank&&b(a).attr("target","_blank"),this.lastWordRange.insertNode(a),this.lastWordRange=null,this.context.invoke("editor.focus"))}};a.prototype.handleKeydown=function(a){w.contains([K.code.ENTER,K.code.SPACE],a.keyCode)&&(this.lastWordRange=this.context.invoke("editor.createRange").getWordRange())};a.prototype.handleKeyup=
function(a){w.contains([K.code.ENTER,K.code.SPACE],a.keyCode)&&this.replace()};return a}(),lb=function(){function a(b){var c=this;this.$note=b.layoutInfo.note;this.events={"summernote.change":function(){c.$note.val(b.invoke("code"))}}}a.prototype.shouldInitialize=function(){return m.isTextarea(this.$note[0])};return a}(),mb=function(){function a(b){var c=this;this.context=b;this.options=b.options.replace||{};this.keys=[K.code.ENTER,K.code.SPACE,K.code.PERIOD,K.code.COMMA,K.code.SEMICOLON,K.code.SLASH];
this.previousKeydownCode=null;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}a.prototype.shouldInitialize=function(){return!!this.options.match};a.prototype.initialize=function(){this.lastWord=null};a.prototype.destroy=function(){this.lastWord=null};a.prototype.replace=function(){if(this.lastWord){var a=this;this.options.match(this.lastWord.toString(),function(b){if(b){var c="";"string"===typeof b?c=m.createText(b):
b instanceof jQuery?c=b[0]:b instanceof Node&&(c=b);c&&(a.lastWord.insertNode(c),a.lastWord=null,a.context.invoke("editor.focus"))}})}};a.prototype.handleKeydown=function(a){this.previousKeydownCode&&w.contains(this.keys,this.previousKeydownCode)||!w.contains(this.keys,a.keyCode)||(this.lastWord=this.context.invoke("editor.createRange").getWordRange());this.previousKeydownCode=a.keyCode};a.prototype.handleKeyup=function(a){w.contains(this.keys,a.keyCode)&&this.replace()};return a}(),nb=function(){function a(b){var c=
this;this.context=b;this.$editingArea=b.layoutInfo.editingArea;this.options=b.options;this.events={"summernote.init summernote.change":function(){c.update()},"summernote.codeview.toggled":function(){c.update()}}}a.prototype.shouldInitialize=function(){return!!this.options.placeholder};a.prototype.initialize=function(){var a=this;this.$placeholder=b('<div class="note-placeholder">');this.$placeholder.on("click",function(){a.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea);
this.update()};a.prototype.destroy=function(){this.$placeholder.remove()};a.prototype.update=function(){var a=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(a)};return a}(),ob=function(){function a(c){this.ui=b.summernote.ui;this.context=c;this.$toolbar=c.layoutInfo.toolbar;this.options=c.options;this.lang=this.options.langInfo;this.invertedKeyMap=F.invertObject(this.options.keyMap[M.isMac?"mac":"pc"])}a.prototype.representShortcut=function(a){a=
this.invertedKeyMap[a];if(!this.options.shortcuts||!a)return"";M.isMac&&(a=a.replace("CMD","\u2318").replace("SHIFT","\u21e7"));a=a.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+a+")"};a.prototype.button=function(a){!this.options.tooltip&&a.tooltip&&delete a.tooltip;a.container=this.options.container;return this.ui.button(a)};a.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();
this.addTablePopoverButtons();this.fontInstalledMap={}};a.prototype.destroy=function(){delete this.fontInstalledMap};a.prototype.isFontInstalled=function(a){this.fontInstalledMap.hasOwnProperty(a)||(this.fontInstalledMap[a]=M.isFontInstalled(a)||w.contains(this.options.fontNamesIgnoreCheck,a));return this.fontInstalledMap[a]};a.prototype.isFontDeservedToAdd=function(a){var b=["sans-serif","serif","monospace","cursive","fantasy"];a=a.toLowerCase();return""!==a&&this.isFontInstalled(a)&&-1===b.indexOf(a)};
a.prototype.colorPalette=function(a,c,d,e){var g=this;return this.ui.buttonGroup({className:"note-color "+a,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:c,click:function(a){a=b(a.currentTarget);d&&e?g.context.invoke("editor.color",{backColor:a.attr("data-backColor"),foreColor:a.attr("data-foreColor")}):d?g.context.invoke("editor.color",{backColor:a.attr("data-backColor")}):e&&g.context.invoke("editor.color",
{foreColor:a.attr("data-foreColor")})},callback:function(a){var b=a.find(".note-recent-color");d&&(b.css("background-color",g.options.colorButton.backColor),a.attr("data-backColor",g.options.colorButton.backColor));e?(b.css("color",g.options.colorButton.foreColor),a.attr("data-foreColor",g.options.colorButton.foreColor)):b.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),
this.ui.dropdown({items:(d?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>",'  <div>    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,'    </button>  </div>  <div class="note-holder" data-event="backColor"/>  <div>    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",
'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette">','  </div>  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/></div>'].join(""):"")+(e?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>",'  <div>    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',
this.lang.color.resetToDefault,'    </button>  </div>  <div class="note-holder" data-event="foreColor"/>  <div>    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/></div>'].join(""):
""),callback:function(a){a.find(".note-holder").each(function(a,c){a=b(c);a.append(g.ui.palette({colors:g.options.colors,colorsName:g.options.colorsName,eventName:a.data("event"),container:g.options.container,tooltip:g.options.tooltip}).render())});var c=["#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" ")];a.find(".note-holder-custom").each(function(a,d){a=b(d);a.append(g.ui.palette({colors:c,colorsName:c,eventName:a.data("event"),container:g.options.container,tooltip:g.options.tooltip}).render())});
a.find("input[type=color]").each(function(c,d){b(d).change(function(){var c=a.find("#"+b(this).data("event")).find(".note-color-btn").first(),d=this.value.toUpperCase();c.css("background-color",d).attr("aria-label",d).attr("data-value",d).attr("data-original-title",d);c.click()})})},click:function(c){c.stopPropagation();var d=b("."+a),e=b(c.target);c=e.data("event");var h=e.attr("data-value");if("openPalette"===c)c=d.find("#"+h),h=b(d.find("#"+c.data("event")).find(".note-color-row")[0]),d=h.find(".note-color-btn").last().detach(),
e=c.val(),d.css("background-color",e).attr("aria-label",e).attr("data-value",e).attr("data-original-title",e),h.prepend(d),c.click();else if(w.contains(["backColor","foreColor"],c)){var d="backColor"===c?"background-color":"color",f=e.closest(".note-color").find(".note-recent-color"),e=e.closest(".note-color").find(".note-current-color-button");f.css(d,h);e.attr("data-"+c,h);g.context.invoke("editor."+c,h)}}})]}).render()};a.prototype.addToolbarButtons=function(){var a=this;this.context.memo("button.style",
function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.magic),a.options),tooltip:a.lang.style.style,data:{toggle:"dropdown"}}),a.ui.dropdown({className:"dropdown-style",items:a.options.styleTags,title:a.lang.style.style,template:function(b){"string"===typeof b&&(b={tag:b,title:a.lang.style.hasOwnProperty(b)?a.lang.style[b]:b});var c=b.tag;return"<"+c+(b.style?' style="'+b.style+'" ':"")+(b.className?' class="'+b.className+
'"':"")+">"+b.title+"</"+c+">"},click:a.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var c=function(b,c){var e=d.options.styleTags[b];d.context.memo("button.style."+e,function(){return a.button({className:"note-btn-style-"+e,contents:'<div data-value="'+e+'">'+e.toUpperCase()+"</div>",tooltip:a.lang.style[e],click:a.context.createInvokeHandler("editor.formatBlock")}).render()})},d=this,e=0,g=this.options.styleTags.length;e<g;e++)c(e,g);this.context.memo("button.bold",function(){return a.button({className:"note-btn-bold",
contents:a.ui.icon(a.options.icons.bold),tooltip:a.lang.font.bold+a.representShortcut("bold"),click:a.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return a.button({className:"note-btn-italic",contents:a.ui.icon(a.options.icons.italic),tooltip:a.lang.font.italic+a.representShortcut("italic"),click:a.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return a.button({className:"note-btn-underline",
contents:a.ui.icon(a.options.icons.underline),tooltip:a.lang.font.underline+a.representShortcut("underline"),click:a.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return a.button({contents:a.ui.icon(a.options.icons.eraser),tooltip:a.lang.font.clear+a.representShortcut("removeFormat"),click:a.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return a.button({className:"note-btn-strikethrough",
contents:a.ui.icon(a.options.icons.strikethrough),tooltip:a.lang.font.strikethrough+a.representShortcut("strikethrough"),click:a.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return a.button({className:"note-btn-superscript",contents:a.ui.icon(a.options.icons.superscript),tooltip:a.lang.font.superscript,click:a.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",
function(){return a.button({className:"note-btn-subscript",contents:a.ui.icon(a.options.icons.subscript),tooltip:a.lang.font.subscript,click:a.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var c=a.context.invoke("editor.currentStyle");b.each(c["font-family"].split(","),function(b,c){c=c.trim().replace(/['"]+/g,"");a.isFontDeservedToAdd(c)&&-1===a.options.fontNames.indexOf(c)&&a.options.fontNames.push(c)});return a.ui.buttonGroup([a.button({className:"dropdown-toggle",
contents:a.ui.dropdownButtonContents('<span class="note-current-fontname"/>',a.options),tooltip:a.lang.font.name,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:a.options.icons.menuCheck,items:a.options.fontNames.filter(a.isFontInstalled.bind(a)),title:a.lang.font.name,template:function(a){return"<span style=\"font-family: '"+a+"'\">"+a+"</span>"},click:a.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",
function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',a.options),tooltip:a.lang.font.size,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizes,title:a.lang.font.size,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.color",function(){return a.colorPalette("note-color-all",
a.lang.color.recent,!0,!0)});this.context.memo("button.forecolor",function(){return a.colorPalette("note-color-fore",a.lang.color.foreground,!1,!0)});this.context.memo("button.backcolor",function(){return a.colorPalette("note-color-back",a.lang.color.background,!0,!1)});this.context.memo("button.ul",function(){return a.button({contents:a.ui.icon(a.options.icons.unorderedlist),tooltip:a.lang.lists.unordered+a.representShortcut("insertUnorderedList"),click:a.context.createInvokeHandler("editor.insertUnorderedList")}).render()});
this.context.memo("button.ol",function(){return a.button({contents:a.ui.icon(a.options.icons.orderedlist),tooltip:a.lang.lists.ordered+a.representShortcut("insertOrderedList"),click:a.context.createInvokeHandler("editor.insertOrderedList")}).render()});var h=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),f=this.button({contents:this.ui.icon(this.options.icons.alignCenter),
tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),n=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),
p=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),m=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",F.invoke(h,"render"));this.context.memo("button.justifyCenter",F.invoke(f,"render"));
this.context.memo("button.justifyRight",F.invoke(l,"render"));this.context.memo("button.justifyFull",F.invoke(n,"render"));this.context.memo("button.outdent",F.invoke(p,"render"));this.context.memo("button.indent",F.invoke(m,"render"));this.context.memo("button.paragraph",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.alignLeft),a.options),tooltip:a.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),a.ui.dropdown([a.ui.buttonGroup({className:"note-align",
children:[h,f,l,n]}),a.ui.buttonGroup({className:"note-list",children:[p,m]})])]).render()});this.context.memo("button.height",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.textHeight),a.options),tooltip:a.lang.font.height,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({items:a.options.lineHeights,checkClassName:a.options.icons.menuCheck,className:"dropdown-line-height",title:a.lang.font.height,click:a.context.createInvokeHandler("editor.lineHeight")})]).render()});
this.context.memo("button.table",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.table),a.options),tooltip:a.lang.table.table,data:{toggle:"dropdown"}}),a.ui.dropdown({title:a.lang.table.table,className:"note-table",items:'<div class="note-dimension-picker">  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>  <div class="note-dimension-picker-highlighted"/>  <div class="note-dimension-picker-unhighlighted"/></div><div class="note-dimension-display">1 x 1</div>'})],
{callback:function(b){b.find(".note-dimension-picker-mousecatcher").css({width:a.options.insertTableMaxSize.col+"em",height:a.options.insertTableMaxSize.row+"em"}).mousedown(a.context.createInvokeHandler("editor.insertTable")).on("mousemove",a.tableMoveHandler.bind(a))}}).render()});this.context.memo("button.link",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.link+a.representShortcut("linkDialog.show"),click:a.context.createInvokeHandler("linkDialog.show")}).render()});
this.context.memo("button.picture",function(){return a.button({contents:a.ui.icon(a.options.icons.picture),tooltip:a.lang.image.image,click:a.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return a.button({contents:a.ui.icon(a.options.icons.video),tooltip:a.lang.video.video,click:a.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return a.button({contents:a.ui.icon(a.options.icons.minus),
tooltip:a.lang.hr.insert+a.representShortcut("insertHorizontalRule"),click:a.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return a.button({className:"btn-fullscreen",contents:a.ui.icon(a.options.icons.arrowsAlt),tooltip:a.lang.options.fullscreen,click:a.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return a.button({className:"btn-codeview",contents:a.ui.icon(a.options.icons.code),
tooltip:a.lang.options.codeview,click:a.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return a.button({contents:a.ui.icon(a.options.icons.redo),tooltip:a.lang.history.redo+a.representShortcut("redo"),click:a.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return a.button({contents:a.ui.icon(a.options.icons.undo),tooltip:a.lang.history.undo+a.representShortcut("undo"),click:a.context.createInvokeHandler("editor.undo")}).render()});
this.context.memo("button.help",function(){return a.button({contents:a.ui.icon(a.options.icons.question),tooltip:a.lang.options.help,click:a.context.createInvokeHandler("helpDialog.show")}).render()})};a.prototype.addImagePopoverButtons=function(){var a=this;this.context.memo("button.resizeFull",function(){return a.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:a.lang.image.resizeFull,click:a.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.resizeHalf",
function(){return a.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:a.lang.image.resizeHalf,click:a.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.resizeQuarter",function(){return a.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:a.lang.image.resizeQuarter,click:a.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.resizeNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),
tooltip:a.lang.image.resizeNone,click:a.context.createInvokeHandler("editor.resize","0")}).render()});this.context.memo("button.floatLeft",function(){return a.button({contents:a.ui.icon(a.options.icons.floatLeft),tooltip:a.lang.image.floatLeft,click:a.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return a.button({contents:a.ui.icon(a.options.icons.floatRight),tooltip:a.lang.image.floatRight,click:a.context.createInvokeHandler("editor.floatMe",
"right")}).render()});this.context.memo("button.floatNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),tooltip:a.lang.image.floatNone,click:a.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return a.button({contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.image.remove,click:a.context.createInvokeHandler("editor.removeMedia")}).render()})};a.prototype.addLinkPopoverButtons=function(){var a=this;
this.context.memo("button.linkDialogShow",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.edit,click:a.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return a.button({contents:a.ui.icon(a.options.icons.unlink),tooltip:a.lang.link.unlink,click:a.context.createInvokeHandler("editor.unlink")}).render()})};a.prototype.addTablePopoverButtons=function(){var a=this;this.context.memo("button.addRowUp",function(){return a.button({className:"btn-md",
contents:a.ui.icon(a.options.icons.rowAbove),tooltip:a.lang.table.addRowAbove,click:a.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowBelow),tooltip:a.lang.table.addRowBelow,click:a.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colBefore),
tooltip:a.lang.table.addColLeft,click:a.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colAfter),tooltip:a.lang.table.addColRight,click:a.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowRemove),tooltip:a.lang.table.delRow,
click:a.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colRemove),tooltip:a.lang.table.delCol,click:a.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.table.delTable,click:a.context.createInvokeHandler("editor.deleteTable")}).render()})};
a.prototype.build=function(a,b){for(var c=0,d=b.length;c<d;c++){for(var e=b[c],g=Array.isArray(e)?e[0]:e,e=Array.isArray(e)?1===e.length?[e[0]]:e[1]:[e],g=this.ui.buttonGroup({className:"note-"+g}).render(),h=0,f=e.length;h<f;h++){var l=this.context.memo("button."+e[h]);l&&g.append("function"===typeof l?l():l)}g.appendTo(a)}};a.prototype.updateCurrentStyle=function(a){var c=this;a=a||this.$toolbar;var d=this.context.invoke("editor.currentStyle");this.updateBtnStates(a,{".note-btn-bold":function(){return"bold"===
d["font-bold"]},".note-btn-italic":function(){return"italic"===d["font-italic"]},".note-btn-underline":function(){return"underline"===d["font-underline"]},".note-btn-subscript":function(){return"subscript"===d["font-subscript"]},".note-btn-superscript":function(){return"superscript"===d["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===d["font-strikethrough"]}});if(d["font-family"]){var e=d["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,
"").replace(/^\s+/,"")}),g=w.find(e,this.isFontInstalled.bind(this));a.find(".dropdown-fontname a").each(function(a,c){a=b(c);c=a.data("value")+""===g+"";a.toggleClass("checked",c)});a.find(".note-current-fontname").text(g).css("font-family",g)}if(d["font-size"]){var h=d["font-size"];a.find(".dropdown-fontsize a").each(function(a,c){a=b(c);c=a.data("value")+""===h+"";a.toggleClass("checked",c)});a.find(".note-current-fontsize").text(h)}if(d["line-height"]){var f=d["line-height"];a.find(".dropdown-line-height li a").each(function(a,
d){a=b(d).data("value")+""===f+"";c.className=a?"checked":""})}};a.prototype.updateBtnStates=function(a,c){var d=this;b.each(c,function(b,c){d.ui.toggleBtnActive(a.find(b),c())})};a.prototype.tableMoveHandler=function(a){var c,d=b(a.target.parentNode),e=d.next(),g=d.find(".note-dimension-picker-mousecatcher"),h=d.find(".note-dimension-picker-highlighted"),d=d.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var f=b(a.target).offset();c=a.pageX-f.left;a=a.pageY-f.top}else c=a.offsetX,
a=a.offsetY;c=Math.ceil(c/18)||1;a=Math.ceil(a/18)||1;h.css({width:c+"em",height:a+"em"});g.data("value",c+"x"+a);3<c&&c<this.options.insertTableMaxSize.col&&d.css({width:c+1+"em"});3<a&&a<this.options.insertTableMaxSize.row&&d.css({height:a+1+"em"});e.html(c+" x "+a)};return a}(),pb=function(){function a(c){this.context=c;this.$window=b(window);this.$document=b(document);this.ui=b.summernote.ui;this.$note=c.layoutInfo.note;this.$editor=c.layoutInfo.editor;this.$toolbar=c.layoutInfo.toolbar;this.$editable=
c.layoutInfo.editable;this.$statusbar=c.layoutInfo.statusbar;this.options=c.options;this.isFollowing=!1;this.followScroll=this.followScroll.bind(this)}a.prototype.shouldInitialize=function(){return!this.options.airMode};a.prototype.initialize=function(){var a=this;this.options.toolbar=this.options.toolbar||[];this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide();this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer);
this.changeContainer(!1);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){a.context.invoke("buttons.updateCurrentStyle")});this.context.invoke("buttons.updateCurrentStyle");if(this.options.followingToolbar)this.$window.on("scroll resize",this.followScroll)};a.prototype.destroy=function(){this.$toolbar.children().remove();this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)};a.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;
var a=this.$editor.outerHeight(),c=this.$editor.width(),d=this.$toolbar.height(),e=this.$statusbar.height(),g=0;this.options.otherStaticBar&&(g=b(this.options.otherStaticBar).outerHeight());var h=this.$document.scrollTop(),f=this.$editor.offset().top,l=f-g,a=f+a-g-d-e;!this.isFollowing&&h>l&&h<a-d?(this.isFollowing=!0,this.$toolbar.css({position:"fixed",top:g,width:c}),this.$editable.css({marginTop:this.$toolbar.height()+5})):this.isFollowing&&(h<l||h>a)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",
top:0,width:"100%"}),this.$editable.css({marginTop:""}))};a.prototype.changeContainer=function(a){a?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer);this.followScroll()};a.prototype.updateFullscreen=function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),a);this.changeContainer(a)};a.prototype.updateCodeview=function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),a);a?this.deactivate():this.activate()};
a.prototype.activate=function(a){var b=this.$toolbar.find("button");a||(b=b.not(".btn-codeview"));this.ui.toggleBtn(b,!0)};a.prototype.deactivate=function(a){var b=this.$toolbar.find("button");a||(b=b.not(".btn-codeview"));this.ui.toggleBtn(b,!1)};return a}(),qb=function(){function a(c){this.context=c;this.ui=b.summernote.ui;this.$body=b(document.body);this.$editor=c.layoutInfo.editor;this.options=c.options;this.lang=this.options.langInfo;c.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}
a.prototype.initialize=function(){var a=this.options.dialogsInBody?this.$body:this.$editor,c=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" /></div><div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" /></div>',
this.options.disableLinkTarget?"":b("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join("");this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:c,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>'}).render().appendTo(a)};a.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);
this.$dialog.remove()};a.prototype.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===K.code.ENTER&&(a.preventDefault(),b.trigger("click"))})};a.prototype.toggleLinkBtn=function(a,b,c){this.ui.toggleBtn(a,b.val()&&c.val())};a.prototype.showLinkDialog=function(a){var c=this;return b.Deferred(function(b){var d=c.$dialog.find(".note-link-text"),e=c.$dialog.find(".note-link-url"),g=c.$dialog.find(".note-link-btn"),h=c.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");
c.ui.onDialogShown(c.$dialog,function(){c.context.triggerEvent("dialog.shown");!a.url&&F.isValidUrl(a.text)&&(a.url=a.text);d.on("input paste propertychange",function(){a.text=d.val();c.toggleLinkBtn(g,d,e)}).val(a.text);e.on("input paste propertychange",function(){a.text||d.val(e.val());c.toggleLinkBtn(g,d,e)}).val(a.url);M.isSupportTouch||e.trigger("focus");c.toggleLinkBtn(g,d,e);c.bindEnterKey(e,g);c.bindEnterKey(d,g);h.prop("checked",void 0!==a.isNewWindow?a.isNewWindow:c.context.options.linkTargetBlank);
g.one("click",function(g){g.preventDefault();b.resolve({range:a.range,url:e.val(),text:d.val(),isNewWindow:h.is(":checked")});c.ui.hideDialog(c.$dialog)})});c.ui.onDialogHidden(c.$dialog,function(){d.off();e.off();g.off();"pending"===b.state()&&b.reject()});c.ui.showDialog(c.$dialog)}).promise()};a.prototype.show=function(){var a=this,b=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(b).then(function(b){a.context.invoke("editor.restoreRange");
a.context.invoke("editor.createLink",b)}).fail(function(){a.context.invoke("editor.restoreRange")})};return a}(),rb=function(){function a(c){var d=this;this.context=c;this.ui=b.summernote.ui;this.options=c.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){d.update()},"summernote.disable summernote.dialog.shown":function(){d.hide()}}}a.prototype.shouldInitialize=function(){return!w.isEmpty(this.options.popover.link)};a.prototype.initialize=function(){this.$popover=
this.ui.popover({className:"note-link-popover",callback:function(a){a.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.link)};a.prototype.destroy=function(){this.$popover.remove()};a.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var a=this.context.invoke("editor.getLastRange");
if(a.isCollapsed()&&a.isOnAnchor()){var a=m.ancestor(a.sc,m.isAnchor),c=b(a).attr("href");this.$popover.find("a").attr("href",c).html(c);a=m.posFromPlaceholder(a);this.$popover.css({display:"block",left:a.left,top:a.top})}else this.hide()}else this.hide()};a.prototype.hide=function(){this.$popover.hide()};return a}(),sb=function(){function a(c){this.context=c;this.ui=b.summernote.ui;this.$body=b(document.body);this.$editor=c.layoutInfo.editor;this.options=c.options;this.lang=this.options.langInfo}
a.prototype.initialize=function(){var a=this.options.dialogsInBody?this.$body:this.$editor,b="";this.options.maximumImageFileSize&&(b=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),b=1*(this.options.maximumImageFileSize/Math.pow(1024,b)).toFixed(2)+" "+" KMGTP"[b]+"B",b="<small>"+(this.lang.image.maximumFileSize+" : "+b)+"</small>");b=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",
'<input class="note-image-input form-control-file note-form-control note-input"  type="file" name="files" accept="image/*" multiple="multiple" />',b,'</div><div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input  col-md-12" type="text" /></div>'].join("");this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:b,
footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>'}).render().appendTo(a)};a.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};a.prototype.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===K.code.ENTER&&(a.preventDefault(),b.trigger("click"))})};a.prototype.show=function(){var a=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(b){a.ui.hideDialog(a.$dialog);
a.context.invoke("editor.restoreRange");"string"===typeof b?a.options.callbacks.onImageLinkInsert?a.context.triggerEvent("image.link.insert",b):a.context.invoke("editor.insertImage",b):a.context.invoke("editor.insertImagesOrCallback",b)}).fail(function(){a.context.invoke("editor.restoreRange")})};a.prototype.showImageDialog=function(){var a=this;return b.Deferred(function(b){var c=a.$dialog.find(".note-image-input"),d=a.$dialog.find(".note-image-url"),e=a.$dialog.find(".note-image-btn");a.ui.onDialogShown(a.$dialog,
function(){a.context.triggerEvent("dialog.shown");c.replaceWith(c.clone().on("change",function(a){b.resolve(a.target.files||a.target.value)}).val(""));d.on("input paste propertychange",function(){a.ui.toggleBtn(e,d.val())}).val("");M.isSupportTouch||d.trigger("focus");e.click(function(a){a.preventDefault();b.resolve(d.val())});a.bindEnterKey(d,e)});a.ui.onDialogHidden(a.$dialog,function(){c.off();d.off();e.off();"pending"===b.state()&&b.reject()});a.ui.showDialog(a.$dialog)})};return a}(),tb=function(){function a(c){var d=
this;this.context=c;this.ui=b.summernote.ui;this.editable=c.layoutInfo.editable[0];this.options=c.options;this.events={"summernote.disable":function(){d.hide()}}}a.prototype.shouldInitialize=function(){return!w.isEmpty(this.options.popover.image)};a.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.image)};
a.prototype.destroy=function(){this.$popover.remove()};a.prototype.update=function(a,b){if(m.isImg(a)){a=m.posFromPlaceholder(a);var c=m.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?b.pageX-20:a.left,top:this.options.popatmouse?b.pageY:Math.min(a.top,c.top)})}else this.hide()};a.prototype.hide=function(){this.$popover.hide()};return a}(),ub=function(){function a(c){var d=this;this.context=c;this.ui=b.summernote.ui;this.options=c.options;this.events=
{"summernote.mousedown":function(a,b){d.update(b.target)},"summernote.keyup summernote.scroll summernote.change":function(){d.update()},"summernote.disable":function(){d.hide()}}}a.prototype.shouldInitialize=function(){return!w.isEmpty(this.options.popover.table)};a.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",
a,this.options.popover.table);M.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)};a.prototype.destroy=function(){this.$popover.remove()};a.prototype.update=function(a){if(this.context.isDisabled())return!1;var b=m.isCell(a);b?(a=m.posFromPlaceholder(a),this.$popover.css({display:"block",left:a.left,top:a.top})):this.hide();return b};a.prototype.hide=function(){this.$popover.hide()};return a}(),vb=function(){function a(c){this.context=c;this.ui=b.summernote.ui;this.$body=b(document.body);
this.$editor=c.layoutInfo.editor;this.options=c.options;this.lang=this.options.langInfo}a.prototype.initialize=function(){var a=this.options.dialogsInBody?this.$body:this.$editor,b=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" /></div>'].join("");this.$dialog=this.ui.dialog({title:this.lang.video.insert,
fade:this.options.dialogsFade,body:b,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>'}).render().appendTo(a)};a.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};a.prototype.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===K.code.ENTER&&(a.preventDefault(),b.trigger("click"))})};a.prototype.createVideoNode=function(a){var c=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,
d=a.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),e=a.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),g=a.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),h=a.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),f=a.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=a.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),n=a.match(/\/\/v\.qq\.com.*?vid=(.+)/),p=a.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),
m=a.match(/^.+.(mp4|m4v)$/),r=a.match(/^.+.(ogg|ogv)$/),q=a.match(/^.+.(webm)$/),v=a.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(d&&11===d[1].length){a=d[1];e=0;if("undefined"!==typeof d[2]&&(c=d[2].match(c)))for(d=[3600,60,1],g=0,h=d.length;g<h;g++)e+="undefined"!==typeof c[g+1]?d[g]*parseInt(c[g+1],10):0;c=b("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+a+(0<e?"?start="+e:"")).attr("width","640").attr("height","360")}else if(e&&e[0].length)c=b("<iframe>").attr("frameborder",
0).attr("src","https://instagram.com/p/"+e[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(g&&g[0].length)c=b("<iframe>").attr("frameborder",0).attr("src",g[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(h&&h[3].length)c=b("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+h[3]).attr("width","640").attr("height",
"360");else if(f&&f[2].length)c=b("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+f[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)c=b("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else if(n&&n[1].length||p&&p[2].length)c=n&&n[1].length?n[1]:p[2],c=b("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",
0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+c+"&amp;auto=0");else if(m||r||q)c=b("<video controls>").attr("src",a).attr("width","640").attr("height","360");else if(v&&v[0].length)c=b("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(v[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true");else return!1;c.addClass("note-video-clip");
return c[0]};a.prototype.show=function(){var a=this,b=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(b).then(function(b){a.ui.hideDialog(a.$dialog);a.context.invoke("editor.restoreRange");(b=a.createVideoNode(b))&&a.context.invoke("editor.insertNode",b)}).fail(function(){a.context.invoke("editor.restoreRange")})};a.prototype.showVideoDialog=function(a){var c=this;return b.Deferred(function(a){var b=c.$dialog.find(".note-video-url"),d=c.$dialog.find(".note-video-btn");
c.ui.onDialogShown(c.$dialog,function(){c.context.triggerEvent("dialog.shown");b.on("input paste propertychange",function(){c.ui.toggleBtn(d,b.val())});M.isSupportTouch||b.trigger("focus");d.click(function(c){c.preventDefault();a.resolve(b.val())});c.bindEnterKey(b,d)});c.ui.onDialogHidden(c.$dialog,function(){b.off();d.off();"pending"===a.state()&&a.reject()});c.ui.showDialog(c.$dialog)})};return a}(),wb=function(){function a(c){this.context=c;this.ui=b.summernote.ui;this.$body=b(document.body);
this.$editor=c.layoutInfo.editor;this.options=c.options;this.lang=this.options.langInfo}a.prototype.initialize=function(){var a=this.options.dialogsInBody?this.$body:this.$editor;this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:'<p class="text-center"><a href="http://summernote.org/" target="_blank">Summernote 0.8.12</a> \u00b7 <a href="https://github.com/summernote/summernote" target="_blank">Project</a> \u00b7 <a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a></p>',
callback:function(a){a.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(a)};a.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};a.prototype.createShortcutList=function(){var a=this,c=this.options.keyMap[M.isMac?"mac":"pc"];return Object.keys(c).map(function(d){var e=c[d],g=b('<div><div class="help-list-item"/></div>');g.append(b("<label><kbd>"+d+"</kdb></label>").css({width:180,"margin-right":10})).append(b("<span/>").html(a.context.memo("help."+
e)||e));return g.html()}).join("")};a.prototype.showHelpDialog=function(){var a=this;return b.Deferred(function(b){a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown");b.resolve()});a.ui.showDialog(a.$dialog)}).promise()};a.prototype.show=function(){var a=this;this.context.invoke("editor.saveRange");this.showHelpDialog().then(function(){a.context.invoke("editor.restoreRange")})};return a}(),xb=function(){function a(c){var d=this;this.context=c;this.ui=b.summernote.ui;this.options=
c.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){d.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){d.hide()},"summernote.focusout":function(a,b){M.isFF||b.relatedTarget&&m.ancestor(b.relatedTarget,F.eq(d.$popover[0]))||d.hide()}}}a.prototype.shouldInitialize=function(){return this.options.airMode&&!w.isEmpty(this.options.popover.air)};a.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);
var a=this.$popover.find(".popover-content");this.context.invoke("buttons.build",a,this.options.popover.air)};a.prototype.destroy=function(){this.$popover.remove()};a.prototype.update=function(){var a=this.context.invoke("editor.currentStyle");if(a.range&&!a.range.isCollapsed()){if(a=w.last(a.range.getClientRects()))a=F.rect2bnd(a),this.$popover.css({display:"block",left:Math.max(a.left+a.width/2,0)-20,top:a.top+a.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}else this.hide()};
a.prototype.hide=function(){this.$popover.hide()};return a}(),yb=function(){function a(c){var d=this;this.context=c;this.ui=b.summernote.ui;this.$editable=c.layoutInfo.editable;this.options=c.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=Array.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||d.handleKeyup(b)},"summernote.keydown":function(a,b){d.handleKeydown(b)},"summernote.disable summernote.dialog.shown":function(){d.hide()}}}
a.prototype.shouldInitialize=function(){return 0<this.hints.length};a.prototype.initialize=function(){var a=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(c){a.$content.find(".active").removeClass("active");b(c.currentTarget).addClass("active");
a.replace()})};a.prototype.destroy=function(){this.$popover.remove()};a.prototype.selectItem=function(a){this.$content.find(".active").removeClass("active");a.addClass("active");this.$content[0].scrollTop=a[0].offsetTop-this.$content.innerHeight()/2};a.prototype.moveDown=function(){var a=this.$content.find(".note-hint-item.active"),b=a.next();b.length?this.selectItem(b):(a=a.parent().next(),a.length||(a=this.$content.find(".note-hint-group").first()),this.selectItem(a.find(".note-hint-item").first()))};
a.prototype.moveUp=function(){var a=this.$content.find(".note-hint-item.active"),b=a.prev();b.length?this.selectItem(b):(a=a.parent().prev(),a.length||(a=this.$content.find(".note-hint-group").last()),this.selectItem(a.find(".note-hint-item").last()))};a.prototype.replace=function(){var a=this.$content.find(".note-hint-item.active");a.length&&(a=this.nodeFromItem(a),this.lastWordRange.insertNode(a),I.createFromNode(a).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",
this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus"))};a.prototype.nodeFromItem=function(a){var b=this.hints[a.data("index")];a=a.data("item");b=b.content?b.content(a):a;"string"===typeof b&&(b=m.createText(b));return b};a.prototype.createItemTemplates=function(a,c){var d=this.hints[a];return c.map(function(c,e){e=b('<div class="note-hint-item"/>');e.append(d.template?d.template(c):c+"");e.data({index:a,item:c});return e})};a.prototype.handleKeydown=function(a){this.$popover.is(":visible")&&
(a.keyCode===K.code.ENTER?(a.preventDefault(),this.replace()):a.keyCode===K.code.UP?(a.preventDefault(),this.moveUp()):a.keyCode===K.code.DOWN&&(a.preventDefault(),this.moveDown()))};a.prototype.searchKeyword=function(a,b,c){(a=this.hints[a])&&a.match.test(b)&&a.search?(b=a.match.exec(b),a.search(b[1],c)):c()};a.prototype.createGroup=function(a,c){var d=this,e=b('<div class="note-hint-group note-hint-group-'+a+'"/>');this.searchKeyword(a,c,function(b){b=b||[];b.length&&(e.html(d.createItemTemplates(a,
b)),d.show())});return e};a.prototype.handleKeyup=function(a){var b=this;if(!w.contains([K.code.ENTER,K.code.UP,K.code.DOWN],a.keyCode)){a=this.context.invoke("editor.getLastRange").getWordRange();var c=a.toString();if(this.hints.length&&c){this.$content.empty();var d=F.rect2bnd(w.last(a.getClientRects()));d&&(this.$popover.hide(),this.lastWordRange=a,this.hints.forEach(function(a,d){a.match.test(c)&&b.createGroup(d,c).appendTo(b.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),
"top"===this.direction?this.$popover.css({left:d.left,top:d.top-this.$popover.outerHeight()-5}):this.$popover.css({left:d.left,top:d.top+d.height+5}))}else this.hide()}};a.prototype.show=function(){this.$popover.show()};a.prototype.hide=function(){this.$popover.hide()};return a}();b.summernote=b.extend(b.summernote,{version:"0.8.12",plugins:{},dom:m,range:I,options:{langInfo:b.summernote.lang["en-US"],modules:{editor:cb,clipboard:db,dropzone:eb,codeview:fb,statusbar:gb,fullscreen:hb,handle:ib,hintPopover:yb,
autoLink:kb,autoSync:lb,autoReplace:mb,placeholder:nb,buttons:ob,toolbar:pb,linkDialog:qb,linkPopover:rb,imageDialog:sb,imagePopover:tb,tablePopover:ub,videoDialog:vb,helpDialog:wb,airPopover:xb},buttons:{},lang:"en-US",followingToolbar:!1,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],
popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,
height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,styleTags:"p blockquote pre h1 h2 h3 h4 h5 h6".split(" "),fontNames:"Arial;Arial Black;Comic Sans MS;Courier New;Helvetica Neue;Helvetica;Impact;Lucida Grande;Tahoma;Times New Roman;Verdana".split(";"),fontNamesIgnoreCheck:[],fontSizes:"8 9 10 11 12 14 18 24 36".split(" "),colors:["#000000 #424242 #636363 #9C9C94 #CEC6CE #EFEFEF #F7F7F7 #FFFFFF".split(" "),
"#FF0000 #FF9C00 #FFFF00 #00FF00 #00FFFF #0000FF #9C00FF #FF00FF".split(" "),"#F7C6CE #FFE7CE #FFEFC6 #D6EFD6 #CEDEE7 #CEE7F7 #D6D6E7 #E7D6DE".split(" "),"#E79C9C #FFC69C #FFE79C #B5D6A5 #A5C6CE #9CC6EF #B5A5D6 #D6A5BD".split(" "),"#E76363 #F7AD6B #FFD663 #94BD7B #73A5AD #6BADDE #8C7BC6 #C67BA5".split(" "),"#CE0000 #E79439 #EFC631 #6BA54A #4A7B8C #3984C6 #634AA5 #A54A7B".split(" "),"#9C0000 #B56308 #BD9400 #397B21 #104A5A #085294 #311873 #731842".split(" "),"#630000 #7B3900 #846300 #295218 #083139 #003163 #21104A #4A1031".split(" ")],
colorsName:["Black;Tundora;Dove Gray;Star Dust;Pale Slate;Gallery;Alabaster;White".split(";"),"Red;Orange Peel;Yellow;Green;Cyan;Blue;Electric Violet;Magenta".split(";"),"Azalea;Karry;Egg White;Zanah;Botticelli;Tropical Blue;Mischka;Twilight".split(";"),"Tonys Pink;Peach Orange;Cream Brulee;Sprout;Casper;Perano;Cold Purple;Careys Pink".split(";"),"Mandy;Rajah;Dandelion;Olivine;Gulf Stream;Viking;Blue Marguerite;Puce".split(";"),"Guardsman Red;Fire Bush;Golden Dream;Chelsea Cucumber;Smalt Blue;Boston Blue;Butterfly Bush;Cadillac".split(";"),
"Sangria;Mai Tai;Buddha Gold;Forest Green;Eden;Venice Blue;Meteorite;Claret".split(";"),"Rosewood;Cinnamon;Olive;Parsley;Tiber;Midnight Blue;Valentino;Loulou".split(";")],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:"1.0 1.2 1.4 1.5 1.6 1.8 2.0 3.0".split(" "),tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,
onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:"www.youtube.com www.youtube-nocookie.com www.facebook.com vine.co instagram.com player.vimeo.com www.dailymotion.com player.youku.com v.qq.com".split(" "),
keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1",
"CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull",
"CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",
rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",
font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",
table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}});b.summernote=b.extend(b.summernote,{ui:ha})});
(function(b){b.extend(b.summernote.lang,{"ru-RU":{font:{bold:"\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439",italic:"\u041a\u0443\u0440\u0441\u0438\u0432",underline:"\u041f\u043e\u0434\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439",clear:"\u0423\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u0438\u043b\u0438 \u0448\u0440\u0438\u0444\u0442\u0430",height:"\u0412\u044b\u0441\u043e\u0442\u0430 \u043b\u0438\u043d\u0438\u0438",name:"\u0428\u0440\u0438\u0444\u0442",strikethrough:"\u0417\u0430\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439",
subscript:"\u041d\u0438\u0436\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441",superscript:"\u0412\u0435\u0440\u0445\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441",size:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"},image:{image:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",insert:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",resizeFull:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440",
resizeHalf:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0434\u043e 50%",resizeQuarter:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0434\u043e 25%",floatLeft:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0441\u043b\u0435\u0432\u0430",floatRight:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u0430",floatNone:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",
shapeRounded:"\u0424\u043e\u0440\u043c\u0430: \u0417\u0430\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u043d\u0430\u044f",shapeCircle:"\u0424\u043e\u0440\u043c\u0430: \u041a\u0440\u0443\u0433",shapeThumbnail:"\u0424\u043e\u0440\u043c\u0430: \u041c\u0438\u043d\u0438\u0430\u0442\u044e\u0440\u0430",shapeNone:"\u0424\u043e\u0440\u043c\u0430: \u041d\u0435\u0442",dragImageHere:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",
dropImage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",selectFromFiles:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0444\u0430\u0439\u043b\u043e\u0432",maximumFileSize:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430",maximumFileSizeError:"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430",
url:"URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",original:"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b"},video:{video:"\u0412\u0438\u0434\u0435\u043e",videoLink:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0432\u0438\u0434\u0435\u043e",insert:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e",url:"URL \u0432\u0438\u0434\u0435\u043e",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion \u0438\u043b\u0438 Youku)"},
link:{link:"\u0421\u0441\u044b\u043b\u043a\u0430",insert:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",unlink:"\u0423\u0431\u0440\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",textToDisplay:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",url:"URL \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430",
openInNewWindow:"\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0432 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435"},table:{table:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",addRowAbove:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u0432\u044b\u0448\u0435",addRowBelow:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0438\u0436\u0435",addColLeft:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043b\u0435\u0432\u0430",
addColRight:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043f\u0440\u0430\u0432\u0430",delRow:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",delCol:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446",delTable:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443"},hr:{insert:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e"},
style:{style:"\u0421\u0442\u0438\u043b\u044c",p:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439",blockquote:"\u0426\u0438\u0442\u0430\u0442\u0430",pre:"\u041a\u043e\u0434",h1:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1",h2:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2",h3:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 3",h4:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 4",h5:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 5",h6:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 6"},
lists:{unordered:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",ordered:"\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"},options:{help:"\u041f\u043e\u043c\u043e\u0449\u044c",fullscreen:"\u041d\u0430 \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d",codeview:"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434"},paragraph:{paragraph:"\u041f\u0430\u0440\u0430\u0433\u0440\u0430\u0444",
outdent:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f",indent:"\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f",left:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043b\u0435\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",center:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",right:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",
justify:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u043f\u043e \u0448\u0438\u0440\u0438\u043d\u0435"},color:{recent:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0446\u0432\u0435\u0442",more:"\u0415\u0449\u0435 \u0446\u0432\u0435\u0442\u0430",background:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430",foreground:"\u0426\u0432\u0435\u0442 \u0448\u0440\u0438\u0444\u0442\u0430",transparent:"\u041f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0439",setTransparent:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u043c",
reset:"\u0421\u0431\u0440\u043e\u0441",resetToDefault:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044f"},shortcut:{shortcuts:"\u0421\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0432\u0438\u0448",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",textFormatting:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430",action:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",
paragraphFormatting:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444\u0430",documentStyle:"\u0421\u0442\u0438\u043b\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",extraKeys:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0438"},help:{insertParagraph:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444",
undo:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443",redo:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443",tab:"Tab",untab:"Untab",bold:'\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u044c "\u0416\u0438\u0440\u043d\u044b\u0439"',italic:'\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u044c "\u041d\u0430\u043a\u043b\u043e\u043d\u043d\u044b\u0439"',
underline:'\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u044c "\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439"',strikethrough:'\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u044c "\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439"',removeFormat:"\u0421\u0431\u043e\u0440\u0441\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u0438",justifyLeft:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043b\u0435\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",
justifyCenter:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",justifyRight:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",justifyFull:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u043d\u0430 \u0432\u0441\u044e \u0448\u0438\u0440\u0438\u043d\u0443",insertUnorderedList:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c/\u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",
insertOrderedList:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c/\u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",outdent:"\u0423\u0431\u0440\u0430\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444\u0435",indent:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444\u0435",
formatPara:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444 (\u0442\u0435\u0433 P)",formatH1:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H1",formatH2:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H2",
formatH3:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H3",formatH4:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H4",formatH5:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H5",
formatH6:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u0430\u043a H6",insertHorizontalRule:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u0447\u0435\u0440\u0442\u0443","linkDialog.show":'\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 "\u0421\u0441\u044b\u043b\u043a\u0430"'},
history:{undo:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",redo:"\u041f\u043e\u0432\u0442\u043e\u0440"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}})})(jQuery);
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof module&&module.exports?module.exports=b(require("jquery")):b(window.jQuery)})(function(b){b.extend(!0,b.summernote.lang,{"en-US":{cleaner:{tooltip:"Cleaner",not:"Text has been Cleaned!!!",limitText:"Text",limitHTML:"HTML"}}});b.extend(b.summernote.options,{cleaner:{action:"both",newline:"<br>",notStyle:"position:absolute;top:0;left:0;right:0",icon:'<i class="note-icon"><svg xmlns="http://www.w3.org/2000/svg" id="libre-paintbrush" viewBox="0 0 14 14" width="14" height="14"><path d="m 11.821425,1 q 0.46875,0 0.82031,0.311384 0.35157,0.311384 0.35157,0.780134 0,0.421875 -0.30134,1.01116 -2.22322,4.212054 -3.11384,5.035715 -0.64956,0.609375 -1.45982,0.609375 -0.84375,0 -1.44978,-0.61942 -0.60603,-0.61942 -0.60603,-1.469866 0,-0.857143 0.61608,-1.419643 l 4.27232,-3.877232 Q 11.345985,1 11.821425,1 z m -6.08705,6.924107 q 0.26116,0.508928 0.71317,0.870536 0.45201,0.361607 1.00781,0.508928 l 0.007,0.475447 q 0.0268,1.426339 -0.86719,2.32366 Q 5.700895,13 4.261155,13 q -0.82366,0 -1.45982,-0.311384 -0.63616,-0.311384 -1.0212,-0.853795 -0.38505,-0.54241 -0.57924,-1.225446 -0.1942,-0.683036 -0.1942,-1.473214 0.0469,0.03348 0.27455,0.200893 0.22768,0.16741 0.41518,0.29799 0.1875,0.130581 0.39509,0.24442 0.20759,0.113839 0.30804,0.113839 0.27455,0 0.3683,-0.247767 0.16741,-0.441965 0.38505,-0.753349 0.21763,-0.311383 0.4654,-0.508928 0.24776,-0.197545 0.58928,-0.31808 0.34152,-0.120536 0.68974,-0.170759 0.34821,-0.05022 0.83705,-0.07031 z"/></svg></i>',
keepHtml:!0,keepOnlyTags:[],keepClasses:!1,badTags:"style script applet embed noframes noscript html".split(" "),badAttributes:["style","start"],limitChars:520,limitDisplay:"both",limitStop:!1}});b.extend(b.summernote.plugins,{cleaner:function(c){var a=b.summernote.ui,d=c.layoutInfo.note,e=c.layoutInfo.editor,f=c.options,l=f.langInfo,g=function(a,b){var c=a;f.cleaner.keepClasses||(c=a.replace(/(\n|\r| class=(")?Mso[a-zA-Z]+(")?)/g," "));c=c.replace(/(\n)+/g,b);if(f.cleaner.keepHtml){c=c.replace(/\x3c!--(.*?)--\x3e/gi,
"");a=/<(\/)*(meta|link|\?xml:|st1:|o:|font)(.*?)>/gi;c=c.replace(a,"");b=f.cleaner.badTags;for(var d=0;d<b.length;d++)a=new RegExp("<"+b[d]+"\\b.*>.*</"+b[d]+">","gi"),c=c.replace(a,"");var e=f.cleaner.keepOnlyTags;"undefined"==typeof e&&(e=[]);0<e.length&&(e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),c=c.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(a,b){return-1<e.indexOf("<"+b.toLowerCase()+">")?a:""}));a=f.cleaner.badAttributes;for(b=0;b<a.length;b++)c=c.replace(new RegExp(" "+
a[b]+"=['|\"](.*?)['|\"]","gi"),"")}return c};"both"!=f.cleaner.action&&"button"!=f.cleaner.action||c.memo("button.cleaner",function(){return a.button({contents:f.cleaner.icon,tooltip:l.cleaner.tooltip,container:"body",click:function(){d.summernote("createRange").toString()?d.summernote("pasteHTML",d.summernote("createRange").toString()):d.summernote("code",g(d.summernote("code")));0<e.find(".note-status-output").length?e.find(".note-status-output").html('<div class="alert alert-success">'+l.cleaner.not+
"</div>"):e.find(".note-editing-area").append('<div class="alert alert-success" style="'+f.cleaner.notStyle+'">'+l.cleaner.not+"</div>")}}).render()});this.events={"summernote.init":function(){1>e.find(".note-status-output").length&&(e.find(".note-statusbar").prepend('<output class="note-status-output"></output>'),b("head").append("<style>.note-statusbar .note-status-output{display:block;padding-top:7px;width:100%;font-size:14px;line-height:1.42857143;height:25px;color:#000}.note-statusbar .pull-right{float:right!important}.note-statusbar .note-status-output .text-muted{color:#777}.note-statusbar .note-status-output .text-primary{color:#286090}.note-statusbar .note-status-output .text-success{color:#3c763d}.note-statusbar .note-status-output .text-info{color:#31708f}.note-statusbar .note-status-output .text-warning{color:#8a6d3b}.note-statusbar .note-status-output .text-danger{color:#a94442}.note-statusbar .alert{margin:-7px 0 0 0;padding:2px 10px;border:1px solid transparent;border-radius:0}.note-statusbar .alert .note-icon{margin-right:5px}.note-statusbar .alert-success{color:#3c763d!important;background-color: #dff0d8 !important;border-color:#d6e9c6}.note-statusbar .alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.note-statusbar .alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.note-statusbar .alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}</style>"));
if(0!=f.cleaner.limitChars||"none"!=f.cleaner.limitDisplay){var a=e.find(".note-editable").text().replace(/(<([^>]+)>)/ig,"").replace(/( )/," "),c=e.find(".note-editable").html(),d="",d=a.length>f.cleaner.limitChars&&0<f.cleaner.limitChars?d+'text-danger">':d+'">';if("text"==f.cleaner.limitDisplay||"both"==f.cleaner.limitDisplay)d+=l.cleaner.limitText+": "+a.length;"both"==f.cleaner.limitDisplay&&(d+=" / ");if("html"==f.cleaner.limitDisplay||"both"==f.cleaner.limitDisplay)d+=l.cleaner.limitHTML+": "+
c.length;e.find(".note-status-output").html('<small class="pull-right '+d+"&nbsp;</small>")}},"summernote.keydown":function(a,c){if(0!=f.cleaner.limitChars||"none"!=f.cleaner.limitDisplay){a=e.find(".note-editable").text().replace(/(<([^>]+)>)/ig,"").replace(/( )/," ");var d=e.find(".note-editable").html(),g="";if(1==f.cleaner.limitStop&&a.length>=f.cleaner.limitChars){a=c.keyCode;allowed_keys=[8,37,38,39,40,46];if(-1!=b.inArray(a,allowed_keys))return e.find(".cleanerLimit").removeClass("text-danger"),
!0;e.find(".cleanerLimit").addClass("text-danger");c.preventDefault();c.stopPropagation()}else{g=a.length>f.cleaner.limitChars&&0<f.cleaner.limitChars?g+'text-danger">':g+'">';if("text"==f.cleaner.limitDisplay||"both"==f.cleaner.limitDisplay)g+=l.cleaner.limitText+": "+a.length;"both"==f.cleaner.limitDisplay&&(g+=" / ");if("html"==f.cleaner.limitDisplay||"both"==f.cleaner.limitDisplay)g+=l.cleaner.limitHTML+": "+d.length;e.find(".note-status-output").html('<small class="cleanerLimit pull-right '+
g+"&nbsp;</small>")}}},"summernote.paste":function(a,b){if("both"==f.cleaner.action||"paste"==f.cleaner.action){b.preventDefault();a=window.navigator.userAgent.indexOf("MSIE ");a=0<a||!!navigator.userAgent.match(/Trident.*rv\:11\./);var c=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),r=a?window.clipboardData.getData("Text"):b.originalEvent.clipboardData.getData(f.cleaner.keepHtml?"Text":"text/plain");r&&(a||c?setTimeout(function(){d.summernote("pasteHTML",g(r,f.cleaner.newline))},1):d.summernote("pasteHTML",
g(r,f.cleaner.newline)),0<e.find(".note-status-output").length?e.find(".note-status-output").html('<div class="summernote-cleanerAlert alert alert-success">'+l.cleaner.not+"</div>"):e.find(".note-resizebar").append('<div class="summernote-cleanerAlert alert alert-success" style="'+f.cleaner.notStyle+'">'+l.cleaner.not+"</div>"))}}}}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof module&&module.exports?module.exports=b(require("jquery")):b(window.jQuery)})(function(b){var c=!0;b.extend(b.summernote.plugins,{br:function(a){this.events={"summernote.keydown":function(b,e){16===e.keyCode&&(c=!1);13===e.keyCode&&c&&(a.invoke("editor.saveRange"),a.invoke("editor.pasteHTML","<br />&VeryThinSpace;"),e.preventDefault())},"summernote.keyup":function(a,b){16==b.keyCode&&(c=!0)}};this.initialize=
function(){};this.destroy=function(){this.$panel.remove();this.$panel=null}}})});"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},windowIsDefined="object"===("undefined"===typeof window?"undefined":_typeof(window));
(function(b){if("function"===typeof define&&define.amd)define(["jquery"],b);else if("object"===("undefined"===typeof module?"undefined":_typeof(module))&&module.exports){var c;try{c=require("jquery")}catch(a){c=null}module.exports=b(c)}else window&&(window.Slider=b(window.jQuery))})(function(b){windowIsDefined&&!window.console&&(window.console={});windowIsDefined&&!window.console.log&&(window.console.log=function(){});windowIsDefined&&!window.console.warn&&(window.console.warn=function(){});var c;
(function(a){function b(){}var c=Array.prototype.slice;(function(a){function l(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function g(b,d){a.fn[b]=function(g){if("string"===typeof g){for(var l=c.call(arguments,1),x=0,z=this.length;x<z;x++){var B=a.data(this[x],b);if(B)if(a.isFunction(B[g])&&"_"!==g.charAt(0)){var t=B[g].apply(B,l);if(void 0!==t&&t!==B)return t}else h("no such method '"+g+"' for "+b+" instance");else h("cannot call methods on "+
b+" prior to initialization; attempted to call '"+g+"'")}return this}l=this.map(function(){var c=a.data(this,b);c?(c.option(g),c._init()):(c=new d(this,g),a.data(this,b,c));return a(this)});return!l||1<l.length?l:l[0]}}if(a){var h="undefined"===typeof console?b:function(a){console.error(a)};a.bridget=function(a,b){l(b);g(a,b)};return a.bridget}})(a)})(b);(function(a){function b(c,d){function e(a,b){b="data-slider-"+b.replace(/_/g,"-");a=a.getAttribute(b);try{return JSON.parse(a)}catch(c){return a}}
this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1};this.ticksCallbackMap={};this.handleCallbackMap={};"string"===typeof c?this.element=document.querySelector(c):c instanceof HTMLElement&&(this.element=c);d=d?d:{};c=Object.keys(this.defaultOptions);for(var l=0;l<c.length;l++){var r=c[l],v=d[r],v="undefined"!==typeof v?v:e(this.element,r),v=null!==v?v:this.defaultOptions[r];this.options||(this.options={});this.options[r]=v}"auto"===this.options.rtl&&(this.options.rtl=
"rtl"===window.getComputedStyle(this.element).direction);"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position=this.options.rtl?"left":"right";d=this.element.style.width;c=!1;var r=this.element.parentNode,x,z,B,t,y;if(this.sliderElem)c=!0;else{this.sliderElem=
document.createElement("div");this.sliderElem.className="slider";v=document.createElement("div");v.className="slider-track";z=document.createElement("div");z.className="slider-track-low";x=document.createElement("div");x.className="slider-selection";B=document.createElement("div");B.className="slider-track-high";t=document.createElement("div");t.className="slider-handle min-slider-handle";t.setAttribute("role","slider");t.setAttribute("aria-valuemin",this.options.min);t.setAttribute("aria-valuemax",
this.options.max);y=document.createElement("div");y.className="slider-handle max-slider-handle";y.setAttribute("role","slider");y.setAttribute("aria-valuemin",this.options.min);y.setAttribute("aria-valuemax",this.options.max);v.appendChild(z);v.appendChild(x);v.appendChild(B);this.rangeHighlightElements=[];l=this.options.rangeHighlights;if(Array.isArray(l)&&0<l.length)for(var u=0;u<l.length;u++){var A=document.createElement("div");A.className="slider-rangeHighlight slider-selection "+(l[u].class||
"");this.rangeHighlightElements.push(A);v.appendChild(A)}(l=Array.isArray(this.options.labelledby))&&this.options.labelledby[0]&&t.setAttribute("aria-labelledby",this.options.labelledby[0]);l&&this.options.labelledby[1]&&y.setAttribute("aria-labelledby",this.options.labelledby[1]);!l&&this.options.labelledby&&(t.setAttribute("aria-labelledby",this.options.labelledby),y.setAttribute("aria-labelledby",this.options.labelledby));this.ticks=[];if(Array.isArray(this.options.ticks)&&0<this.options.ticks.length){this.ticksContainer=
document.createElement("div");this.ticksContainer.className="slider-tick-container";for(l=0;l<this.options.ticks.length;l++){u=document.createElement("div");u.className="slider-tick";if(this.options.ticks_tooltip){var N=this._addTickListener(),A=N.addMouseEnter(this,u,l),N=N.addMouseLeave(this,u);this.ticksCallbackMap[l]={mouseEnter:A,mouseLeave:N}}this.ticks.push(u);this.ticksContainer.appendChild(u)}x.className+=" tick-slider-selection"}this.tickLabels=[];if(Array.isArray(this.options.ticks_labels)&&
0<this.options.ticks_labels.length)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",l=0;l<this.options.ticks_labels.length;l++)u=document.createElement("div"),A=0===this.options.ticks_positions.length,A=this.options.reversed&&A?this.options.ticks_labels.length-(l+1):l,u.className="slider-tick-label",u.innerHTML=this.options.ticks_labels[A],this.tickLabels.push(u),this.tickLabelContainer.appendChild(u);l=function(a){var b=document.createElement("div");
b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner";a.appendChild(b);a.appendChild(c)};u=document.createElement("div");u.className="tooltip tooltip-main";u.setAttribute("role","presentation");l(u);A=document.createElement("div");A.className="tooltip tooltip-min";A.setAttribute("role","presentation");l(A);N=document.createElement("div");N.className="tooltip tooltip-max";N.setAttribute("role","presentation");l(N);this.sliderElem.appendChild(v);this.sliderElem.appendChild(u);
this.sliderElem.appendChild(A);this.sliderElem.appendChild(N);this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer);this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer);this.sliderElem.appendChild(t);this.sliderElem.appendChild(y);r.insertBefore(this.sliderElem,this.element);this.element.style.display="none"}a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem));this.eventToCallbackMap={};this.sliderElem.id=this.options.id;this.touchCapable=
"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;this.touchY=this.touchX=0;this.tooltip=this.sliderElem.querySelector(".tooltip-main");this.tooltipInner=this.tooltip.querySelector(".tooltip-inner");this.tooltip_min=this.sliderElem.querySelector(".tooltip-min");this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner");this.tooltip_max=this.sliderElem.querySelector(".tooltip-max");this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner");
f[this.options.scale]&&(this.options.scale=f[this.options.scale]);!0===c&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a);this._removeProperty(this.trackSelection,a);this._removeProperty(this.trackHigh,
a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left");this._removeProperty(a,"right");this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left");this._removeProperty(a,"right");this._removeProperty(a,"top");this._removeProperty(a,"margin-left");this._removeProperty(a,"margin-right");this._removeProperty(a,"margin-top");this._removeClass(a,"right");this._removeClass(a,"left");this._removeClass(a,
"top")},this));"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=d,this.options.orientation="horizontal",this.stylePos=this.options.rtl?"right":"left",this.mousePos="pageX",this.sizePos="offsetWidth");this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl");this._setTooltipPosition();Array.isArray(this.options.ticks)&&
0<this.options.ticks.length&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks));Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value;this.trackLow=z||this.trackLow;this.trackSelection=x||this.trackSelection;this.trackHigh=B||this.trackHigh;if("none"===this.options.selection)this._addClass(this.trackLow,
"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide");else if("after"===this.options.selection||"before"===this.options.selection)this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide");this.handle1=t||this.handle1;this.handle2=y||this.handle2;if(!0===c)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),l=0;l<this.ticks.length;l++)this._removeClass(this.ticks[l],
"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),l=0;l<this.ticks.length;l++)this._addClass(this.ticks[l],this.options.handle);this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];this.setValue(this._state.value);this.handle1Keydown=this._keydown.bind(this,0);this.handle1.addEventListener("keydown",this.handle1Keydown,
!1);this.handle2Keydown=this._keydown.bind(this,1);this.handle2.addEventListener("keydown",this.handle2Keydown,!1);this.mousedown=this._mousedown.bind(this);this.touchstart=this._touchstart.bind(this);this.touchmove=this._touchmove.bind(this);if(this.touchCapable){var Q=!1;try{var W=Object.defineProperty({},"passive",{get:function(){Q=!0}});window.addEventListener("test",null,W)}catch(Y){}x=Q?{passive:!0}:!1;this.sliderElem.addEventListener("touchstart",this.touchstart,x);this.sliderElem.addEventListener("touchmove",
this.touchmove,x)}this.sliderElem.addEventListener("mousedown",this.mousedown,!1);this.resize=this._resize.bind(this);window.addEventListener("resize",this.resize,!1);"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip?
(x=this._addTickListener(),z=x.addMouseEnter(this,this.handle1),B=x.addMouseLeave(this,this.handle1),this.handleCallbackMap.handle1={mouseEnter:z,mouseLeave:B},z=x.addMouseEnter(this,this.handle2),B=x.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:z,mouseLeave:B}):(this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1)),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",
this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1));this.options.enabled?this.enable():this.disable()}var e={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},
f={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min),c=!0;if(0<this.options.ticks_positions.length){for(var d,e,f,b=0,c=1;c<this.options.ticks_positions.length;c++)if(a<=this.options.ticks_positions[c]){d=this.options.ticks[c-1];f=this.options.ticks_positions[c-1];e=this.options.ticks[c];b=this.options.ticks_positions[c];break}b=d+(a-f)/(b-f)*(e-d);c=!1}a=(c?this.options.min:0)+Math.round(b/this.options.step)*this.options.step;return a<this.options.min?this.options.min:a>
this.options.max?this.options.max:a},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(0<this.options.ticks_positions.length){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=0<f?this.options.ticks[f-1]:0;d=0<f?this.options.ticks_positions[f-1]:0;c=this.options.ticks[f];e=this.options.ticks_positions[f];break}if(0<f)return d+(a-b)/(c-b)*(e-d)}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=
0===this.options.min?0:Math.log(this.options.min);a=Math.exp(b+(Math.log(this.options.max)-b)*a/100);a=this.options.min+Math.round((a-this.options.min)/this.options.step)*this.options.step;return a<this.options.min?this.options.min:a>this.options.max?this.options.max:a},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=0===this.options.min?0:Math.log(this.options.min);return 100*((0===a?0:Math.log(a))-b)/(Math.log(this.options.max)-b)}}};c=function(a,c){b.call(this,a,
c);return this};c.prototype={_init:function(){},constructor:c,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},
getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);a=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=a(this._state.value[0]),this._state.value[1]=a(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,
Math.min(this.options.max,this._state.value[1]))):(this._state.value=a(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min);this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:
[0,0,100];this._layout();a=this.options.range?this._state.value:this._state.value[0];this._setDataVal(a);!0===b&&this._trigger("slide",a);d!==a&&!0===c&&this._trigger("change",{oldValue:d,newValue:a});return this},destroy:function(){this._removeSliderEventHandlers();this.sliderElem.parentNode.removeChild(this.sliderElem);this.element.style.display="";this._cleanUpEventCallbacksMap();this.element.removeAttribute("data");a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){this._state.enabled=
!1;this.handle1.removeAttribute("tabindex");this.handle2.removeAttribute("tabindex");this._addClass(this.sliderElem,"slider-disabled");this._trigger("slideDisabled");return this},enable:function(){this._state.enabled=!0;this.handle1.setAttribute("tabindex",0);this.handle2.setAttribute("tabindex",0);this._removeClass(this.sliderElem,"slider-disabled");this._trigger("slideEnabled");return this},toggle:function(){this._state.enabled?this.disable():this.enable();return this},isEnabled:function(){return this._state.enabled},
on:function(a,b){this._bindNonQueryEventHandler(a,b);return this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){this.options[a]=b;return this},refresh:function(){this._removeSliderEventHandlers();b.call(this,this.element,this.options);a&&a.data(this.element,"slider",this);return this},relayout:function(){this._resize();this._layout();return this},
_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1);this.handle2.removeEventListener("keydown",this.handle2Keydown,!1);if(this.options.ticks_tooltip){for(var a=this.ticksContainer.getElementsByClassName("slider-tick"),b=0;b<a.length;b++)a[b].removeEventListener("mouseenter",this.ticksCallbackMap[b].mouseEnter,!1),a[b].removeEventListener("mouseleave",this.ticksCallbackMap[b].mouseLeave,!1);this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,
!1);this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1);this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1);this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1)}this.ticksCallbackMap=this.handleCallbackMap=null;this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1));this.hideTooltip&&(this.handle1.removeEventListener("blur",
this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1));this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1);this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1);this.sliderElem.removeEventListener("touchstart",this.touchstart,!1);this.sliderElem.removeEventListener("touchmove",this.touchmove,!1);this.sliderElem.removeEventListener("mousedown",this.mousedown,!1);window.removeEventListener("resize",this.resize,
!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]);this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){a=this.eventToCallbackMap[a];if(void 0!==a)for(var c=0;c<a.length;c++)if(a[c]===b){a.splice(c,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++)delete this.eventToCallbackMap[a[b]]},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,
"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none");this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in"));this._state.over=!1},_setToolTipOnMouseOver:function(a){function b(a,c){return c?[100-
a.percentage[0],this.options.range?100-a.percentage[1]:a.percentage[1]]:[a.percentage[0],a.percentage[1]]}var c=this.options.formatter(a?a.value[0]:this._state.value[0]);a=a?b(a,this.options.reversed):b(this._state,this.options.reversed);this._setText(this.tooltipInner,c);this.tooltip.style[this.stylePos]=a[0]+"%";"vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/
2+"px")},_addTickListener:function(){return{addMouseEnter:function(a,b,c){var d=function(){var b=a._state,d=parseInt(0<=c?c:this.attributes["aria-valuenow"].value,10);b.value[0]=d;b.percentage[0]=a.options.ticks_positions[d];a._setToolTipOnMouseOver(b);a._showTooltip()};b.addEventListener("mouseenter",d,!1);return d},addMouseLeave:function(a,b){var c=function(){a._hideTooltip()};b.addEventListener("mouseleave",c,!1);return c}}},_layout:function(){var a;a=this.options.reversed?[100-this._state.percentage[0],
this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]];this.handle1.style[this.stylePos]=a[0]+"%";this.handle1.setAttribute("aria-valuenow",this._state.value[0]);isNaN(this.options.formatter(this._state.value[0]))&&this.handle1.setAttribute("aria-valuetext",this.options.formatter(this._state.value[0]));this.handle2.style[this.stylePos]=a[1]+"%";this.handle2.setAttribute("aria-valuenow",this._state.value[1]);isNaN(this.options.formatter(this._state.value[1]))&&
this.handle2.setAttribute("aria-valuetext",this.options.formatter(this._state.value[1]));if(0<this.rangeHighlightElements.length&&Array.isArray(this.options.rangeHighlights)&&0<this.options.rangeHighlights.length)for(var b=0;b<this.options.rangeHighlights.length;b++){var c=this._toPercentage(this.options.rangeHighlights[b].start),d=this._toPercentage(this.options.rangeHighlights[b].end);if(this.options.reversed)var e=100-d,d=100-c,c=e;(c=this._createHighlightRange(c,d))?"vertical"===this.options.orientation?
(this.rangeHighlightElements[b].style.top=c.start+"%",this.rangeHighlightElements[b].style.height=c.size+"%"):(this.options.rtl?this.rangeHighlightElements[b].style.right=c.start+"%":this.rangeHighlightElements[b].style.left=c.start+"%",this.rangeHighlightElements[b].style.width=c.size+"%"):this.rangeHighlightElements[b].style.display="none"}if(Array.isArray(this.options.ticks)&&0<this.options.ticks.length){b="vertical"===this.options.orientation?"height":"width";c="vertical"===this.options.orientation?
"marginTop":this.options.rtl?"marginRight":"marginLeft";d=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var f=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[c]=-d/2+"px"),f=this.tickLabelContainer.offsetHeight;else for(e=0;e<this.tickLabelContainer.childNodes.length;e++)this.tickLabelContainer.childNodes[e].offsetHeight>f&&(f=this.tickLabelContainer.childNodes[e].offsetHeight);"horizontal"===this.options.orientation&&
(this.sliderElem.style.marginBottom=f+"px")}for(e=0;e<this.options.ticks.length;e++)f=this.options.ticks_positions[e]||this._toPercentage(this.options.ticks[e]),this.options.reversed&&(f=100-f),this.ticks[e].style[this.stylePos]=f+"%",this._removeClass(this.ticks[e],"in-selection"),this.options.range?f>=a[0]&&f<=a[1]&&this._addClass(this.ticks[e],"in-selection"):"after"===this.options.selection&&f>=a[0]?this._addClass(this.ticks[e],"in-selection"):"before"===this.options.selection&&f<=a[0]&&this._addClass(this.ticks[e],
"in-selection"),this.tickLabels[e]&&(this.tickLabels[e].style[b]=d+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[e]?(this.tickLabels[e].style.position="absolute",this.tickLabels[e].style[this.stylePos]=f+"%",this.tickLabels[e].style[c]=-d/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[e].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[e].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[c]=
this.sliderElem.offsetWidth/2*-1+"px"))}this.options.range?(b=this.options.formatter(this._state.value),this._setText(this.tooltipInner,b),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px"),b=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner_min,b),b=this.options.formatter(this._state.value[1]),
this._setText(this.tooltipInner_max,b),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,
"margin-"+this.stylePos,-this.tooltip_max.offsetWidth/2+"px")):(b=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,b),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px"));"vertical"===this.options.orientation?(this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+
"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%"):("right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(a[0],a[1])+"%":this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=
Math.abs(a[0]-a[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%",a=this.tooltip_min.getBoundingClientRect(),b=this.tooltip_max.getBoundingClientRect(),"bottom"===this.options.tooltip_position?a.right>b.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,
"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):a.right>b.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top))},_createHighlightRange:function(a,b){return this._isHighlightRange(a,b)?a>b?{start:b,size:a-
b}:{start:a,size:b-a}:null},_isHighlightRange:function(a,b){return 0<=a&&100>=a&&0<=b&&100>=b?!0:!1},_resize:function(a){this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);
this.options.range?(this._state.dragged=Math.abs(this._state.percentage[0]-b)<Math.abs(this._state.percentage[1]-b)?0:1,this._adjustPercentageForRangeSliders(b)):this._state.dragged=0;this._state.percentage[this._state.dragged]=b;this._layout();this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1));this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1);this.mouseup&&document.removeEventListener("mouseup",
this.mouseup,!1);this.mousemove=this._mousemove.bind(this);this.mouseup=this._mouseup.bind(this);this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1));document.addEventListener("mousemove",this.mousemove,!1);document.addEventListener("mouseup",this.mouseup,!1);this._state.inDrag=!0;b=this._calculateValue();this._trigger("slideStart",b);this._setDataVal(b);this.setValue(b,!1,!0);a.returnValue=!1;this.options.focus&&this._triggerFocusOnHandle(this._state.dragged);
return!0},_touchstart:function(a){void 0===a.changedTouches?this._mousedown(a):(a=a.changedTouches[0],this.touchX=a.pageX,this.touchY=a.pageY)},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus();1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="horizontal"===this.options.orientation&&this.options.reversed;if("vertical"===this.options.orientation&&
!this.options.reversed||d)c=-c}c=this._state.value[a]+c*this.options.step;d=c/this.options.max*100;this._state.keyCtrl=a;this.options.range&&(this._adjustPercentageForRangeSliders(d),c=[this._state.keyCtrl?this._state.value[0]:c,this._state.keyCtrl?c:this._state.value[1]]);this._trigger("slideStart",c);this._setDataVal(c);this.setValue(c,!0,!0);this._setDataVal(c);this._trigger("slideStop",c);this._layout();this._pauseEvent(b);delete this._state.keyCtrl;return!1}},_pauseEvent:function(a){a.stopPropagation&&
a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;a=this._getPercentage(a);this._adjustPercentageForRangeSliders(a);this._state.percentage[this._state.dragged]=a;this._layout();a=this._calculateValue(!0);this.setValue(a,!0,!0);return!1},_touchmove:function(a){if(void 0!==a.changedTouches){var b=a.changedTouches[0],c=b.pageX-this.touchX,b=b.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&
5>=c&&-5<=c&&(15<=b||-15>=b)?this._mousedown(a):5>=b&&-5<=b&&(15<=c||-15>=c)&&this._mousedown(a))}},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a),b=b?b-1:0,c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],
b)>c?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._state.value[1]/this.options.max*100<a?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._state.value[0]/this.options.max*100>a&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",
this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1));document.removeEventListener("mousemove",this.mousemove,!1);document.removeEventListener("mouseup",this.mouseup,!1);this._state.inDrag=!1;!1===this._state.over&&this._hideTooltip();var a=this._calculateValue(!0);this._layout();this._setDataVal(a);this._trigger("slideStop",a);return!1},_calculateValue:function(a){var b;this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),
b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b));if(a){a=[b,Infinity];for(var c=0;c<this.options.ticks.length;c++){var d=Math.abs(this.options.ticks[c]-b);d<=a[1]&&(a=[this.options.ticks[c],d])}if(a[1]<=this.options.ticks_snap_bounds)return a[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);
return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){a=a.toFixed(b);return parseFloat(a)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);a=a[this.mousePos]-this._state.offset[this.stylePos];"right"===this.stylePos&&(a=-a);a=a/this._state.size*100;a=Math.round(a/
this._state.percentage[2])*this._state.percentage[2];this.options.reversed&&(a=100-a);return Math.max(0,Math.min(100,a))},_validateInputValue:function(a){if(isNaN(+a)){if(Array.isArray(a))return this._validateArray(a),a;throw Error(e.formatInvalidInputErrorMsg(a));}return+a},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!==typeof c)throw Error(e.formatInvalidInputErrorMsg(c));}},_setDataVal:function(a){this.element.setAttribute("data-value",a);this.element.setAttribute("value",
a);this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++)(0,d[e])(c);a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){a={type:a,value:b};this.$element.trigger(a);this.$sliderElem.trigger(a)},_unbindJQueryEventHandlers:function(){this.$element.off();this.$sliderElem.off()},_setText:function(a,b){"undefined"!==typeof a.textContent?a.textContent=b:"undefined"!==typeof a.innerText&&(a.innerText=b)},
_removeClass:function(a,b){b=b.split(" ");for(var c=a.className,d=0;d<b.length;d++)c=c.replace(new RegExp("(?:\\s|^)"+b[d]+"(?:\\s|$)")," ");a.className=c.trim()},_addClass:function(a,b){b=b.split(" ");for(var c=a.className,d=0;d<b.length;d++){var e=b[d];(new RegExp("(?:\\s|^)"+e+"(?:\\s|$)")).test(c)||(c+=" "+e)}a.className=c.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetRight:function(a){return a.getBoundingClientRect().right},_offsetTop:function(a){for(var b=a.offsetTop;(a=
a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),right:this._offsetRight(a),top:this._offsetTop(a)}},_css:function(b,c,d){a?a.style(b,c,d):(c=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()}),b.style[c]=d)},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},
_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b;b=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right";var c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b);a.style[c]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom");a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top");
a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}};if(a&&a.fn){var l=void 0;a.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),l="bootstrapSlider"):(a.bridget("slider",c),l="slider");a.bridget("bootstrapSlider",c);a(function(){a("input[data-provide=slider]")[l]()})}})(b);return c});
function MGPopUp(b){this.cookieName=b;this.divId=function(b){this.modalDivId=b;return this};this.modalHtml=function(b,a,d){d||(d='<button type="button" class="btn btn-primary btn-lg" data-dismiss="modal">\u0417\u0430\u043a\u0440\u044b\u0442\u044c</button>');b=$('<div class="hidden modal fade" id="ds_teaser-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n        <div class="modal-dialog modal-lg" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h2 class="modal-title" id="myModalLabel">'+
b+'</h2>\n                </div>\n                <div class="modal-body">\n'+a+'\n                </div>\n                <div class="modal-footer">\n'+d+"\n                </div>\n            </div>\n        </div>\n        </div>");$("body").append(b);this.modalDivId="ds_teaser-modal";return this};this.showIf=function(b,a){!this.modalDivId||$.cookie(this.cookieName)||null!=b&&!b(this)||(a=a||150,$("#"+this.modalDivId).modal("show").removeClass("hidden"),$.cookie(this.cookieName,"true",{expires:a,
path:"/"}))}}
rm_h.comments={initForm:function(){rm_h.comments.initInput("#twittMessage");setTimeout(function(){$("#twittMessage").focus();$("#twittPageNumHidden").val(rm_h.cur)},300);$("#twittPageNumHidden").val(rm_h.cur);$(".new-twitt-button").hide()},hideForm:function(b){log("hide!!");b&&$("#new-twitt-ph").empty();$(".new-twitt-button").show()},initInput:function(b){$(b).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");var b=$(this);b.attr("maxlength")&&(b.after("<div class='small max-length-label' style='text-align: right; margin-top: -18px; margin-right:2px;'><span class='label label-info'></span></div>"),
rm_h.comments.checkMaxLength(this))}).on("input",function(){this.style.height="auto";this.style.height=this.scrollHeight+"px";rm_h.comments.checkMaxLength(this)})},checkMaxLength:function(b){b=$(b);var c=b.next(".max-length-label").find(".label"),a=parseInt(b.attr("maxlength")),d=b.val().length,d=a-d;c.text(d).toggleClass("label-info",10<=d).toggleClass("label-danger",10>d);0>d&&(b.val(b.val().slice(0,a)),c.text(0))}};